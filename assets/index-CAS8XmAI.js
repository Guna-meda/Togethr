(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function OE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Em={exports:{}},Ul={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function nA(){if(O_)return Ul;O_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Ul.Fragment=e,Ul.jsx=n,Ul.jsxs=n,Ul}var k_;function iA(){return k_||(k_=1,Em.exports=nA()),Em.exports}var A=iA(),Tm={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function rA(){if(M_)return Ne;M_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator;function S(C){return C===null||typeof C!="object"?null:(C=b&&C[b]||C["@@iterator"],typeof C=="function"?C:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,Y={};function G(C,Z,oe){this.props=C,this.context=Z,this.refs=Y,this.updater=oe||M}G.prototype.isReactComponent={},G.prototype.setState=function(C,Z){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,Z,"setState")},G.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function $(){}$.prototype=G.prototype;function ae(C,Z,oe){this.props=C,this.context=Z,this.refs=Y,this.updater=oe||M}var te=ae.prototype=new $;te.constructor=ae,k(te,G.prototype),te.isPureReactComponent=!0;var pe=Array.isArray,he={H:null,A:null,T:null,S:null,V:null},ve=Object.prototype.hasOwnProperty;function V(C,Z,oe,se,fe,be){return oe=be.ref,{$$typeof:i,type:C,key:Z,ref:oe!==void 0?oe:null,props:be}}function R(C,Z){return V(C.type,Z,void 0,void 0,void 0,C.props)}function I(C){return typeof C=="object"&&C!==null&&C.$$typeof===i}function x(C){var Z={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(oe){return Z[oe]})}var D=/\/+/g;function P(C,Z){return typeof C=="object"&&C!==null&&C.key!=null?x(""+C.key):Z.toString(36)}function N(){}function ge(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(N,N):(C.status="pending",C.then(function(Z){C.status==="pending"&&(C.status="fulfilled",C.value=Z)},function(Z){C.status==="pending"&&(C.status="rejected",C.reason=Z)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function le(C,Z,oe,se,fe){var be=typeof C;(be==="undefined"||be==="boolean")&&(C=null);var Te=!1;if(C===null)Te=!0;else switch(be){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(C.$$typeof){case i:case e:Te=!0;break;case _:return Te=C._init,le(Te(C._payload),Z,oe,se,fe)}}if(Te)return fe=fe(C),Te=se===""?"."+P(C,0):se,pe(fe)?(oe="",Te!=null&&(oe=Te.replace(D,"$&/")+"/"),le(fe,Z,oe,"",function(Mt){return Mt})):fe!=null&&(I(fe)&&(fe=R(fe,oe+(fe.key==null||C&&C.key===fe.key?"":(""+fe.key).replace(D,"$&/")+"/")+Te)),Z.push(fe)),1;Te=0;var tt=se===""?".":se+":";if(pe(C))for(var qe=0;qe<C.length;qe++)se=C[qe],be=tt+P(se,qe),Te+=le(se,Z,oe,be,fe);else if(qe=S(C),typeof qe=="function")for(C=qe.call(C),qe=0;!(se=C.next()).done;)se=se.value,be=tt+P(se,qe++),Te+=le(se,Z,oe,be,fe);else if(be==="object"){if(typeof C.then=="function")return le(ge(C),Z,oe,se,fe);throw Z=String(C),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Te}function j(C,Z,oe){if(C==null)return C;var se=[],fe=0;return le(C,se,"","",function(be){return Z.call(oe,be,fe++)}),se}function W(C){if(C._status===-1){var Z=C._result;Z=Z(),Z.then(function(oe){(C._status===0||C._status===-1)&&(C._status=1,C._result=oe)},function(oe){(C._status===0||C._status===-1)&&(C._status=2,C._result=oe)}),C._status===-1&&(C._status=0,C._result=Z)}if(C._status===1)return C._result.default;throw C._result}var z=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function ue(){}return Ne.Children={map:j,forEach:function(C,Z,oe){j(C,function(){Z.apply(this,arguments)},oe)},count:function(C){var Z=0;return j(C,function(){Z++}),Z},toArray:function(C){return j(C,function(Z){return Z})||[]},only:function(C){if(!I(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Ne.Component=G,Ne.Fragment=n,Ne.Profiler=o,Ne.PureComponent=ae,Ne.StrictMode=s,Ne.Suspense=p,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=he,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(C){return he.H.useMemoCache(C)}},Ne.cache=function(C){return function(){return C.apply(null,arguments)}},Ne.cloneElement=function(C,Z,oe){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var se=k({},C.props),fe=C.key,be=void 0;if(Z!=null)for(Te in Z.ref!==void 0&&(be=void 0),Z.key!==void 0&&(fe=""+Z.key),Z)!ve.call(Z,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&Z.ref===void 0||(se[Te]=Z[Te]);var Te=arguments.length-2;if(Te===1)se.children=oe;else if(1<Te){for(var tt=Array(Te),qe=0;qe<Te;qe++)tt[qe]=arguments[qe+2];se.children=tt}return V(C.type,fe,void 0,void 0,be,se)},Ne.createContext=function(C){return C={$$typeof:f,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:u,_context:C},C},Ne.createElement=function(C,Z,oe){var se,fe={},be=null;if(Z!=null)for(se in Z.key!==void 0&&(be=""+Z.key),Z)ve.call(Z,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(fe[se]=Z[se]);var Te=arguments.length-2;if(Te===1)fe.children=oe;else if(1<Te){for(var tt=Array(Te),qe=0;qe<Te;qe++)tt[qe]=arguments[qe+2];fe.children=tt}if(C&&C.defaultProps)for(se in Te=C.defaultProps,Te)fe[se]===void 0&&(fe[se]=Te[se]);return V(C,be,void 0,void 0,null,fe)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(C){return{$$typeof:m,render:C}},Ne.isValidElement=I,Ne.lazy=function(C){return{$$typeof:_,_payload:{_status:-1,_result:C},_init:W}},Ne.memo=function(C,Z){return{$$typeof:g,type:C,compare:Z===void 0?null:Z}},Ne.startTransition=function(C){var Z=he.T,oe={};he.T=oe;try{var se=C(),fe=he.S;fe!==null&&fe(oe,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(ue,z)}catch(be){z(be)}finally{he.T=Z}},Ne.unstable_useCacheRefresh=function(){return he.H.useCacheRefresh()},Ne.use=function(C){return he.H.use(C)},Ne.useActionState=function(C,Z,oe){return he.H.useActionState(C,Z,oe)},Ne.useCallback=function(C,Z){return he.H.useCallback(C,Z)},Ne.useContext=function(C){return he.H.useContext(C)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(C,Z){return he.H.useDeferredValue(C,Z)},Ne.useEffect=function(C,Z,oe){var se=he.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(C,Z)},Ne.useId=function(){return he.H.useId()},Ne.useImperativeHandle=function(C,Z,oe){return he.H.useImperativeHandle(C,Z,oe)},Ne.useInsertionEffect=function(C,Z){return he.H.useInsertionEffect(C,Z)},Ne.useLayoutEffect=function(C,Z){return he.H.useLayoutEffect(C,Z)},Ne.useMemo=function(C,Z){return he.H.useMemo(C,Z)},Ne.useOptimistic=function(C,Z){return he.H.useOptimistic(C,Z)},Ne.useReducer=function(C,Z,oe){return he.H.useReducer(C,Z,oe)},Ne.useRef=function(C){return he.H.useRef(C)},Ne.useState=function(C){return he.H.useState(C)},Ne.useSyncExternalStore=function(C,Z,oe){return he.H.useSyncExternalStore(C,Z,oe)},Ne.useTransition=function(){return he.H.useTransition()},Ne.version="19.1.0",Ne}var V_;function vp(){return V_||(V_=1,Tm.exports=rA()),Tm.exports}var L=vp();const P_=OE(L);var bm={exports:{}},Ll={},wm={exports:{}},Sm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function sA(){return U_||(U_=1,function(i){function e(j,W){var z=j.length;j.push(W);e:for(;0<z;){var ue=z-1>>>1,C=j[ue];if(0<o(C,W))j[ue]=W,j[z]=C,z=ue;else break e}}function n(j){return j.length===0?null:j[0]}function s(j){if(j.length===0)return null;var W=j[0],z=j.pop();if(z!==W){j[0]=z;e:for(var ue=0,C=j.length,Z=C>>>1;ue<Z;){var oe=2*(ue+1)-1,se=j[oe],fe=oe+1,be=j[fe];if(0>o(se,z))fe<C&&0>o(be,se)?(j[ue]=be,j[fe]=z,ue=fe):(j[ue]=se,j[oe]=z,ue=oe);else if(fe<C&&0>o(be,z))j[ue]=be,j[fe]=z,ue=fe;else break e}}return W}function o(j,W){var z=j.sortIndex-W.sortIndex;return z!==0?z:j.id-W.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var p=[],g=[],_=1,b=null,S=3,M=!1,k=!1,Y=!1,G=!1,$=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function pe(j){for(var W=n(g);W!==null;){if(W.callback===null)s(g);else if(W.startTime<=j)s(g),W.sortIndex=W.expirationTime,e(p,W);else break;W=n(g)}}function he(j){if(Y=!1,pe(j),!k)if(n(p)!==null)k=!0,ve||(ve=!0,P());else{var W=n(g);W!==null&&le(he,W.startTime-j)}}var ve=!1,V=-1,R=5,I=-1;function x(){return G?!0:!(i.unstable_now()-I<R)}function D(){if(G=!1,ve){var j=i.unstable_now();I=j;var W=!0;try{e:{k=!1,Y&&(Y=!1,ae(V),V=-1),M=!0;var z=S;try{t:{for(pe(j),b=n(p);b!==null&&!(b.expirationTime>j&&x());){var ue=b.callback;if(typeof ue=="function"){b.callback=null,S=b.priorityLevel;var C=ue(b.expirationTime<=j);if(j=i.unstable_now(),typeof C=="function"){b.callback=C,pe(j),W=!0;break t}b===n(p)&&s(p),pe(j)}else s(p);b=n(p)}if(b!==null)W=!0;else{var Z=n(g);Z!==null&&le(he,Z.startTime-j),W=!1}}break e}finally{b=null,S=z,M=!1}W=void 0}}finally{W?P():ve=!1}}}var P;if(typeof te=="function")P=function(){te(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ge=N.port2;N.port1.onmessage=D,P=function(){ge.postMessage(null)}}else P=function(){$(D,0)};function le(j,W){V=$(function(){j(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(j){switch(S){case 1:case 2:case 3:var W=3;break;default:W=S}var z=S;S=W;try{return j()}finally{S=z}},i.unstable_requestPaint=function(){G=!0},i.unstable_runWithPriority=function(j,W){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var z=S;S=j;try{return W()}finally{S=z}},i.unstable_scheduleCallback=function(j,W,z){var ue=i.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ue+z:ue):z=ue,j){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=z+C,j={id:_++,callback:W,priorityLevel:j,startTime:z,expirationTime:C,sortIndex:-1},z>ue?(j.sortIndex=z,e(g,j),n(p)===null&&j===n(g)&&(Y?(ae(V),V=-1):Y=!0,le(he,z-ue))):(j.sortIndex=C,e(p,j),k||M||(k=!0,ve||(ve=!0,P()))),j},i.unstable_shouldYield=x,i.unstable_wrapCallback=function(j){var W=S;return function(){var z=S;S=W;try{return j.apply(this,arguments)}finally{S=z}}}}(Sm)),Sm}var L_;function aA(){return L_||(L_=1,wm.exports=sA()),wm.exports}var Am={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j_;function oA(){if(j_)return en;j_=1;var i=vp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:p,containerInfo:g,implementation:_}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,en.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,_)},en.flushSync=function(p){var g=f.T,_=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=g,s.p=_,s.d.f()}},en.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},en.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},en.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,b=m(_,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,M=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:M}):_==="script"&&s.d.X(p,{crossOrigin:b,integrity:S,fetchPriority:M,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},en.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},en.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,b=m(_,g.crossOrigin);s.d.L(p,_,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},en.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},en.requestFormReset=function(p){s.d.r(p)},en.unstable_batchedUpdates=function(p,g){return p(g)},en.useFormState=function(p,g,_){return f.H.useFormState(p,g,_)},en.useFormStatus=function(){return f.H.useHostTransitionStatus()},en.version="19.1.0",en}var z_;function lA(){if(z_)return Am.exports;z_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Am.exports=oA(),Am.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function uA(){if(B_)return Ll;B_=1;var i=aA(),e=vp(),n=lA();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function f(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),t;if(d===l)return m(h),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var E=!1,T=h.child;T;){if(T===a){E=!0,a=h,l=d;break}if(T===l){E=!0,l=h,a=d;break}T=T.sibling}if(!E){for(T=d.child;T;){if(T===a){E=!0,a=d,l=h;break}if(T===l){E=!0,l=d,a=h;break}T=T.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function g(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=g(t),r!==null)return r;t=t.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),ae=Symbol.for("react.consumer"),te=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function ge(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case k:return"Fragment";case G:return"Profiler";case Y:return"StrictMode";case he:return"Suspense";case ve:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case M:return"Portal";case te:return(t.displayName||"Context")+".Provider";case ae:return(t._context.displayName||"Context")+".Consumer";case pe:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return r=t.displayName||null,r!==null?r:ge(t.type)||"Memo";case R:r=t._payload,t=t._init;try{return ge(t(r))}catch{}}return null}var le=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},ue=[],C=-1;function Z(t){return{current:t}}function oe(t){0>C||(t.current=ue[C],ue[C]=null,C--)}function se(t,r){C++,ue[C]=t.current,t.current=r}var fe=Z(null),be=Z(null),Te=Z(null),tt=Z(null);function qe(t,r){switch(se(Te,r),se(be,t),se(fe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?a_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=a_(r),t=o_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}oe(fe),se(fe,t)}function Mt(){oe(fe),oe(be),oe(Te)}function at(t){t.memoizedState!==null&&se(tt,t);var r=fe.current,a=o_(r,t.type);r!==a&&(se(be,t),se(fe,a))}function Vt(t){be.current===t&&(oe(fe),oe(be)),tt.current===t&&(oe(tt),Ol._currentValue=z)}var _n=Object.prototype.hasOwnProperty,Nn=i.unstable_scheduleCallback,fs=i.unstable_cancelCallback,Co=i.unstable_shouldYield,Ru=i.unstable_requestPaint,Dn=i.unstable_now,Ef=i.unstable_getCurrentPriorityLevel,No=i.unstable_ImmediatePriority,aa=i.unstable_UserBlockingPriority,ds=i.unstable_NormalPriority,Tf=i.unstable_LowPriority,oa=i.unstable_IdlePriority,Do=i.log,xu=i.unstable_setDisableYieldValue,ft=null,Ke=null;function En(t){if(typeof Do=="function"&&xu(t),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(ft,t)}catch{}}var Zt=Math.clz32?Math.clz32:ms,Iu=Math.log,bf=Math.LN2;function ms(t){return t>>>=0,t===0?32:31-(Iu(t)/bf|0)|0}var ps=256,gs=4194304;function $n(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function la(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=$n(l):(E&=T,E!==0?h=$n(E):a||(a=T&~t,a!==0&&(h=$n(a))))):(T=l&~d,T!==0?h=$n(T):E!==0?h=$n(E):a||(a=l&~t,a!==0&&(h=$n(a)))),h===0?0:r!==0&&r!==h&&(r&d)===0&&(d=h&-h,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:h}function ys(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Oo(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ko(){var t=ps;return ps<<=1,(ps&4194048)===0&&(ps=256),t}function Mo(){var t=gs;return gs<<=1,(gs&62914560)===0&&(gs=4194304),t}function xi(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Ii(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Vo(t,r,a,l,h,d){var E=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,O=t.expirationTimes,F=t.hiddenUpdates;for(a=E&~a;0<a;){var J=31-Zt(a),ne=1<<J;T[J]=0,O[J]=-1;var K=F[J];if(K!==null)for(F[J]=null,J=0;J<K.length;J++){var Q=K[J];Q!==null&&(Q.lane&=-536870913)}a&=~ne}l!==0&&ti(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(E&~r))}function ti(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Zt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Po(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Zt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function dr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ua(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function mr(){var t=W.p;return t!==0?t:(t=window.event,t===void 0?32:R_(t.type))}function Cu(t,r){var a=W.p;try{return W.p=t,r()}finally{W.p=a}}var rt=Math.random().toString(36).slice(2),xt="__reactFiber$"+rt,Et="__reactProps$"+rt,On="__reactContainer$"+rt,Uo="__reactEvents$"+rt,wf="__reactListeners$"+rt,pr="__reactHandles$"+rt,Nu="__reactResources$"+rt,vs="__reactMarker$"+rt;function gr(t){delete t[xt],delete t[Et],delete t[Uo],delete t[wf],delete t[pr]}function Ci(t){var r=t[xt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[On]||a[xt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=h_(t);t!==null;){if(a=t[xt])return a;t=h_(t)}return r}t=a,a=t.parentNode}return null}function ni(t){if(t=t[xt]||t[On]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function ii(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function on(t){var r=t[Nu];return r||(r=t[Nu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function pt(t){t[vs]=!0}var Lo=new Set,ca={};function Kn(t,r){Ni(t,r),Ni(t+"Capture",r)}function Ni(t,r){for(ca[t]=r,t=0;t<r.length;t++)Lo.add(r[t])}var Du=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ou={},_s={};function ku(t){return _n.call(_s,t)?!0:_n.call(Ou,t)?!1:Du.test(t)?_s[t]=!0:(Ou[t]=!0,!1)}function yr(t,r,a){if(ku(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function ri(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function qt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var Es,Mu;function Di(t){if(Es===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Es=r&&r[1]||"",Mu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Es+t+Mu}var ha=!1;function fa(t,r){if(!t||ha)return"";ha=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Q){var K=Q}Reflect.construct(t,[],ne)}else{try{ne.call()}catch(Q){K=Q}t.call(ne.prototype)}}else{try{throw Error()}catch(Q){K=Q}(ne=t())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),E=d[0],T=d[1];if(E&&T){var O=E.split(`
`),F=T.split(`
`);for(h=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;if(l===O.length||h===F.length)for(l=O.length-1,h=F.length-1;1<=l&&0<=h&&O[l]!==F[h];)h--;for(;1<=l&&0<=h;l--,h--)if(O[l]!==F[h]){if(l!==1||h!==1)do if(l--,h--,0>h||O[l]!==F[h]){var J=`
`+O[l].replace(" at new "," at ");return t.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",t.displayName)),J}while(1<=l&&0<=h);break}}}finally{ha=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Di(a):""}function jo(t){switch(t.tag){case 26:case 27:case 5:return Di(t.type);case 16:return Di("Lazy");case 13:return Di("Suspense");case 19:return Di("SuspenseList");case 0:case 15:return fa(t.type,!1);case 11:return fa(t.type.render,!1);case 1:return fa(t.type,!0);case 31:return Di("Activity");default:return""}}function da(t){try{var r="";do r+=jo(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function ln(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zo(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Sf(t){var r=zo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,d.call(this,E)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function ma(t){t._valueTracker||(t._valueTracker=Sf(t))}function Bo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=zo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Ts(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Af=/[\n"\\]/g;function Tt(t){return t.replace(Af,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Tn(t,r,a,l,h,d,E,T){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),r!=null?E==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+ln(r)):t.value!==""+ln(r)&&(t.value=""+ln(r)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),r!=null?vr(t,E,ln(r)):a!=null?vr(t,E,ln(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+ln(T):t.removeAttribute("name")}function bs(t,r,a,l,h,d,E,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null))return;a=a!=null?""+ln(a):"",r=r!=null?""+ln(r):a,T||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function vr(t,r,a){r==="number"&&Ts(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Oi(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+ln(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function Xe(t,r,a){if(r!=null&&(r=""+ln(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+ln(a):""}function ws(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(le(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=ln(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function kn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Ss=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vu(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Ss.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function qo(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&Vu(t,h,l)}else for(var d in r)r.hasOwnProperty(d)&&Vu(t,d,r[d])}function Ho(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pa(t){return xf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var ki=null;function Mn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mi=null,Vi=null;function Fo(t){var r=ni(t);if(r&&(t=r.stateNode)){var a=t[Et]||null;e:switch(t=r.stateNode,r.type){case"input":if(Tn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Tt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[Et]||null;if(!h)throw Error(s(90));Tn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Bo(l)}break e;case"textarea":Xe(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Oi(t,!!a.multiple,r,!1)}}}var si=!1;function Pu(t,r,a){if(si)return t(r,a);si=!0;try{var l=t(r);return l}finally{if(si=!1,(Mi!==null||Vi!==null)&&(Cc(),Mi&&(r=Mi,t=Vi,Vi=Mi=null,Fo(r),t)))for(r=0;r<t.length;r++)Fo(t[r])}}function As(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Et]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vn=!1;if(Qn)try{var Rs={};Object.defineProperty(Rs,"passive",{get:function(){Vn=!0}}),window.addEventListener("test",Rs,Rs),window.removeEventListener("test",Rs,Rs)}catch{Vn=!1}var ai=null,_r=null,Pi=null;function Go(){if(Pi)return Pi;var t,r=_r,a=r.length,l,h="value"in ai?ai.value:ai.textContent,d=h.length;for(t=0;t<a&&r[t]===h[t];t++);var E=a-t;for(l=1;l<=E&&r[a-l]===h[d-l];l++);return Pi=h.slice(t,1<l?1-l:void 0)}function oi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function li(){return!0}function $o(){return!1}function Pt(t){function r(a,l,h,d,E){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=E,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?li:$o,this.isPropagationStopped=$o,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=li)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=li)},persist:function(){},isPersistent:li}),r}var Ge={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ga=Pt(Ge),xs=_({},Ge,{view:0,detail:0}),Uu=Pt(xs),ya,va,ui,Is=_({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ds,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ui&&(ui&&t.type==="mousemove"?(ya=t.screenX-ui.screenX,va=t.screenY-ui.screenY):va=ya=0,ui=t),ya)},movementY:function(t){return"movementY"in t?t.movementY:va}}),Pn=Pt(Is),Lu=_({},Is,{dataTransfer:0}),If=Pt(Lu),Cs=_({},xs,{relatedTarget:0}),_a=Pt(Cs),Ko=_({},Ge,{animationName:0,elapsedTime:0,pseudoElement:0}),Ea=Pt(Ko),ju=_({},Ge,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ta=Pt(ju),Cf=_({},Ge,{data:0}),Qo=Pt(Cf),Ns={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yo(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Bu[t])?!!r[t]:!1}function Ds(){return Yo}var qu=_({},xs,{key:function(t){if(t.key){var r=Ns[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=oi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ds,charCode:function(t){return t.type==="keypress"?oi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?oi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ba=Pt(qu),Hu=_({},Is,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xo=Pt(Hu),Ui=_({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ds}),Fu=Pt(Ui),Gu=_({},Ge,{propertyName:0,elapsedTime:0,pseudoElement:0}),$u=Pt(Gu),Ku=_({},Is,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wa=Pt(Ku),un=_({},Ge,{newState:0,oldState:0}),Qu=Pt(un),Yu=[9,13,27,32],ci=Qn&&"CompositionEvent"in window,c=null;Qn&&"documentMode"in document&&(c=document.documentMode);var y=Qn&&"TextEvent"in window&&!c,v=Qn&&(!ci||c&&8<c&&11>=c),w=" ",q=!1;function X(t,r){switch(t){case"keyup":return Yu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Le=!1;function It(t,r){switch(t){case"compositionend":return ce(r);case"keypress":return r.which!==32?null:(q=!0,w);case"textInput":return t=r.data,t===w&&q?null:t;default:return null}}function je(t,r){if(Le)return t==="compositionend"||!ci&&X(t,r)?(t=Go(),Pi=_r=ai=null,Le=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return v&&r.locale!=="ko"?null:r.data;default:return null}}var Ut={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ct(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Ut[t.type]:r==="textarea"}function Li(t,r,a,l){Mi?Vi?Vi.push(l):Vi=[l]:Mi=l,r=Vc(r,"onChange"),0<r.length&&(a=new ga("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Ht=null,hi=null;function Wo(t){t_(t,0)}function Xu(t){var r=ii(t);if(Bo(r))return t}function bg(t,r){if(t==="change")return r}var wg=!1;if(Qn){var Nf;if(Qn){var Df="oninput"in document;if(!Df){var Sg=document.createElement("div");Sg.setAttribute("oninput","return;"),Df=typeof Sg.oninput=="function"}Nf=Df}else Nf=!1;wg=Nf&&(!document.documentMode||9<document.documentMode)}function Ag(){Ht&&(Ht.detachEvent("onpropertychange",Rg),hi=Ht=null)}function Rg(t){if(t.propertyName==="value"&&Xu(hi)){var r=[];Li(r,hi,t,Mn(t)),Pu(Wo,r)}}function Ow(t,r,a){t==="focusin"?(Ag(),Ht=r,hi=a,Ht.attachEvent("onpropertychange",Rg)):t==="focusout"&&Ag()}function kw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xu(hi)}function Mw(t,r){if(t==="click")return Xu(r)}function Vw(t,r){if(t==="input"||t==="change")return Xu(r)}function Pw(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var bn=typeof Object.is=="function"?Object.is:Pw;function Zo(t,r){if(bn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!_n.call(r,h)||!bn(t[h],r[h]))return!1}return!0}function xg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ig(t,r){var a=xg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=xg(a)}}function Cg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Cg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ng(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Ts(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Ts(t.document)}return r}function Of(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var Uw=Qn&&"documentMode"in document&&11>=document.documentMode,Sa=null,kf=null,Jo=null,Mf=!1;function Dg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Mf||Sa==null||Sa!==Ts(l)||(l=Sa,"selectionStart"in l&&Of(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Jo&&Zo(Jo,l)||(Jo=l,l=Vc(kf,"onSelect"),0<l.length&&(r=new ga("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Sa)))}function Os(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Aa={animationend:Os("Animation","AnimationEnd"),animationiteration:Os("Animation","AnimationIteration"),animationstart:Os("Animation","AnimationStart"),transitionrun:Os("Transition","TransitionRun"),transitionstart:Os("Transition","TransitionStart"),transitioncancel:Os("Transition","TransitionCancel"),transitionend:Os("Transition","TransitionEnd")},Vf={},Og={};Qn&&(Og=document.createElement("div").style,"AnimationEvent"in window||(delete Aa.animationend.animation,delete Aa.animationiteration.animation,delete Aa.animationstart.animation),"TransitionEvent"in window||delete Aa.transitionend.transition);function ks(t){if(Vf[t])return Vf[t];if(!Aa[t])return t;var r=Aa[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Og)return Vf[t]=r[a];return t}var kg=ks("animationend"),Mg=ks("animationiteration"),Vg=ks("animationstart"),Lw=ks("transitionrun"),jw=ks("transitionstart"),zw=ks("transitioncancel"),Pg=ks("transitionend"),Ug=new Map,Pf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pf.push("scrollEnd");function Yn(t,r){Ug.set(t,r),Kn(r,[t])}var Lg=new WeakMap;function Un(t,r){if(typeof t=="object"&&t!==null){var a=Lg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:da(r)},Lg.set(t,r),r)}return{value:t,source:r,stack:da(r)}}var Ln=[],Ra=0,Uf=0;function Wu(){for(var t=Ra,r=Uf=Ra=0;r<t;){var a=Ln[r];Ln[r++]=null;var l=Ln[r];Ln[r++]=null;var h=Ln[r];Ln[r++]=null;var d=Ln[r];if(Ln[r++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}d!==0&&jg(a,h,d)}}function Zu(t,r,a,l){Ln[Ra++]=t,Ln[Ra++]=r,Ln[Ra++]=a,Ln[Ra++]=l,Uf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Lf(t,r,a,l){return Zu(t,r,a,l),Ju(t)}function xa(t,r){return Zu(t,null,null,r),Ju(t)}function jg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&r!==null&&(h=31-Zt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),d):null}function Ju(t){if(50<Sl)throw Sl=0,Fd=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ia={};function Bw(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,r,a,l){return new Bw(t,r,a,l)}function jf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ji(t,r){var a=t.alternate;return a===null?(a=wn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function zg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function ec(t,r,a,l,h,d){var E=0;if(l=t,typeof t=="function")jf(t)&&(E=1);else if(typeof t=="string")E=HS(t,a,fe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=wn(31,a,r,h),t.elementType=I,t.lanes=d,t;case k:return Ms(a.children,h,d,r);case Y:E=8,h|=24;break;case G:return t=wn(12,a,r,h|2),t.elementType=G,t.lanes=d,t;case he:return t=wn(13,a,r,h),t.elementType=he,t.lanes=d,t;case ve:return t=wn(19,a,r,h),t.elementType=ve,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $:case te:E=10;break e;case ae:E=9;break e;case pe:E=11;break e;case V:E=14;break e;case R:E=16,l=null;break e}E=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=wn(E,a,r,h),r.elementType=t,r.type=l,r.lanes=d,r}function Ms(t,r,a,l){return t=wn(7,t,l,r),t.lanes=a,t}function zf(t,r,a){return t=wn(6,t,null,r),t.lanes=a,t}function Bf(t,r,a){return r=wn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Ca=[],Na=0,tc=null,nc=0,jn=[],zn=0,Vs=null,zi=1,Bi="";function Ps(t,r){Ca[Na++]=nc,Ca[Na++]=tc,tc=t,nc=r}function Bg(t,r,a){jn[zn++]=zi,jn[zn++]=Bi,jn[zn++]=Vs,Vs=t;var l=zi;t=Bi;var h=32-Zt(l)-1;l&=~(1<<h),a+=1;var d=32-Zt(r)+h;if(30<d){var E=h-h%5;d=(l&(1<<E)-1).toString(32),l>>=E,h-=E,zi=1<<32-Zt(r)+h|a<<h|l,Bi=d+t}else zi=1<<d|a<<h|l,Bi=t}function qf(t){t.return!==null&&(Ps(t,1),Bg(t,1,0))}function Hf(t){for(;t===tc;)tc=Ca[--Na],Ca[Na]=null,nc=Ca[--Na],Ca[Na]=null;for(;t===Vs;)Vs=jn[--zn],jn[zn]=null,Bi=jn[--zn],jn[zn]=null,zi=jn[--zn],jn[zn]=null}var cn=null,dt=null,Fe=!1,Us=null,fi=!1,Ff=Error(s(519));function Ls(t){var r=Error(s(418,""));throw nl(Un(r,t)),Ff}function qg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[xt]=t,r[Et]=l,a){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(a=0;a<Rl.length;a++)Ve(Rl[a],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":Ve("invalid",r),bs(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ma(r);break;case"select":Ve("invalid",r);break;case"textarea":Ve("invalid",r),ws(r,l.value,l.defaultValue,l.children),ma(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||s_(r.textContent,a)?(l.popover!=null&&(Ve("beforetoggle",r),Ve("toggle",r)),l.onScroll!=null&&Ve("scroll",r),l.onScrollEnd!=null&&Ve("scrollend",r),l.onClick!=null&&(r.onclick=Pc),r=!0):r=!1,r||Ls(t)}function Hg(t){for(cn=t.return;cn;)switch(cn.tag){case 5:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:cn=cn.return}}function el(t){if(t!==cn)return!1;if(!Fe)return Hg(t),Fe=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||am(t.type,t.memoizedProps)),a=!a),a&&dt&&Ls(t),Hg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){dt=Wn(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}dt=null}}else r===27?(r=dt,Vr(t.type)?(t=cm,cm=null,dt=t):dt=r):dt=cn?Wn(t.stateNode.nextSibling):null;return!0}function tl(){dt=cn=null,Fe=!1}function Fg(){var t=Us;return t!==null&&(pn===null?pn=t:pn.push.apply(pn,t),Us=null),t}function nl(t){Us===null?Us=[t]:Us.push(t)}var Gf=Z(null),js=null,qi=null;function Er(t,r,a){se(Gf,r._currentValue),r._currentValue=a}function Hi(t){t._currentValue=Gf.current,oe(Gf)}function $f(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Kf(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var E=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var O=0;O<r.length;O++)if(T.context===r[O]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),$f(d.return,a,t),l||(E=null);break e}d=T.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(s(341));E.lanes|=a,d=E.alternate,d!==null&&(d.lanes|=a),$f(E,a,t),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===t){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function il(t,r,a,l){t=null;for(var h=r,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var T=h.type;bn(h.pendingProps.value,E.value)||(t!==null?t.push(T):t=[T])}}else if(h===tt.current){if(E=h.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Ol):t=[Ol])}h=h.return}t!==null&&Kf(r,t,a,l),r.flags|=262144}function ic(t){for(t=t.firstContext;t!==null;){if(!bn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function zs(t){js=t,qi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Jt(t){return Gg(js,t)}function rc(t,r){return js===null&&zs(t),Gg(t,r)}function Gg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},qi===null){if(t===null)throw Error(s(308));qi=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else qi=qi.next=r;return a}var qw=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},Hw=i.unstable_scheduleCallback,Fw=i.unstable_NormalPriority,Nt={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qf(){return{controller:new qw,data:new Map,refCount:0}}function rl(t){t.refCount--,t.refCount===0&&Hw(Fw,function(){t.controller.abort()})}var sl=null,Yf=0,Da=0,Oa=null;function Gw(t,r){if(sl===null){var a=sl=[];Yf=0,Da=Wd(),Oa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Yf++,r.then($g,$g),r}function $g(){if(--Yf===0&&sl!==null){Oa!==null&&(Oa.status="fulfilled");var t=sl;sl=null,Da=0,Oa=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function $w(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Kg=j.S;j.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Gw(t,r),Kg!==null&&Kg(t,r)};var Bs=Z(null);function Xf(){var t=Bs.current;return t!==null?t:nt.pooledCache}function sc(t,r){r===null?se(Bs,Bs.current):se(Bs,r.pool)}function Qg(){var t=Xf();return t===null?null:{parent:Nt._currentValue,pool:t}}var al=Error(s(460)),Yg=Error(s(474)),ac=Error(s(542)),Wf={then:function(){}};function Xg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function oc(){}function Wg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(oc,oc),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Jg(t),t;default:if(typeof r.status=="string")r.then(oc,oc);else{if(t=nt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Jg(t),t}throw ol=r,al}}var ol=null;function Zg(){if(ol===null)throw Error(s(459));var t=ol;return ol=null,t}function Jg(t){if(t===al||t===ac)throw Error(s(483))}var Tr=!1;function Zf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function br(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function wr(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Qe&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=Ju(t),jg(t,null,a),r}return Zu(t,l,r,a),Ju(t)}function ll(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Po(t,a)}}function ed(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=E:d=d.next=E,a=a.next}while(a!==null);d===null?h=d=r:d=d.next=r}else h=d=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var td=!1;function ul(){if(td){var t=Oa;if(t!==null)throw t}}function cl(t,r,a,l){td=!1;var h=t.updateQueue;Tr=!1;var d=h.firstBaseUpdate,E=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var O=T,F=O.next;O.next=null,E===null?d=F:E.next=F,E=O;var J=t.alternate;J!==null&&(J=J.updateQueue,T=J.lastBaseUpdate,T!==E&&(T===null?J.firstBaseUpdate=F:T.next=F,J.lastBaseUpdate=O))}if(d!==null){var ne=h.baseState;E=0,J=F=O=null,T=d;do{var K=T.lane&-536870913,Q=K!==T.lane;if(Q?(ze&K)===K:(l&K)===K){K!==0&&K===Da&&(td=!0),J!==null&&(J=J.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Re=t,we=T;K=r;var Je=a;switch(we.tag){case 1:if(Re=we.payload,typeof Re=="function"){ne=Re.call(Je,ne,K);break e}ne=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=we.payload,K=typeof Re=="function"?Re.call(Je,ne,K):Re,K==null)break e;ne=_({},ne,K);break e;case 2:Tr=!0}}K=T.callback,K!==null&&(t.flags|=64,Q&&(t.flags|=8192),Q=h.callbacks,Q===null?h.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:T.tag,payload:T.payload,callback:T.callback,next:null},J===null?(F=J=Q,O=ne):J=J.next=Q,E|=K;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;Q=T,T=Q.next,Q.next=null,h.lastBaseUpdate=Q,h.shared.pending=null}}while(!0);J===null&&(O=ne),h.baseState=O,h.firstBaseUpdate=F,h.lastBaseUpdate=J,d===null&&(h.shared.lanes=0),Dr|=E,t.lanes=E,t.memoizedState=ne}}function ey(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function ty(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)ey(a[t],r)}var ka=Z(null),lc=Z(0);function ny(t,r){t=Xi,se(lc,t),se(ka,r),Xi=t|r.baseLanes}function nd(){se(lc,Xi),se(ka,ka.current)}function id(){Xi=lc.current,oe(ka),oe(lc)}var Sr=0,De=null,We=null,bt=null,uc=!1,Ma=!1,qs=!1,cc=0,hl=0,Va=null,Kw=0;function gt(){throw Error(s(321))}function rd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!bn(t[a],r[a]))return!1;return!0}function sd(t,r,a,l,h,d){return Sr=d,De=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,j.H=t===null||t.memoizedState===null?jy:zy,qs=!1,d=a(l,h),qs=!1,Ma&&(d=ry(r,a,l,h)),iy(t),d}function iy(t){j.H=gc;var r=We!==null&&We.next!==null;if(Sr=0,bt=We=De=null,uc=!1,hl=0,Va=null,r)throw Error(s(300));t===null||Lt||(t=t.dependencies,t!==null&&ic(t)&&(Lt=!0))}function ry(t,r,a,l){De=t;var h=0;do{if(Ma&&(Va=null),hl=0,Ma=!1,25<=h)throw Error(s(301));if(h+=1,bt=We=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}j.H=eS,d=r(a,l)}while(Ma);return d}function Qw(){var t=j.H,r=t.useState()[0];return r=typeof r.then=="function"?fl(r):r,t=t.useState()[0],(We!==null?We.memoizedState:null)!==t&&(De.flags|=1024),r}function ad(){var t=cc!==0;return cc=0,t}function od(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function ld(t){if(uc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}uc=!1}Sr=0,bt=We=De=null,Ma=!1,hl=cc=0,Va=null}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?De.memoizedState=bt=t:bt=bt.next=t,bt}function wt(){if(We===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var r=bt===null?De.memoizedState:bt.next;if(r!==null)bt=r,We=t;else{if(t===null)throw De.alternate===null?Error(s(467)):Error(s(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},bt===null?De.memoizedState=bt=t:bt=bt.next=t}return bt}function ud(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fl(t){var r=hl;return hl+=1,Va===null&&(Va=[]),t=Wg(Va,t,r),r=De,(bt===null?r.memoizedState:bt.next)===null&&(r=r.alternate,j.H=r===null||r.memoizedState===null?jy:zy),t}function hc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return fl(t);if(t.$$typeof===te)return Jt(t)}throw Error(s(438,String(t)))}function cd(t){var r=null,a=De.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=De.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=ud(),De.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=x;return r.index++,a}function Fi(t,r){return typeof r=="function"?r(t):r}function fc(t){var r=wt();return hd(r,We,t)}function hd(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var E=h.next;h.next=d.next,d.next=E}r.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{r=h.next;var T=E=null,O=null,F=r,J=!1;do{var ne=F.lane&-536870913;if(ne!==F.lane?(ze&ne)===ne:(Sr&ne)===ne){var K=F.revertLane;if(K===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ne===Da&&(J=!0);else if((Sr&K)===K){F=F.next,K===Da&&(J=!0);continue}else ne={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(T=O=ne,E=d):O=O.next=ne,De.lanes|=K,Dr|=K;ne=F.action,qs&&a(d,ne),d=F.hasEagerState?F.eagerState:a(d,ne)}else K={lane:ne,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(T=O=K,E=d):O=O.next=K,De.lanes|=ne,Dr|=ne;F=F.next}while(F!==null&&F!==r);if(O===null?E=d:O.next=T,!bn(d,t.memoizedState)&&(Lt=!0,J&&(a=Oa,a!==null)))throw a;t.memoizedState=d,t.baseState=E,t.baseQueue=O,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function fd(t){var r=wt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=r.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do d=t(d,E.action),E=E.next;while(E!==h);bn(d,r.memoizedState)||(Lt=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function sy(t,r,a){var l=De,h=wt(),d=Fe;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var E=!bn((We||h).memoizedState,a);E&&(h.memoizedState=a,Lt=!0),h=h.queue;var T=ly.bind(null,l,h,t);if(dl(2048,8,T,[t]),h.getSnapshot!==r||E||bt!==null&&bt.memoizedState.tag&1){if(l.flags|=2048,Pa(9,dc(),oy.bind(null,l,h,a,r),null),nt===null)throw Error(s(349));d||(Sr&124)!==0||ay(l,r,a)}return a}function ay(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=De.updateQueue,r===null?(r=ud(),De.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function oy(t,r,a,l){r.value=a,r.getSnapshot=l,uy(r)&&cy(t)}function ly(t,r,a){return a(function(){uy(r)&&cy(t)})}function uy(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!bn(t,a)}catch{return!0}}function cy(t){var r=xa(t,2);r!==null&&In(r,t,2)}function dd(t){var r=dn();if(typeof t=="function"){var a=t;if(t=a(),qs){En(!0);try{a()}finally{En(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:t},r}function hy(t,r,a,l){return t.baseState=a,hd(t,We,typeof l=="function"?l:Fi)}function Yw(t,r,a,l,h){if(pc(t))throw Error(s(485));if(t=r.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){d.listeners.push(E)}};j.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,fy(r,d)):(d.next=a.next,r.pending=a.next=d)}}function fy(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var d=j.T,E={};j.T=E;try{var T=a(h,l),O=j.S;O!==null&&O(E,T),dy(t,r,T)}catch(F){md(t,r,F)}finally{j.T=d}}else try{d=a(h,l),dy(t,r,d)}catch(F){md(t,r,F)}}function dy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){my(t,r,l)},function(l){return md(t,r,l)}):my(t,r,a)}function my(t,r,a){r.status="fulfilled",r.value=a,py(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,fy(t,a)))}function md(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,py(r),r=r.next;while(r!==l)}t.action=null}function py(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function gy(t,r){return r}function yy(t,r){if(Fe){var a=nt.formState;if(a!==null){e:{var l=De;if(Fe){if(dt){t:{for(var h=dt,d=fi;h.nodeType!==8;){if(!d){h=null;break t}if(h=Wn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){dt=Wn(h.nextSibling),l=h.data==="F!";break e}}Ls(l)}l=!1}l&&(r=a[0])}}return a=dn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gy,lastRenderedState:r},a.queue=l,a=Py.bind(null,De,l),l.dispatch=a,l=dd(!1),d=_d.bind(null,De,!1,l.queue),l=dn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=Yw.bind(null,De,h,d,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function vy(t){var r=wt();return _y(r,We,t)}function _y(t,r,a){if(r=hd(t,r,gy)[0],t=fc(Fi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=fl(r)}catch(E){throw E===al?ac:E}else l=r;r=wt();var h=r.queue,d=h.dispatch;return a!==r.memoizedState&&(De.flags|=2048,Pa(9,dc(),Xw.bind(null,h,a),null)),[l,d,t]}function Xw(t,r){t.action=r}function Ey(t){var r=wt(),a=We;if(a!==null)return _y(r,a,t);wt(),r=r.memoizedState,a=wt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Pa(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=De.updateQueue,r===null&&(r=ud(),De.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function dc(){return{destroy:void 0,resource:void 0}}function Ty(){return wt().memoizedState}function mc(t,r,a,l){var h=dn();l=l===void 0?null:l,De.flags|=t,h.memoizedState=Pa(1|r,dc(),a,l)}function dl(t,r,a,l){var h=wt();l=l===void 0?null:l;var d=h.memoizedState.inst;We!==null&&l!==null&&rd(l,We.memoizedState.deps)?h.memoizedState=Pa(r,d,a,l):(De.flags|=t,h.memoizedState=Pa(1|r,d,a,l))}function by(t,r){mc(8390656,8,t,r)}function wy(t,r){dl(2048,8,t,r)}function Sy(t,r){return dl(4,2,t,r)}function Ay(t,r){return dl(4,4,t,r)}function Ry(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function xy(t,r,a){a=a!=null?a.concat([t]):null,dl(4,4,Ry.bind(null,r,t),a)}function pd(){}function Iy(t,r){var a=wt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&rd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Cy(t,r){var a=wt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&rd(r,l[1]))return l[0];if(l=t(),qs){En(!0);try{t()}finally{En(!1)}}return a.memoizedState=[l,r],l}function gd(t,r,a){return a===void 0||(Sr&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=Ov(),De.lanes|=t,Dr|=t,a)}function Ny(t,r,a,l){return bn(a,r)?a:ka.current!==null?(t=gd(t,a,l),bn(t,r)||(Lt=!0),t):(Sr&42)===0?(Lt=!0,t.memoizedState=a):(t=Ov(),De.lanes|=t,Dr|=t,r)}function Dy(t,r,a,l,h){var d=W.p;W.p=d!==0&&8>d?d:8;var E=j.T,T={};j.T=T,_d(t,!1,r,a);try{var O=h(),F=j.S;if(F!==null&&F(T,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var J=$w(O,l);ml(t,r,J,xn(t))}else ml(t,r,l,xn(t))}catch(ne){ml(t,r,{then:function(){},status:"rejected",reason:ne},xn())}finally{W.p=d,j.T=E}}function Ww(){}function yd(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=Oy(t).queue;Dy(t,h,r,z,a===null?Ww:function(){return ky(t),a(l)})}function Oy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:z},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function ky(t){var r=Oy(t).next.queue;ml(t,r,{},xn())}function vd(){return Jt(Ol)}function My(){return wt().memoizedState}function Vy(){return wt().memoizedState}function Zw(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=xn();t=br(a);var l=wr(r,t,a);l!==null&&(In(l,r,a),ll(l,r,a)),r={cache:Qf()},t.payload=r;return}r=r.return}}function Jw(t,r,a){var l=xn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},pc(t)?Uy(r,a):(a=Lf(t,r,a,l),a!==null&&(In(a,t,l),Ly(a,r,l)))}function Py(t,r,a){var l=xn();ml(t,r,a,l)}function ml(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(pc(t))Uy(r,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var E=r.lastRenderedState,T=d(E,a);if(h.hasEagerState=!0,h.eagerState=T,bn(T,E))return Zu(t,r,h,0),nt===null&&Wu(),!1}catch{}finally{}if(a=Lf(t,r,h,l),a!==null)return In(a,t,l),Ly(a,r,l),!0}return!1}function _d(t,r,a,l){if(l={lane:2,revertLane:Wd(),action:l,hasEagerState:!1,eagerState:null,next:null},pc(t)){if(r)throw Error(s(479))}else r=Lf(t,a,l,2),r!==null&&In(r,t,2)}function pc(t){var r=t.alternate;return t===De||r!==null&&r===De}function Uy(t,r){Ma=uc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Ly(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Po(t,a)}}var gc={readContext:Jt,use:hc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt},jy={readContext:Jt,use:hc,useCallback:function(t,r){return dn().memoizedState=[t,r===void 0?null:r],t},useContext:Jt,useEffect:by,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,mc(4194308,4,Ry.bind(null,r,t),a)},useLayoutEffect:function(t,r){return mc(4194308,4,t,r)},useInsertionEffect:function(t,r){mc(4,2,t,r)},useMemo:function(t,r){var a=dn();r=r===void 0?null:r;var l=t();if(qs){En(!0);try{t()}finally{En(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=dn();if(a!==void 0){var h=a(r);if(qs){En(!0);try{a(r)}finally{En(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=Jw.bind(null,De,t),[l.memoizedState,t]},useRef:function(t){var r=dn();return t={current:t},r.memoizedState=t},useState:function(t){t=dd(t);var r=t.queue,a=Py.bind(null,De,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:pd,useDeferredValue:function(t,r){var a=dn();return gd(a,t,r)},useTransition:function(){var t=dd(!1);return t=Dy.bind(null,De,t.queue,!0,!1),dn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=De,h=dn();if(Fe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),nt===null)throw Error(s(349));(ze&124)!==0||ay(l,r,a)}h.memoizedState=a;var d={value:a,getSnapshot:r};return h.queue=d,by(ly.bind(null,l,d,t),[t]),l.flags|=2048,Pa(9,dc(),oy.bind(null,l,d,a,r),null),a},useId:function(){var t=dn(),r=nt.identifierPrefix;if(Fe){var a=Bi,l=zi;a=(l&~(1<<32-Zt(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=cc++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=Kw++,r="«"+r+"r"+a.toString(32)+"»";return t.memoizedState=r},useHostTransitionStatus:vd,useFormState:yy,useActionState:yy,useOptimistic:function(t){var r=dn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=_d.bind(null,De,!0,a),a.dispatch=r,[t,r]},useMemoCache:cd,useCacheRefresh:function(){return dn().memoizedState=Zw.bind(null,De)}},zy={readContext:Jt,use:hc,useCallback:Iy,useContext:Jt,useEffect:wy,useImperativeHandle:xy,useInsertionEffect:Sy,useLayoutEffect:Ay,useMemo:Cy,useReducer:fc,useRef:Ty,useState:function(){return fc(Fi)},useDebugValue:pd,useDeferredValue:function(t,r){var a=wt();return Ny(a,We.memoizedState,t,r)},useTransition:function(){var t=fc(Fi)[0],r=wt().memoizedState;return[typeof t=="boolean"?t:fl(t),r]},useSyncExternalStore:sy,useId:My,useHostTransitionStatus:vd,useFormState:vy,useActionState:vy,useOptimistic:function(t,r){var a=wt();return hy(a,We,t,r)},useMemoCache:cd,useCacheRefresh:Vy},eS={readContext:Jt,use:hc,useCallback:Iy,useContext:Jt,useEffect:wy,useImperativeHandle:xy,useInsertionEffect:Sy,useLayoutEffect:Ay,useMemo:Cy,useReducer:fd,useRef:Ty,useState:function(){return fd(Fi)},useDebugValue:pd,useDeferredValue:function(t,r){var a=wt();return We===null?gd(a,t,r):Ny(a,We.memoizedState,t,r)},useTransition:function(){var t=fd(Fi)[0],r=wt().memoizedState;return[typeof t=="boolean"?t:fl(t),r]},useSyncExternalStore:sy,useId:My,useHostTransitionStatus:vd,useFormState:Ey,useActionState:Ey,useOptimistic:function(t,r){var a=wt();return We!==null?hy(a,We,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:cd,useCacheRefresh:Vy},Ua=null,pl=0;function yc(t){var r=pl;return pl+=1,Ua===null&&(Ua=[]),Wg(Ua,t,r)}function gl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function vc(t,r){throw r.$$typeof===b?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function By(t){var r=t._init;return r(t._payload)}function qy(t){function r(B,U){if(t){var H=B.deletions;H===null?(B.deletions=[U],B.flags|=16):H.push(U)}}function a(B,U){if(!t)return null;for(;U!==null;)r(B,U),U=U.sibling;return null}function l(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function h(B,U){return B=ji(B,U),B.index=0,B.sibling=null,B}function d(B,U,H){return B.index=H,t?(H=B.alternate,H!==null?(H=H.index,H<U?(B.flags|=67108866,U):H):(B.flags|=67108866,U)):(B.flags|=1048576,U)}function E(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function T(B,U,H,ee){return U===null||U.tag!==6?(U=zf(H,B.mode,ee),U.return=B,U):(U=h(U,H),U.return=B,U)}function O(B,U,H,ee){var ye=H.type;return ye===k?J(B,U,H.props.children,ee,H.key):U!==null&&(U.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===R&&By(ye)===U.type)?(U=h(U,H.props),gl(U,H),U.return=B,U):(U=ec(H.type,H.key,H.props,null,B.mode,ee),gl(U,H),U.return=B,U)}function F(B,U,H,ee){return U===null||U.tag!==4||U.stateNode.containerInfo!==H.containerInfo||U.stateNode.implementation!==H.implementation?(U=Bf(H,B.mode,ee),U.return=B,U):(U=h(U,H.children||[]),U.return=B,U)}function J(B,U,H,ee,ye){return U===null||U.tag!==7?(U=Ms(H,B.mode,ee,ye),U.return=B,U):(U=h(U,H),U.return=B,U)}function ne(B,U,H){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=zf(""+U,B.mode,H),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case S:return H=ec(U.type,U.key,U.props,null,B.mode,H),gl(H,U),H.return=B,H;case M:return U=Bf(U,B.mode,H),U.return=B,U;case R:var ee=U._init;return U=ee(U._payload),ne(B,U,H)}if(le(U)||P(U))return U=Ms(U,B.mode,H,null),U.return=B,U;if(typeof U.then=="function")return ne(B,yc(U),H);if(U.$$typeof===te)return ne(B,rc(B,U),H);vc(B,U)}return null}function K(B,U,H,ee){var ye=U!==null?U.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ye!==null?null:T(B,U,""+H,ee);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case S:return H.key===ye?O(B,U,H,ee):null;case M:return H.key===ye?F(B,U,H,ee):null;case R:return ye=H._init,H=ye(H._payload),K(B,U,H,ee)}if(le(H)||P(H))return ye!==null?null:J(B,U,H,ee,null);if(typeof H.then=="function")return K(B,U,yc(H),ee);if(H.$$typeof===te)return K(B,U,rc(B,H),ee);vc(B,H)}return null}function Q(B,U,H,ee,ye){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return B=B.get(H)||null,T(U,B,""+ee,ye);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case S:return B=B.get(ee.key===null?H:ee.key)||null,O(U,B,ee,ye);case M:return B=B.get(ee.key===null?H:ee.key)||null,F(U,B,ee,ye);case R:var ke=ee._init;return ee=ke(ee._payload),Q(B,U,H,ee,ye)}if(le(ee)||P(ee))return B=B.get(H)||null,J(U,B,ee,ye,null);if(typeof ee.then=="function")return Q(B,U,H,yc(ee),ye);if(ee.$$typeof===te)return Q(B,U,H,rc(U,ee),ye);vc(U,ee)}return null}function Re(B,U,H,ee){for(var ye=null,ke=null,_e=U,Se=U=0,zt=null;_e!==null&&Se<H.length;Se++){_e.index>Se?(zt=_e,_e=null):zt=_e.sibling;var He=K(B,_e,H[Se],ee);if(He===null){_e===null&&(_e=zt);break}t&&_e&&He.alternate===null&&r(B,_e),U=d(He,U,Se),ke===null?ye=He:ke.sibling=He,ke=He,_e=zt}if(Se===H.length)return a(B,_e),Fe&&Ps(B,Se),ye;if(_e===null){for(;Se<H.length;Se++)_e=ne(B,H[Se],ee),_e!==null&&(U=d(_e,U,Se),ke===null?ye=_e:ke.sibling=_e,ke=_e);return Fe&&Ps(B,Se),ye}for(_e=l(_e);Se<H.length;Se++)zt=Q(_e,B,Se,H[Se],ee),zt!==null&&(t&&zt.alternate!==null&&_e.delete(zt.key===null?Se:zt.key),U=d(zt,U,Se),ke===null?ye=zt:ke.sibling=zt,ke=zt);return t&&_e.forEach(function(zr){return r(B,zr)}),Fe&&Ps(B,Se),ye}function we(B,U,H,ee){if(H==null)throw Error(s(151));for(var ye=null,ke=null,_e=U,Se=U=0,zt=null,He=H.next();_e!==null&&!He.done;Se++,He=H.next()){_e.index>Se?(zt=_e,_e=null):zt=_e.sibling;var zr=K(B,_e,He.value,ee);if(zr===null){_e===null&&(_e=zt);break}t&&_e&&zr.alternate===null&&r(B,_e),U=d(zr,U,Se),ke===null?ye=zr:ke.sibling=zr,ke=zr,_e=zt}if(He.done)return a(B,_e),Fe&&Ps(B,Se),ye;if(_e===null){for(;!He.done;Se++,He=H.next())He=ne(B,He.value,ee),He!==null&&(U=d(He,U,Se),ke===null?ye=He:ke.sibling=He,ke=He);return Fe&&Ps(B,Se),ye}for(_e=l(_e);!He.done;Se++,He=H.next())He=Q(_e,B,Se,He.value,ee),He!==null&&(t&&He.alternate!==null&&_e.delete(He.key===null?Se:He.key),U=d(He,U,Se),ke===null?ye=He:ke.sibling=He,ke=He);return t&&_e.forEach(function(tA){return r(B,tA)}),Fe&&Ps(B,Se),ye}function Je(B,U,H,ee){if(typeof H=="object"&&H!==null&&H.type===k&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case S:e:{for(var ye=H.key;U!==null;){if(U.key===ye){if(ye=H.type,ye===k){if(U.tag===7){a(B,U.sibling),ee=h(U,H.props.children),ee.return=B,B=ee;break e}}else if(U.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===R&&By(ye)===U.type){a(B,U.sibling),ee=h(U,H.props),gl(ee,H),ee.return=B,B=ee;break e}a(B,U);break}else r(B,U);U=U.sibling}H.type===k?(ee=Ms(H.props.children,B.mode,ee,H.key),ee.return=B,B=ee):(ee=ec(H.type,H.key,H.props,null,B.mode,ee),gl(ee,H),ee.return=B,B=ee)}return E(B);case M:e:{for(ye=H.key;U!==null;){if(U.key===ye)if(U.tag===4&&U.stateNode.containerInfo===H.containerInfo&&U.stateNode.implementation===H.implementation){a(B,U.sibling),ee=h(U,H.children||[]),ee.return=B,B=ee;break e}else{a(B,U);break}else r(B,U);U=U.sibling}ee=Bf(H,B.mode,ee),ee.return=B,B=ee}return E(B);case R:return ye=H._init,H=ye(H._payload),Je(B,U,H,ee)}if(le(H))return Re(B,U,H,ee);if(P(H)){if(ye=P(H),typeof ye!="function")throw Error(s(150));return H=ye.call(H),we(B,U,H,ee)}if(typeof H.then=="function")return Je(B,U,yc(H),ee);if(H.$$typeof===te)return Je(B,U,rc(B,H),ee);vc(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,U!==null&&U.tag===6?(a(B,U.sibling),ee=h(U,H),ee.return=B,B=ee):(a(B,U),ee=zf(H,B.mode,ee),ee.return=B,B=ee),E(B)):a(B,U)}return function(B,U,H,ee){try{pl=0;var ye=Je(B,U,H,ee);return Ua=null,ye}catch(_e){if(_e===al||_e===ac)throw _e;var ke=wn(29,_e,null,B.mode);return ke.lanes=ee,ke.return=B,ke}finally{}}}var La=qy(!0),Hy=qy(!1),Bn=Z(null),di=null;function Ar(t){var r=t.alternate;se(Dt,Dt.current&1),se(Bn,t),di===null&&(r===null||ka.current!==null||r.memoizedState!==null)&&(di=t)}function Fy(t){if(t.tag===22){if(se(Dt,Dt.current),se(Bn,t),di===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(di=t)}}else Rr()}function Rr(){se(Dt,Dt.current),se(Bn,Bn.current)}function Gi(t){oe(Bn),di===t&&(di=null),oe(Dt)}var Dt=Z(0);function _c(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||um(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Ed(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:_({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Td={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=xn(),h=br(l);h.payload=r,a!=null&&(h.callback=a),r=wr(t,h,l),r!==null&&(In(r,t,l),ll(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=xn(),h=br(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=wr(t,h,l),r!==null&&(In(r,t,l),ll(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=xn(),l=br(a);l.tag=2,r!=null&&(l.callback=r),r=wr(t,l,a),r!==null&&(In(r,t,a),ll(r,t,a))}};function Gy(t,r,a,l,h,d,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,E):r.prototype&&r.prototype.isPureReactComponent?!Zo(a,l)||!Zo(h,d):!0}function $y(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&Td.enqueueReplaceState(r,r.state,null)}function Hs(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=_({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Ec=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Ky(t){Ec(t)}function Qy(t){console.error(t)}function Yy(t){Ec(t)}function Tc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Xy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function bd(t,r,a){return a=br(a),a.tag=3,a.payload={element:null},a.callback=function(){Tc(t,r)},a}function Wy(t){return t=br(t),t.tag=3,t}function Zy(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){Xy(r,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){Xy(r,a,l),typeof h!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function tS(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&il(r,a,h,!0),a=Bn.current,a!==null){switch(a.tag){case 13:return di===null?$d():a.alternate===null&&mt===0&&(mt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Wf?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Qd(t,l,h)),!1;case 22:return a.flags|=65536,l===Wf?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Qd(t,l,h)),!1}throw Error(s(435,a.tag))}return Qd(t,l,h),$d(),!1}if(Fe)return r=Bn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Ff&&(t=Error(s(422),{cause:l}),nl(Un(t,a)))):(l!==Ff&&(r=Error(s(423),{cause:l}),nl(Un(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Un(l,a),h=bd(t.stateNode,l,h),ed(t,h),mt!==4&&(mt=2)),!1;var d=Error(s(520),{cause:l});if(d=Un(d,a),wl===null?wl=[d]:wl.push(d),mt!==4&&(mt=2),r===null)return!0;l=Un(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=bd(a.stateNode,l,t),ed(a,t),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Or===null||!Or.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Wy(h),Zy(h,t,a,l),ed(a,h),!1}a=a.return}while(a!==null);return!1}var Jy=Error(s(461)),Lt=!1;function Ft(t,r,a,l){r.child=t===null?Hy(r,null,a,l):La(r,t.child,a,l)}function ev(t,r,a,l,h){a=a.render;var d=r.ref;if("ref"in l){var E={};for(var T in l)T!=="ref"&&(E[T]=l[T])}else E=l;return zs(r),l=sd(t,r,a,E,d,h),T=ad(),t!==null&&!Lt?(od(t,r,h),$i(t,r,h)):(Fe&&T&&qf(r),r.flags|=1,Ft(t,r,l,h),r.child)}function tv(t,r,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!jf(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,nv(t,r,d,l,h)):(t=ec(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(d=t.child,!Nd(t,h)){var E=d.memoizedProps;if(a=a.compare,a=a!==null?a:Zo,a(E,l)&&t.ref===r.ref)return $i(t,r,h)}return r.flags|=1,t=ji(d,l),t.ref=r.ref,t.return=r,r.child=t}function nv(t,r,a,l,h){if(t!==null){var d=t.memoizedProps;if(Zo(d,l)&&t.ref===r.ref)if(Lt=!1,r.pendingProps=l=d,Nd(t,h))(t.flags&131072)!==0&&(Lt=!0);else return r.lanes=t.lanes,$i(t,r,h)}return wd(t,r,a,l,h)}function iv(t,r,a){var l=r.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=r.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;r.childLanes=d&~l}else r.childLanes=0,r.child=null;return rv(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&sc(r,d!==null?d.cachePool:null),d!==null?ny(r,d):nd(),Fy(r);else return r.lanes=r.childLanes=536870912,rv(t,r,d!==null?d.baseLanes|a:a,a)}else d!==null?(sc(r,d.cachePool),ny(r,d),Rr(),r.memoizedState=null):(t!==null&&sc(r,null),nd(),Rr());return Ft(t,r,h,a),r.child}function rv(t,r,a,l){var h=Xf();return h=h===null?null:{parent:Nt._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&sc(r,null),nd(),Fy(r),t!==null&&il(t,r,l,!0),null}function bc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function wd(t,r,a,l,h){return zs(r),a=sd(t,r,a,l,void 0,h),l=ad(),t!==null&&!Lt?(od(t,r,h),$i(t,r,h)):(Fe&&l&&qf(r),r.flags|=1,Ft(t,r,a,h),r.child)}function sv(t,r,a,l,h,d){return zs(r),r.updateQueue=null,a=ry(r,l,a,h),iy(t),l=ad(),t!==null&&!Lt?(od(t,r,d),$i(t,r,d)):(Fe&&l&&qf(r),r.flags|=1,Ft(t,r,a,d),r.child)}function av(t,r,a,l,h){if(zs(r),r.stateNode===null){var d=Ia,E=a.contextType;typeof E=="object"&&E!==null&&(d=Jt(E)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Td,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},Zf(r),E=a.contextType,d.context=typeof E=="object"&&E!==null?Jt(E):Ia,d.state=r.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(Ed(r,a,E,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(E=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),E!==d.state&&Td.enqueueReplaceState(d,d.state,null),cl(r,l,d,h),ul(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){d=r.stateNode;var T=r.memoizedProps,O=Hs(a,T);d.props=O;var F=d.context,J=a.contextType;E=Ia,typeof J=="object"&&J!==null&&(E=Jt(J));var ne=a.getDerivedStateFromProps;J=typeof ne=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,J||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||F!==E)&&$y(r,d,l,E),Tr=!1;var K=r.memoizedState;d.state=K,cl(r,l,d,h),ul(),F=r.memoizedState,T||K!==F||Tr?(typeof ne=="function"&&(Ed(r,a,ne,l),F=r.memoizedState),(O=Tr||Gy(r,a,O,l,K,F,E))?(J||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=F),d.props=l,d.state=F,d.context=E,l=O):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,Jf(t,r),E=r.memoizedProps,J=Hs(a,E),d.props=J,ne=r.pendingProps,K=d.context,F=a.contextType,O=Ia,typeof F=="object"&&F!==null&&(O=Jt(F)),T=a.getDerivedStateFromProps,(F=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E!==ne||K!==O)&&$y(r,d,l,O),Tr=!1,K=r.memoizedState,d.state=K,cl(r,l,d,h),ul();var Q=r.memoizedState;E!==ne||K!==Q||Tr||t!==null&&t.dependencies!==null&&ic(t.dependencies)?(typeof T=="function"&&(Ed(r,a,T,l),Q=r.memoizedState),(J=Tr||Gy(r,a,J,l,K,Q,O)||t!==null&&t.dependencies!==null&&ic(t.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Q,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Q,O)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=Q),d.props=l,d.state=Q,d.context=O,l=J):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),l=!1)}return d=l,bc(t,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,t!==null&&l?(r.child=La(r,t.child,null,h),r.child=La(r,null,a,h)):Ft(t,r,a,h),r.memoizedState=d.state,t=r.child):t=$i(t,r,h),t}function ov(t,r,a,l){return tl(),r.flags|=256,Ft(t,r,a,l),r.child}var Sd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ad(t){return{baseLanes:t,cachePool:Qg()}}function Rd(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=qn),t}function lv(t,r,a){var l=r.pendingProps,h=!1,d=(r.flags&128)!==0,E;if((E=d)||(E=t!==null&&t.memoizedState===null?!1:(Dt.current&2)!==0),E&&(h=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,t===null){if(Fe){if(h?Ar(r):Rr(),Fe){var T=dt,O;if(O=T){e:{for(O=T,T=fi;O.nodeType!==8;){if(!T){T=null;break e}if(O=Wn(O.nextSibling),O===null){T=null;break e}}T=O}T!==null?(r.memoizedState={dehydrated:T,treeContext:Vs!==null?{id:zi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},O=wn(18,null,null,0),O.stateNode=T,O.return=r,r.child=O,cn=r,dt=null,O=!0):O=!1}O||Ls(r)}if(T=r.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return um(T)?r.lanes=32:r.lanes=536870912,null;Gi(r)}return T=l.children,l=l.fallback,h?(Rr(),h=r.mode,T=wc({mode:"hidden",children:T},h),l=Ms(l,h,a,null),T.return=r,l.return=r,T.sibling=l,r.child=T,h=r.child,h.memoizedState=Ad(a),h.childLanes=Rd(t,E,a),r.memoizedState=Sd,l):(Ar(r),xd(r,T))}if(O=t.memoizedState,O!==null&&(T=O.dehydrated,T!==null)){if(d)r.flags&256?(Ar(r),r.flags&=-257,r=Id(t,r,a)):r.memoizedState!==null?(Rr(),r.child=t.child,r.flags|=128,r=null):(Rr(),h=l.fallback,T=r.mode,l=wc({mode:"visible",children:l.children},T),h=Ms(h,T,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,La(r,t.child,null,a),l=r.child,l.memoizedState=Ad(a),l.childLanes=Rd(t,E,a),r.memoizedState=Sd,r=h);else if(Ar(r),um(T)){if(E=T.nextSibling&&T.nextSibling.dataset,E)var F=E.dgst;E=F,l=Error(s(419)),l.stack="",l.digest=E,nl({value:l,source:null,stack:null}),r=Id(t,r,a)}else if(Lt||il(t,r,a,!1),E=(a&t.childLanes)!==0,Lt||E){if(E=nt,E!==null&&(l=a&-a,l=(l&42)!==0?1:dr(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==O.retryLane))throw O.retryLane=l,xa(t,l),In(E,t,l),Jy;T.data==="$?"||$d(),r=Id(t,r,a)}else T.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=O.treeContext,dt=Wn(T.nextSibling),cn=r,Fe=!0,Us=null,fi=!1,t!==null&&(jn[zn++]=zi,jn[zn++]=Bi,jn[zn++]=Vs,zi=t.id,Bi=t.overflow,Vs=r),r=xd(r,l.children),r.flags|=4096);return r}return h?(Rr(),h=l.fallback,T=r.mode,O=t.child,F=O.sibling,l=ji(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,F!==null?h=ji(F,h):(h=Ms(h,T,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,T=t.child.memoizedState,T===null?T=Ad(a):(O=T.cachePool,O!==null?(F=Nt._currentValue,O=O.parent!==F?{parent:F,pool:F}:O):O=Qg(),T={baseLanes:T.baseLanes|a,cachePool:O}),h.memoizedState=T,h.childLanes=Rd(t,E,a),r.memoizedState=Sd,l):(Ar(r),a=t.child,t=a.sibling,a=ji(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(E=r.deletions,E===null?(r.deletions=[t],r.flags|=16):E.push(t)),r.child=a,r.memoizedState=null,a)}function xd(t,r){return r=wc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function wc(t,r){return t=wn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Id(t,r,a){return La(r,t.child,null,a),t=xd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function uv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),$f(t.return,r,a)}function Cd(t,r,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function cv(t,r,a){var l=r.pendingProps,h=l.revealOrder,d=l.tail;if(Ft(t,r,l.children,a),l=Dt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&uv(t,a,r);else if(t.tag===19)uv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(se(Dt,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&_c(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Cd(r,!1,h,a,d);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&_c(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Cd(r,!0,a,null,d);break;case"together":Cd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function $i(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Dr|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(il(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=ji(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=ji(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Nd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&ic(t)))}function nS(t,r,a){switch(r.tag){case 3:qe(r,r.stateNode.containerInfo),Er(r,Nt,t.memoizedState.cache),tl();break;case 27:case 5:at(r);break;case 4:qe(r,r.stateNode.containerInfo);break;case 10:Er(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Ar(r),r.flags|=128,null):(a&r.child.childLanes)!==0?lv(t,r,a):(Ar(r),t=$i(t,r,a),t!==null?t.sibling:null);Ar(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(il(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return cv(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),se(Dt,Dt.current),l)break;return null;case 22:case 23:return r.lanes=0,iv(t,r,a);case 24:Er(r,Nt,t.memoizedState.cache)}return $i(t,r,a)}function hv(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Lt=!0;else{if(!Nd(t,a)&&(r.flags&128)===0)return Lt=!1,nS(t,r,a);Lt=(t.flags&131072)!==0}else Lt=!1,Fe&&(r.flags&1048576)!==0&&Bg(r,nc,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")jf(l)?(t=Hs(l,t),r.tag=1,r=av(null,r,l,t,a)):(r.tag=0,r=wd(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===pe){r.tag=11,r=ev(null,r,l,t,a);break e}else if(h===V){r.tag=14,r=tv(null,r,l,t,a);break e}}throw r=ge(l)||l,Error(s(306,r,""))}}return r;case 0:return wd(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=Hs(l,r.pendingProps),av(t,r,l,h,a);case 3:e:{if(qe(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var d=r.memoizedState;h=d.element,Jf(t,r),cl(r,l,null,a);var E=r.memoizedState;if(l=E.cache,Er(r,Nt,l),l!==d.cache&&Kf(r,[Nt],a,!0),ul(),l=E.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=ov(t,r,l,a);break e}else if(l!==h){h=Un(Error(s(424)),r),nl(h),r=ov(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(dt=Wn(t.firstChild),cn=r,Fe=!0,Us=null,fi=!0,a=Hy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(tl(),l===h){r=$i(t,r,a);break e}Ft(t,r,l,a)}r=r.child}return r;case 26:return bc(t,r),t===null?(a=p_(r.type,null,r.pendingProps,null))?r.memoizedState=a:Fe||(a=r.type,t=r.pendingProps,l=Uc(Te.current).createElement(a),l[xt]=r,l[Et]=t,$t(l,a,t),pt(l),r.stateNode=l):r.memoizedState=p_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return at(r),t===null&&Fe&&(l=r.stateNode=f_(r.type,r.pendingProps,Te.current),cn=r,fi=!0,h=dt,Vr(r.type)?(cm=h,dt=Wn(l.firstChild)):dt=h),Ft(t,r,r.pendingProps.children,a),bc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Fe&&((h=l=dt)&&(l=NS(l,r.type,r.pendingProps,fi),l!==null?(r.stateNode=l,cn=r,dt=Wn(l.firstChild),fi=!1,h=!0):h=!1),h||Ls(r)),at(r),h=r.type,d=r.pendingProps,E=t!==null?t.memoizedProps:null,l=d.children,am(h,d)?l=null:E!==null&&am(h,E)&&(r.flags|=32),r.memoizedState!==null&&(h=sd(t,r,Qw,null,null,a),Ol._currentValue=h),bc(t,r),Ft(t,r,l,a),r.child;case 6:return t===null&&Fe&&((t=a=dt)&&(a=DS(a,r.pendingProps,fi),a!==null?(r.stateNode=a,cn=r,dt=null,t=!0):t=!1),t||Ls(r)),null;case 13:return lv(t,r,a);case 4:return qe(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=La(r,null,l,a):Ft(t,r,l,a),r.child;case 11:return ev(t,r,r.type,r.pendingProps,a);case 7:return Ft(t,r,r.pendingProps,a),r.child;case 8:return Ft(t,r,r.pendingProps.children,a),r.child;case 12:return Ft(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Er(r,r.type,l.value),Ft(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,zs(r),h=Jt(h),l=l(h),r.flags|=1,Ft(t,r,l,a),r.child;case 14:return tv(t,r,r.type,r.pendingProps,a);case 15:return nv(t,r,r.type,r.pendingProps,a);case 19:return cv(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=wc(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=ji(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return iv(t,r,a);case 24:return zs(r),l=Jt(Nt),t===null?(h=Xf(),h===null&&(h=nt,d=Qf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),r.memoizedState={parent:l,cache:h},Zf(r),Er(r,Nt,h)):((t.lanes&a)!==0&&(Jf(t,r),cl(r,null,null,a),ul()),h=t.memoizedState,d=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Er(r,Nt,l)):(l=d.cache,Er(r,Nt,l),l!==h.cache&&Kf(r,[Nt],a,!0))),Ft(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Ki(t){t.flags|=4}function fv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!E_(r)){if(r=Bn.current,r!==null&&((ze&4194048)===ze?di!==null:(ze&62914560)!==ze&&(ze&536870912)===0||r!==di))throw ol=Wf,Yg;t.flags|=8192}}function Sc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Mo():536870912,t.lanes|=r,qa|=r)}function yl(t,r){if(!Fe)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ot(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function iS(t,r,a){var l=r.pendingProps;switch(Hf(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(r),null;case 1:return ot(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Hi(Nt),Mt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(el(r)?Ki(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Fg())),ot(r),null;case 26:return a=r.memoizedState,t===null?(Ki(r),a!==null?(ot(r),fv(r,a)):(ot(r),r.flags&=-16777217)):a?a!==t.memoizedState?(Ki(r),ot(r),fv(r,a)):(ot(r),r.flags&=-16777217):(t.memoizedProps!==l&&Ki(r),ot(r),r.flags&=-16777217),null;case 27:Vt(r),a=Te.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Ki(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ot(r),null}t=fe.current,el(r)?qg(r):(t=f_(h,l,a),r.stateNode=t,Ki(r))}return ot(r),null;case 5:if(Vt(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Ki(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ot(r),null}if(t=fe.current,el(r))qg(r);else{switch(h=Uc(Te.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[xt]=r,t[Et]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch($t(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Ki(r)}}return ot(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Ki(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=Te.current,el(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=cn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[xt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||s_(t.nodeValue,a)),t||Ls(r)}else t=Uc(t).createTextNode(l),t[xt]=r,r.stateNode=t}return ot(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=el(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[xt]=r}else tl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ot(r),h=!1}else h=Fg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(Gi(r),r):(Gi(r),null)}if(Gi(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Sc(r,r.updateQueue),ot(r),null;case 4:return Mt(),t===null&&tm(r.stateNode.containerInfo),ot(r),null;case 10:return Hi(r.type),ot(r),null;case 19:if(oe(Dt),h=r.memoizedState,h===null)return ot(r),null;if(l=(r.flags&128)!==0,d=h.rendering,d===null)if(l)yl(h,!1);else{if(mt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(d=_c(t),d!==null){for(r.flags|=128,yl(h,!1),t=d.updateQueue,r.updateQueue=t,Sc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)zg(a,t),a=a.sibling;return se(Dt,Dt.current&1|2),r.child}t=t.sibling}h.tail!==null&&Dn()>xc&&(r.flags|=128,l=!0,yl(h,!1),r.lanes=4194304)}else{if(!l)if(t=_c(d),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,Sc(r,t),yl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Fe)return ot(r),null}else 2*Dn()-h.renderingStartTime>xc&&a!==536870912&&(r.flags|=128,l=!0,yl(h,!1),r.lanes=4194304);h.isBackwards?(d.sibling=r.child,r.child=d):(t=h.last,t!==null?t.sibling=d:r.child=d,h.last=d)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=Dn(),r.sibling=null,t=Dt.current,se(Dt,l?t&1|2:t&1),r):(ot(r),null);case 22:case 23:return Gi(r),id(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(ot(r),r.subtreeFlags&6&&(r.flags|=8192)):ot(r),a=r.updateQueue,a!==null&&Sc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&oe(Bs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Hi(Nt),ot(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function rS(t,r){switch(Hf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Hi(Nt),Mt(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Vt(r),null;case 13:if(Gi(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));tl()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return oe(Dt),null;case 4:return Mt(),null;case 10:return Hi(r.type),null;case 22:case 23:return Gi(r),id(),t!==null&&oe(Bs),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Hi(Nt),null;case 25:return null;default:return null}}function dv(t,r){switch(Hf(r),r.tag){case 3:Hi(Nt),Mt();break;case 26:case 27:case 5:Vt(r);break;case 4:Mt();break;case 13:Gi(r);break;case 19:oe(Dt);break;case 10:Hi(r.type);break;case 22:case 23:Gi(r),id(),t!==null&&oe(Bs);break;case 24:Hi(Nt)}}function vl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,E=a.inst;l=d(),E.destroy=l}a=a.next}while(a!==h)}}catch(T){et(r,r.return,T)}}function xr(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var E=l.inst,T=E.destroy;if(T!==void 0){E.destroy=void 0,h=r;var O=a,F=T;try{F()}catch(J){et(h,O,J)}}}l=l.next}while(l!==d)}}catch(J){et(r,r.return,J)}}function mv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{ty(r,a)}catch(l){et(t,t.return,l)}}}function pv(t,r,a){a.props=Hs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){et(t,r,l)}}function _l(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){et(t,r,h)}}function mi(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){et(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){et(t,r,h)}else a.current=null}function gv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){et(t,t.return,h)}}function Dd(t,r,a){try{var l=t.stateNode;AS(l,t.type,a,r),l[Et]=r}catch(h){et(t,t.return,h)}}function yv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Vr(t.type)||t.tag===4}function Od(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Vr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kd(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Pc));else if(l!==4&&(l===27&&Vr(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(kd(t,r,a),t=t.sibling;t!==null;)kd(t,r,a),t=t.sibling}function Ac(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Vr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Ac(t,r,a),t=t.sibling;t!==null;)Ac(t,r,a),t=t.sibling}function vv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);$t(r,l,a),r[xt]=t,r[Et]=a}catch(d){et(t,t.return,d)}}var Qi=!1,yt=!1,Md=!1,_v=typeof WeakSet=="function"?WeakSet:Set,jt=null;function sS(t,r){if(t=t.containerInfo,rm=Hc,t=Ng(t),Of(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var E=0,T=-1,O=-1,F=0,J=0,ne=t,K=null;t:for(;;){for(var Q;ne!==a||h!==0&&ne.nodeType!==3||(T=E+h),ne!==d||l!==0&&ne.nodeType!==3||(O=E+l),ne.nodeType===3&&(E+=ne.nodeValue.length),(Q=ne.firstChild)!==null;)K=ne,ne=Q;for(;;){if(ne===t)break t;if(K===a&&++F===h&&(T=E),K===d&&++J===l&&(O=E),(Q=ne.nextSibling)!==null)break;ne=K,K=ne.parentNode}ne=Q}a=T===-1||O===-1?null:{start:T,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(sm={focusedElem:t,selectionRange:a},Hc=!1,jt=r;jt!==null;)if(r=jt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,jt=t;else for(;jt!==null;){switch(r=jt,d=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=r,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Re=Hs(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Re,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(we){et(a,a.return,we)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)lm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":lm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,jt=t;break}jt=r.return}}function Ev(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ir(t,a),l&4&&vl(5,a);break;case 1:if(Ir(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(E){et(a,a.return,E)}else{var h=Hs(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(E){et(a,a.return,E)}}l&64&&mv(a),l&512&&_l(a,a.return);break;case 3:if(Ir(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ty(t,r)}catch(E){et(a,a.return,E)}}break;case 27:r===null&&l&4&&vv(a);case 26:case 5:Ir(t,a),r===null&&l&4&&gv(a),l&512&&_l(a,a.return);break;case 12:Ir(t,a);break;case 13:Ir(t,a),l&4&&wv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=mS.bind(null,a),OS(t,a))));break;case 22:if(l=a.memoizedState!==null||Qi,!l){r=r!==null&&r.memoizedState!==null||yt,h=Qi;var d=yt;Qi=l,(yt=r)&&!d?Cr(t,a,(a.subtreeFlags&8772)!==0):Ir(t,a),Qi=h,yt=d}break;case 30:break;default:Ir(t,a)}}function Tv(t){var r=t.alternate;r!==null&&(t.alternate=null,Tv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&gr(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var st=null,mn=!1;function Yi(t,r,a){for(a=a.child;a!==null;)bv(t,r,a),a=a.sibling}function bv(t,r,a){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(ft,a)}catch{}switch(a.tag){case 26:yt||mi(a,r),Yi(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:yt||mi(a,r);var l=st,h=mn;Vr(a.type)&&(st=a.stateNode,mn=!1),Yi(t,r,a),Il(a.stateNode),st=l,mn=h;break;case 5:yt||mi(a,r);case 6:if(l=st,h=mn,st=null,Yi(t,r,a),st=l,mn=h,st!==null)if(mn)try{(st.nodeType===9?st.body:st.nodeName==="HTML"?st.ownerDocument.body:st).removeChild(a.stateNode)}catch(d){et(a,r,d)}else try{st.removeChild(a.stateNode)}catch(d){et(a,r,d)}break;case 18:st!==null&&(mn?(t=st,c_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Pl(t)):c_(st,a.stateNode));break;case 4:l=st,h=mn,st=a.stateNode.containerInfo,mn=!0,Yi(t,r,a),st=l,mn=h;break;case 0:case 11:case 14:case 15:yt||xr(2,a,r),yt||xr(4,a,r),Yi(t,r,a);break;case 1:yt||(mi(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&pv(a,r,l)),Yi(t,r,a);break;case 21:Yi(t,r,a);break;case 22:yt=(l=yt)||a.memoizedState!==null,Yi(t,r,a),yt=l;break;default:Yi(t,r,a)}}function wv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Pl(t)}catch(a){et(r,r.return,a)}}function aS(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new _v),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new _v),r;default:throw Error(s(435,t.tag))}}function Vd(t,r){var a=aS(t);r.forEach(function(l){var h=pS.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function Sn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,E=r,T=E;e:for(;T!==null;){switch(T.tag){case 27:if(Vr(T.type)){st=T.stateNode,mn=!1;break e}break;case 5:st=T.stateNode,mn=!1;break e;case 3:case 4:st=T.stateNode.containerInfo,mn=!0;break e}T=T.return}if(st===null)throw Error(s(160));bv(d,E,h),st=null,mn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Sv(r,t),r=r.sibling}var Xn=null;function Sv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Sn(r,t),An(t),l&4&&(xr(3,t,t.return),vl(3,t),xr(5,t,t.return));break;case 1:Sn(r,t),An(t),l&512&&(yt||a===null||mi(a,a.return)),l&64&&Qi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Xn;if(Sn(r,t),An(t),l&512&&(yt||a===null||mi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[vs]||d[xt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),$t(d,l,a),d[xt]=t,pt(d),l=d;break e;case"link":var E=v_("link","href",h).get(l+(a.href||""));if(E){for(var T=0;T<E.length;T++)if(d=E[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(T,1);break t}}d=h.createElement(l),$t(d,l,a),h.head.appendChild(d);break;case"meta":if(E=v_("meta","content",h).get(l+(a.content||""))){for(T=0;T<E.length;T++)if(d=E[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(T,1);break t}}d=h.createElement(l),$t(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[xt]=t,pt(d),l=d}t.stateNode=l}else __(h,t.type,t.stateNode);else t.stateNode=y_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?__(h,t.type,t.stateNode):y_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Dd(t,t.memoizedProps,a.memoizedProps)}break;case 27:Sn(r,t),An(t),l&512&&(yt||a===null||mi(a,a.return)),a!==null&&l&4&&Dd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Sn(r,t),An(t),l&512&&(yt||a===null||mi(a,a.return)),t.flags&32){h=t.stateNode;try{kn(h,"")}catch(Q){et(t,t.return,Q)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Dd(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Md=!0);break;case 6:if(Sn(r,t),An(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Q){et(t,t.return,Q)}}break;case 3:if(zc=null,h=Xn,Xn=Lc(r.containerInfo),Sn(r,t),Xn=h,An(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Pl(r.containerInfo)}catch(Q){et(t,t.return,Q)}Md&&(Md=!1,Av(t));break;case 4:l=Xn,Xn=Lc(t.stateNode.containerInfo),Sn(r,t),An(t),Xn=l;break;case 12:Sn(r,t),An(t);break;case 13:Sn(r,t),An(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Bd=Dn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Vd(t,l)));break;case 22:h=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,F=Qi,J=yt;if(Qi=F||h,yt=J||O,Sn(r,t),yt=J,Qi=F,An(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||O||Qi||yt||Fs(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){O=a=r;try{if(d=O.stateNode,h)E=d.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{T=O.stateNode;var ne=O.memoizedProps.style,K=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;T.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Q){et(O,O.return,Q)}}}else if(r.tag===6){if(a===null){O=r;try{O.stateNode.nodeValue=h?"":O.memoizedProps}catch(Q){et(O,O.return,Q)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Vd(t,a))));break;case 19:Sn(r,t),An(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Vd(t,l)));break;case 30:break;case 21:break;default:Sn(r,t),An(t)}}function An(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(yv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Od(t);Ac(t,d,h);break;case 5:var E=a.stateNode;a.flags&32&&(kn(E,""),a.flags&=-33);var T=Od(t);Ac(t,T,E);break;case 3:case 4:var O=a.stateNode.containerInfo,F=Od(t);kd(t,F,O);break;default:throw Error(s(161))}}catch(J){et(t,t.return,J)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Av(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Av(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Ir(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Ev(t,r.alternate,r),r=r.sibling}function Fs(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:xr(4,r,r.return),Fs(r);break;case 1:mi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&pv(r,r.return,a),Fs(r);break;case 27:Il(r.stateNode);case 26:case 5:mi(r,r.return),Fs(r);break;case 22:r.memoizedState===null&&Fs(r);break;case 30:Fs(r);break;default:Fs(r)}t=t.sibling}}function Cr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,d=r,E=d.flags;switch(d.tag){case 0:case 11:case 15:Cr(h,d,a),vl(4,d);break;case 1:if(Cr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(F){et(l,l.return,F)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var O=h.shared.hiddenCallbacks;if(O!==null)for(h.shared.hiddenCallbacks=null,h=0;h<O.length;h++)ey(O[h],T)}catch(F){et(l,l.return,F)}}a&&E&64&&mv(d),_l(d,d.return);break;case 27:vv(d);case 26:case 5:Cr(h,d,a),a&&l===null&&E&4&&gv(d),_l(d,d.return);break;case 12:Cr(h,d,a);break;case 13:Cr(h,d,a),a&&E&4&&wv(h,d);break;case 22:d.memoizedState===null&&Cr(h,d,a),_l(d,d.return);break;case 30:break;default:Cr(h,d,a)}r=r.sibling}}function Pd(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&rl(a))}function Ud(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&rl(t))}function pi(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Rv(t,r,a,l),r=r.sibling}function Rv(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:pi(t,r,a,l),h&2048&&vl(9,r);break;case 1:pi(t,r,a,l);break;case 3:pi(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&rl(t)));break;case 12:if(h&2048){pi(t,r,a,l),t=r.stateNode;try{var d=r.memoizedProps,E=d.id,T=d.onPostCommit;typeof T=="function"&&T(E,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){et(r,r.return,O)}}else pi(t,r,a,l);break;case 13:pi(t,r,a,l);break;case 23:break;case 22:d=r.stateNode,E=r.alternate,r.memoizedState!==null?d._visibility&2?pi(t,r,a,l):El(t,r):d._visibility&2?pi(t,r,a,l):(d._visibility|=2,ja(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&Pd(E,r);break;case 24:pi(t,r,a,l),h&2048&&Ud(r.alternate,r);break;default:pi(t,r,a,l)}}function ja(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var d=t,E=r,T=a,O=l,F=E.flags;switch(E.tag){case 0:case 11:case 15:ja(d,E,T,O,h),vl(8,E);break;case 23:break;case 22:var J=E.stateNode;E.memoizedState!==null?J._visibility&2?ja(d,E,T,O,h):El(d,E):(J._visibility|=2,ja(d,E,T,O,h)),h&&F&2048&&Pd(E.alternate,E);break;case 24:ja(d,E,T,O,h),h&&F&2048&&Ud(E.alternate,E);break;default:ja(d,E,T,O,h)}r=r.sibling}}function El(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:El(a,l),h&2048&&Pd(l.alternate,l);break;case 24:El(a,l),h&2048&&Ud(l.alternate,l);break;default:El(a,l)}r=r.sibling}}var Tl=8192;function za(t){if(t.subtreeFlags&Tl)for(t=t.child;t!==null;)xv(t),t=t.sibling}function xv(t){switch(t.tag){case 26:za(t),t.flags&Tl&&t.memoizedState!==null&&GS(Xn,t.memoizedState,t.memoizedProps);break;case 5:za(t);break;case 3:case 4:var r=Xn;Xn=Lc(t.stateNode.containerInfo),za(t),Xn=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Tl,Tl=16777216,za(t),Tl=r):za(t));break;default:za(t)}}function Iv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function bl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];jt=l,Nv(l,t)}Iv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Cv(t),t=t.sibling}function Cv(t){switch(t.tag){case 0:case 11:case 15:bl(t),t.flags&2048&&xr(9,t,t.return);break;case 3:bl(t);break;case 12:bl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Rc(t)):bl(t);break;default:bl(t)}}function Rc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];jt=l,Nv(l,t)}Iv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:xr(8,r,r.return),Rc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Rc(r));break;default:Rc(r)}t=t.sibling}}function Nv(t,r){for(;jt!==null;){var a=jt;switch(a.tag){case 0:case 11:case 15:xr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:rl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,jt=l;else e:for(a=t;jt!==null;){l=jt;var h=l.sibling,d=l.return;if(Tv(l),l===a){jt=null;break e}if(h!==null){h.return=d,jt=h;break e}jt=d}}}var oS={getCacheForType:function(t){var r=Jt(Nt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},lS=typeof WeakMap=="function"?WeakMap:Map,Qe=0,nt=null,Me=null,ze=0,Ye=0,Rn=null,Nr=!1,Ba=!1,Ld=!1,Xi=0,mt=0,Dr=0,Gs=0,jd=0,qn=0,qa=0,wl=null,pn=null,zd=!1,Bd=0,xc=1/0,Ic=null,Or=null,Gt=0,kr=null,Ha=null,Fa=0,qd=0,Hd=null,Dv=null,Sl=0,Fd=null;function xn(){if((Qe&2)!==0&&ze!==0)return ze&-ze;if(j.T!==null){var t=Da;return t!==0?t:Wd()}return mr()}function Ov(){qn===0&&(qn=(ze&536870912)===0||Fe?ko():536870912);var t=Bn.current;return t!==null&&(t.flags|=32),qn}function In(t,r,a){(t===nt&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)&&(Ga(t,0),Mr(t,ze,qn,!1)),Ii(t,a),((Qe&2)===0||t!==nt)&&(t===nt&&((Qe&2)===0&&(Gs|=a),mt===4&&Mr(t,ze,qn,!1)),gi(t))}function kv(t,r,a){if((Qe&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||ys(t,r),h=l?hS(t,r):Kd(t,r,!0),d=l;do{if(h===0){Ba&&!l&&Mr(t,r,0,!1);break}else{if(a=t.current.alternate,d&&!uS(a)){h=Kd(t,r,!1),d=!1;continue}if(h===2){if(d=r,t.errorRecoveryDisabledLanes&d)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var T=t;h=wl;var O=T.current.memoizedState.isDehydrated;if(O&&(Ga(T,E).flags|=256),E=Kd(T,E,!1),E!==2){if(Ld&&!O){T.errorRecoveryDisabledLanes|=d,Gs|=d,h=4;break e}d=pn,pn=h,d!==null&&(pn===null?pn=d:pn.push.apply(pn,d))}h=E}if(d=!1,h!==2)continue}}if(h===1){Ga(t,0),Mr(t,r,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Mr(l,r,qn,!Nr);break e;case 2:pn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=Bd+300-Dn(),10<h)){if(Mr(l,r,qn,!Nr),la(l,0,!0)!==0)break e;l.timeoutHandle=l_(Mv.bind(null,l,a,pn,Ic,zd,r,qn,Gs,qa,Nr,d,2,-0,0),h);break e}Mv(l,a,pn,Ic,zd,r,qn,Gs,qa,Nr,d,0,-0,0)}}break}while(!0);gi(t)}function Mv(t,r,a,l,h,d,E,T,O,F,J,ne,K,Q){if(t.timeoutHandle=-1,ne=r.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(Dl={stylesheets:null,count:0,unsuspend:FS},xv(r),ne=$S(),ne!==null)){t.cancelPendingCommit=ne(Bv.bind(null,t,r,d,a,l,h,E,T,O,J,1,K,Q)),Mr(t,d,E,!F);return}Bv(t,r,d,a,l,h,E,T,O)}function uS(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!bn(d(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Mr(t,r,a,l){r&=~jd,r&=~Gs,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var d=31-Zt(h),E=1<<d;l[d]=-1,h&=~E}a!==0&&ti(t,a,r)}function Cc(){return(Qe&6)===0?(Al(0),!1):!0}function Gd(){if(Me!==null){if(Ye===0)var t=Me.return;else t=Me,qi=js=null,ld(t),Ua=null,pl=0,t=Me;for(;t!==null;)dv(t.alternate,t),t=t.return;Me=null}}function Ga(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,xS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Gd(),nt=t,Me=a=ji(t.current,null),ze=r,Ye=0,Rn=null,Nr=!1,Ba=ys(t,r),Ld=!1,qa=qn=jd=Gs=Dr=mt=0,pn=wl=null,zd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Zt(l),d=1<<h;r|=t[h],l&=~d}return Xi=r,Wu(),a}function Vv(t,r){De=null,j.H=gc,r===al||r===ac?(r=Zg(),Ye=3):r===Yg?(r=Zg(),Ye=4):Ye=r===Jy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Rn=r,Me===null&&(mt=1,Tc(t,Un(r,t.current)))}function Pv(){var t=j.H;return j.H=gc,t===null?gc:t}function Uv(){var t=j.A;return j.A=oS,t}function $d(){mt=4,Nr||(ze&4194048)!==ze&&Bn.current!==null||(Ba=!0),(Dr&134217727)===0&&(Gs&134217727)===0||nt===null||Mr(nt,ze,qn,!1)}function Kd(t,r,a){var l=Qe;Qe|=2;var h=Pv(),d=Uv();(nt!==t||ze!==r)&&(Ic=null,Ga(t,r)),r=!1;var E=mt;e:do try{if(Ye!==0&&Me!==null){var T=Me,O=Rn;switch(Ye){case 8:Gd(),E=6;break e;case 3:case 2:case 9:case 6:Bn.current===null&&(r=!0);var F=Ye;if(Ye=0,Rn=null,$a(t,T,O,F),a&&Ba){E=0;break e}break;default:F=Ye,Ye=0,Rn=null,$a(t,T,O,F)}}cS(),E=mt;break}catch(J){Vv(t,J)}while(!0);return r&&t.shellSuspendCounter++,qi=js=null,Qe=l,j.H=h,j.A=d,Me===null&&(nt=null,ze=0,Wu()),E}function cS(){for(;Me!==null;)Lv(Me)}function hS(t,r){var a=Qe;Qe|=2;var l=Pv(),h=Uv();nt!==t||ze!==r?(Ic=null,xc=Dn()+500,Ga(t,r)):Ba=ys(t,r);e:do try{if(Ye!==0&&Me!==null){r=Me;var d=Rn;t:switch(Ye){case 1:Ye=0,Rn=null,$a(t,r,d,1);break;case 2:case 9:if(Xg(d)){Ye=0,Rn=null,jv(r);break}r=function(){Ye!==2&&Ye!==9||nt!==t||(Ye=7),gi(t)},d.then(r,r);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:Xg(d)?(Ye=0,Rn=null,jv(r)):(Ye=0,Rn=null,$a(t,r,d,7));break;case 5:var E=null;switch(Me.tag){case 26:E=Me.memoizedState;case 5:case 27:var T=Me;if(!E||E_(E)){Ye=0,Rn=null;var O=T.sibling;if(O!==null)Me=O;else{var F=T.return;F!==null?(Me=F,Nc(F)):Me=null}break t}}Ye=0,Rn=null,$a(t,r,d,5);break;case 6:Ye=0,Rn=null,$a(t,r,d,6);break;case 8:Gd(),mt=6;break e;default:throw Error(s(462))}}fS();break}catch(J){Vv(t,J)}while(!0);return qi=js=null,j.H=l,j.A=h,Qe=a,Me!==null?0:(nt=null,ze=0,Wu(),mt)}function fS(){for(;Me!==null&&!Co();)Lv(Me)}function Lv(t){var r=hv(t.alternate,t,Xi);t.memoizedProps=t.pendingProps,r===null?Nc(t):Me=r}function jv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=sv(a,r,r.pendingProps,r.type,void 0,ze);break;case 11:r=sv(a,r,r.pendingProps,r.type.render,r.ref,ze);break;case 5:ld(r);default:dv(a,r),r=Me=zg(r,Xi),r=hv(a,r,Xi)}t.memoizedProps=t.pendingProps,r===null?Nc(t):Me=r}function $a(t,r,a,l){qi=js=null,ld(r),Ua=null,pl=0;var h=r.return;try{if(tS(t,h,r,a,ze)){mt=1,Tc(t,Un(a,t.current)),Me=null;return}}catch(d){if(h!==null)throw Me=h,d;mt=1,Tc(t,Un(a,t.current)),Me=null;return}r.flags&32768?(Fe||l===1?t=!0:Ba||(ze&536870912)!==0?t=!1:(Nr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Bn.current,l!==null&&l.tag===13&&(l.flags|=16384))),zv(r,t)):Nc(r)}function Nc(t){var r=t;do{if((r.flags&32768)!==0){zv(r,Nr);return}t=r.return;var a=iS(r.alternate,r,Xi);if(a!==null){Me=a;return}if(r=r.sibling,r!==null){Me=r;return}Me=r=t}while(r!==null);mt===0&&(mt=5)}function zv(t,r){do{var a=rS(t.alternate,t);if(a!==null){a.flags&=32767,Me=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Me=t;return}Me=t=a}while(t!==null);mt=6,Me=null}function Bv(t,r,a,l,h,d,E,T,O){t.cancelPendingCommit=null;do Dc();while(Gt!==0);if((Qe&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(d=r.lanes|r.childLanes,d|=Uf,Vo(t,a,d,E,T,O),t===nt&&(Me=nt=null,ze=0),Ha=r,kr=t,Fa=a,qd=d,Hd=h,Dv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,gS(ds,function(){return $v(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=j.T,j.T=null,h=W.p,W.p=2,E=Qe,Qe|=4;try{sS(t,r,a)}finally{Qe=E,W.p=h,j.T=l}}Gt=1,qv(),Hv(),Fv()}}function qv(){if(Gt===1){Gt=0;var t=kr,r=Ha,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=j.T,j.T=null;var l=W.p;W.p=2;var h=Qe;Qe|=4;try{Sv(r,t);var d=sm,E=Ng(t.containerInfo),T=d.focusedElem,O=d.selectionRange;if(E!==T&&T&&T.ownerDocument&&Cg(T.ownerDocument.documentElement,T)){if(O!==null&&Of(T)){var F=O.start,J=O.end;if(J===void 0&&(J=F),"selectionStart"in T)T.selectionStart=F,T.selectionEnd=Math.min(J,T.value.length);else{var ne=T.ownerDocument||document,K=ne&&ne.defaultView||window;if(K.getSelection){var Q=K.getSelection(),Re=T.textContent.length,we=Math.min(O.start,Re),Je=O.end===void 0?we:Math.min(O.end,Re);!Q.extend&&we>Je&&(E=Je,Je=we,we=E);var B=Ig(T,we),U=Ig(T,Je);if(B&&U&&(Q.rangeCount!==1||Q.anchorNode!==B.node||Q.anchorOffset!==B.offset||Q.focusNode!==U.node||Q.focusOffset!==U.offset)){var H=ne.createRange();H.setStart(B.node,B.offset),Q.removeAllRanges(),we>Je?(Q.addRange(H),Q.extend(U.node,U.offset)):(H.setEnd(U.node,U.offset),Q.addRange(H))}}}}for(ne=[],Q=T;Q=Q.parentNode;)Q.nodeType===1&&ne.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ne.length;T++){var ee=ne[T];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Hc=!!rm,sm=rm=null}finally{Qe=h,W.p=l,j.T=a}}t.current=r,Gt=2}}function Hv(){if(Gt===2){Gt=0;var t=kr,r=Ha,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=j.T,j.T=null;var l=W.p;W.p=2;var h=Qe;Qe|=4;try{Ev(t,r.alternate,r)}finally{Qe=h,W.p=l,j.T=a}}Gt=3}}function Fv(){if(Gt===4||Gt===3){Gt=0,Ru();var t=kr,r=Ha,a=Fa,l=Dv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Gt=5:(Gt=0,Ha=kr=null,Gv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Or=null),ua(a),r=r.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(ft,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=j.T,h=W.p,W.p=2,j.T=null;try{for(var d=t.onRecoverableError,E=0;E<l.length;E++){var T=l[E];d(T.value,{componentStack:T.stack})}}finally{j.T=r,W.p=h}}(Fa&3)!==0&&Dc(),gi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Fd?Sl++:(Sl=0,Fd=t):Sl=0,Al(0)}}function Gv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,rl(r)))}function Dc(t){return qv(),Hv(),Fv(),$v()}function $v(){if(Gt!==5)return!1;var t=kr,r=qd;qd=0;var a=ua(Fa),l=j.T,h=W.p;try{W.p=32>a?32:a,j.T=null,a=Hd,Hd=null;var d=kr,E=Fa;if(Gt=0,Ha=kr=null,Fa=0,(Qe&6)!==0)throw Error(s(331));var T=Qe;if(Qe|=4,Cv(d.current),Rv(d,d.current,E,a),Qe=T,Al(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(ft,d)}catch{}return!0}finally{W.p=h,j.T=l,Gv(t,r)}}function Kv(t,r,a){r=Un(a,r),r=bd(t.stateNode,r,2),t=wr(t,r,2),t!==null&&(Ii(t,2),gi(t))}function et(t,r,a){if(t.tag===3)Kv(t,t,a);else for(;r!==null;){if(r.tag===3){Kv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Or===null||!Or.has(l))){t=Un(a,t),a=Wy(2),l=wr(r,a,2),l!==null&&(Zy(a,l,r,t),Ii(l,2),gi(l));break}}r=r.return}}function Qd(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new lS;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(Ld=!0,h.add(a),t=dS.bind(null,t,r,a),r.then(t,t))}function dS(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,nt===t&&(ze&a)===a&&(mt===4||mt===3&&(ze&62914560)===ze&&300>Dn()-Bd?(Qe&2)===0&&Ga(t,0):jd|=a,qa===ze&&(qa=0)),gi(t)}function Qv(t,r){r===0&&(r=Mo()),t=xa(t,r),t!==null&&(Ii(t,r),gi(t))}function mS(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Qv(t,a)}function pS(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),Qv(t,a)}function gS(t,r){return Nn(t,r)}var Oc=null,Ka=null,Yd=!1,kc=!1,Xd=!1,$s=0;function gi(t){t!==Ka&&t.next===null&&(Ka===null?Oc=Ka=t:Ka=Ka.next=t),kc=!0,Yd||(Yd=!0,vS())}function Al(t,r){if(!Xd&&kc){Xd=!0;do for(var a=!1,l=Oc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var E=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-Zt(42|t)+1)-1,d&=h&~(E&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Zv(l,d))}else d=ze,d=la(l,l===nt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||ys(l,d)||(a=!0,Zv(l,d));l=l.next}while(a);Xd=!1}}function yS(){Yv()}function Yv(){kc=Yd=!1;var t=0;$s!==0&&(RS()&&(t=$s),$s=0);for(var r=Dn(),a=null,l=Oc;l!==null;){var h=l.next,d=Xv(l,r);d===0?(l.next=null,a===null?Oc=h:a.next=h,h===null&&(Ka=a)):(a=l,(t!==0||(d&3)!==0)&&(kc=!0)),l=h}Al(t)}function Xv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var E=31-Zt(d),T=1<<E,O=h[E];O===-1?((T&a)===0||(T&l)!==0)&&(h[E]=Oo(T,r)):O<=r&&(t.expiredLanes|=T),d&=~T}if(r=nt,a=ze,a=la(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&fs(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ys(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&fs(l),ua(a)){case 2:case 8:a=aa;break;case 32:a=ds;break;case 268435456:a=oa;break;default:a=ds}return l=Wv.bind(null,t),a=Nn(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&fs(l),t.callbackPriority=2,t.callbackNode=null,2}function Wv(t,r){if(Gt!==0&&Gt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Dc()&&t.callbackNode!==a)return null;var l=ze;return l=la(t,t===nt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(kv(t,l,r),Xv(t,Dn()),t.callbackNode!=null&&t.callbackNode===a?Wv.bind(null,t):null)}function Zv(t,r){if(Dc())return null;kv(t,r,!0)}function vS(){IS(function(){(Qe&6)!==0?Nn(No,yS):Yv()})}function Wd(){return $s===0&&($s=ko()),$s}function Jv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:pa(""+t)}function e_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function _S(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var d=Jv((h[Et]||null).action),E=l.submitter;E&&(r=(r=E[Et]||null)?Jv(r.formAction):E.getAttribute("formAction"),r!==null&&(d=r,E=null));var T=new ga("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if($s!==0){var O=E?e_(h,E):new FormData(h);yd(a,{pending:!0,data:O,method:h.method,action:d},null,O)}}else typeof d=="function"&&(T.preventDefault(),O=E?e_(h,E):new FormData(h),yd(a,{pending:!0,data:O,method:h.method,action:d},d,O))},currentTarget:h}]})}}for(var Zd=0;Zd<Pf.length;Zd++){var Jd=Pf[Zd],ES=Jd.toLowerCase(),TS=Jd[0].toUpperCase()+Jd.slice(1);Yn(ES,"on"+TS)}Yn(kg,"onAnimationEnd"),Yn(Mg,"onAnimationIteration"),Yn(Vg,"onAnimationStart"),Yn("dblclick","onDoubleClick"),Yn("focusin","onFocus"),Yn("focusout","onBlur"),Yn(Lw,"onTransitionRun"),Yn(jw,"onTransitionStart"),Yn(zw,"onTransitionCancel"),Yn(Pg,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rl));function t_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(r)for(var E=l.length-1;0<=E;E--){var T=l[E],O=T.instance,F=T.currentTarget;if(T=T.listener,O!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=F;try{d(h)}catch(J){Ec(J)}h.currentTarget=null,d=O}else for(E=0;E<l.length;E++){if(T=l[E],O=T.instance,F=T.currentTarget,T=T.listener,O!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=F;try{d(h)}catch(J){Ec(J)}h.currentTarget=null,d=O}}}}function Ve(t,r){var a=r[Uo];a===void 0&&(a=r[Uo]=new Set);var l=t+"__bubble";a.has(l)||(n_(r,t,2,!1),a.add(l))}function em(t,r,a){var l=0;r&&(l|=4),n_(a,t,l,r)}var Mc="_reactListening"+Math.random().toString(36).slice(2);function tm(t){if(!t[Mc]){t[Mc]=!0,Lo.forEach(function(a){a!=="selectionchange"&&(bS.has(a)||em(a,!1,t),em(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Mc]||(r[Mc]=!0,em("selectionchange",!1,r))}}function n_(t,r,a,l){switch(R_(r)){case 2:var h=YS;break;case 8:h=XS;break;default:h=pm}a=h.bind(null,r,a,t),h=void 0,!Vn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function nm(t,r,a,l,h){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var T=l.stateNode.containerInfo;if(T===h)break;if(E===4)for(E=l.return;E!==null;){var O=E.tag;if((O===3||O===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;T!==null;){if(E=Ci(T),E===null)return;if(O=E.tag,O===5||O===6||O===26||O===27){l=d=E;continue e}T=T.parentNode}}l=l.return}Pu(function(){var F=d,J=Mn(a),ne=[];e:{var K=Ug.get(t);if(K!==void 0){var Q=ga,Re=t;switch(t){case"keypress":if(oi(a)===0)break e;case"keydown":case"keyup":Q=ba;break;case"focusin":Re="focus",Q=_a;break;case"focusout":Re="blur",Q=_a;break;case"beforeblur":case"afterblur":Q=_a;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=If;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Fu;break;case kg:case Mg:case Vg:Q=Ea;break;case Pg:Q=$u;break;case"scroll":case"scrollend":Q=Uu;break;case"wheel":Q=wa;break;case"copy":case"cut":case"paste":Q=Ta;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Xo;break;case"toggle":case"beforetoggle":Q=Qu}var we=(r&4)!==0,Je=!we&&(t==="scroll"||t==="scrollend"),B=we?K!==null?K+"Capture":null:K;we=[];for(var U=F,H;U!==null;){var ee=U;if(H=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||H===null||B===null||(ee=As(U,B),ee!=null&&we.push(xl(U,ee,H))),Je)break;U=U.return}0<we.length&&(K=new Q(K,Re,null,a,J),ne.push({event:K,listeners:we}))}}if((r&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",K&&a!==ki&&(Re=a.relatedTarget||a.fromElement)&&(Ci(Re)||Re[On]))break e;if((Q||K)&&(K=J.window===J?J:(K=J.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(Re=a.relatedTarget||a.toElement,Q=F,Re=Re?Ci(Re):null,Re!==null&&(Je=u(Re),we=Re.tag,Re!==Je||we!==5&&we!==27&&we!==6)&&(Re=null)):(Q=null,Re=F),Q!==Re)){if(we=Pn,ee="onMouseLeave",B="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(we=Xo,ee="onPointerLeave",B="onPointerEnter",U="pointer"),Je=Q==null?K:ii(Q),H=Re==null?K:ii(Re),K=new we(ee,U+"leave",Q,a,J),K.target=Je,K.relatedTarget=H,ee=null,Ci(J)===F&&(we=new we(B,U+"enter",Re,a,J),we.target=H,we.relatedTarget=Je,ee=we),Je=ee,Q&&Re)t:{for(we=Q,B=Re,U=0,H=we;H;H=Qa(H))U++;for(H=0,ee=B;ee;ee=Qa(ee))H++;for(;0<U-H;)we=Qa(we),U--;for(;0<H-U;)B=Qa(B),H--;for(;U--;){if(we===B||B!==null&&we===B.alternate)break t;we=Qa(we),B=Qa(B)}we=null}else we=null;Q!==null&&i_(ne,K,Q,we,!1),Re!==null&&Je!==null&&i_(ne,Je,Re,we,!0)}}e:{if(K=F?ii(F):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var ye=bg;else if(Ct(K))if(wg)ye=Vw;else{ye=kw;var ke=Ow}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?F&&Ho(F.elementType)&&(ye=bg):ye=Mw;if(ye&&(ye=ye(t,F))){Li(ne,ye,a,J);break e}ke&&ke(t,K,F),t==="focusout"&&F&&K.type==="number"&&F.memoizedProps.value!=null&&vr(K,"number",K.value)}switch(ke=F?ii(F):window,t){case"focusin":(Ct(ke)||ke.contentEditable==="true")&&(Sa=ke,kf=F,Jo=null);break;case"focusout":Jo=kf=Sa=null;break;case"mousedown":Mf=!0;break;case"contextmenu":case"mouseup":case"dragend":Mf=!1,Dg(ne,a,J);break;case"selectionchange":if(Uw)break;case"keydown":case"keyup":Dg(ne,a,J)}var _e;if(ci)e:{switch(t){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Le?X(t,a)&&(Se="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(v&&a.locale!=="ko"&&(Le||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Le&&(_e=Go()):(ai=J,_r="value"in ai?ai.value:ai.textContent,Le=!0)),ke=Vc(F,Se),0<ke.length&&(Se=new Qo(Se,t,null,a,J),ne.push({event:Se,listeners:ke}),_e?Se.data=_e:(_e=ce(a),_e!==null&&(Se.data=_e)))),(_e=y?It(t,a):je(t,a))&&(Se=Vc(F,"onBeforeInput"),0<Se.length&&(ke=new Qo("onBeforeInput","beforeinput",null,a,J),ne.push({event:ke,listeners:Se}),ke.data=_e)),_S(ne,t,F,a,J)}t_(ne,r)})}function xl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Vc(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=As(t,a),h!=null&&l.unshift(xl(t,h,d)),h=As(t,r),h!=null&&l.push(xl(t,h,d))),t.tag===3)return l;t=t.return}return[]}function Qa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function i_(t,r,a,l,h){for(var d=r._reactName,E=[];a!==null&&a!==l;){var T=a,O=T.alternate,F=T.stateNode;if(T=T.tag,O!==null&&O===l)break;T!==5&&T!==26&&T!==27||F===null||(O=F,h?(F=As(a,d),F!=null&&E.unshift(xl(a,F,O))):h||(F=As(a,d),F!=null&&E.push(xl(a,F,O)))),a=a.return}E.length!==0&&t.push({event:r,listeners:E})}var wS=/\r\n?/g,SS=/\u0000|\uFFFD/g;function r_(t){return(typeof t=="string"?t:""+t).replace(wS,`
`).replace(SS,"")}function s_(t,r){return r=r_(r),r_(t)===r}function Pc(){}function Ze(t,r,a,l,h,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||kn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&kn(t,""+l);break;case"className":ri(t,"class",l);break;case"tabIndex":ri(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ri(t,a,l);break;case"style":qo(t,l,d);break;case"data":if(r!=="object"){ri(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=pa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&Ze(t,r,"name",h.name,h,null),Ze(t,r,"formEncType",h.formEncType,h,null),Ze(t,r,"formMethod",h.formMethod,h,null),Ze(t,r,"formTarget",h.formTarget,h,null)):(Ze(t,r,"encType",h.encType,h,null),Ze(t,r,"method",h.method,h,null),Ze(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=pa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Pc);break;case"onScroll":l!=null&&Ve("scroll",t);break;case"onScrollEnd":l!=null&&Ve("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=pa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ve("beforetoggle",t),Ve("toggle",t),yr(t,"popover",l);break;case"xlinkActuate":qt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":qt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":qt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":qt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":qt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":qt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":qt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":qt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":qt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":yr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Rf.get(a)||a,yr(t,a,l))}}function im(t,r,a,l,h,d){switch(a){case"style":qo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?kn(t,l):(typeof l=="number"||typeof l=="bigint")&&kn(t,""+l);break;case"onScroll":l!=null&&Ve("scroll",t);break;case"onScrollEnd":l!=null&&Ve("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Pc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ca.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),d=t[Et]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(r,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):yr(t,a,l)}}}function $t(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",t),Ve("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var E=a[d];if(E!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ze(t,r,d,E,a,null)}}h&&Ze(t,r,"srcSet",a.srcSet,a,null),l&&Ze(t,r,"src",a.src,a,null);return;case"input":Ve("invalid",t);var T=d=E=h=null,O=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var J=a[l];if(J!=null)switch(l){case"name":h=J;break;case"type":E=J;break;case"checked":O=J;break;case"defaultChecked":F=J;break;case"value":d=J;break;case"defaultValue":T=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,r));break;default:Ze(t,r,l,J,a,null)}}bs(t,d,T,O,F,E,h,!1),ma(t);return;case"select":Ve("invalid",t),l=E=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":E=T;break;case"multiple":l=T;default:Ze(t,r,h,T,a,null)}r=d,a=E,t.multiple=!!l,r!=null?Oi(t,!!l,r,!1):a!=null&&Oi(t,!!l,a,!0);return;case"textarea":Ve("invalid",t),d=h=l=null;for(E in a)if(a.hasOwnProperty(E)&&(T=a[E],T!=null))switch(E){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Ze(t,r,E,T,a,null)}ws(t,l,h,d),ma(t);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ze(t,r,O,l,a,null)}return;case"dialog":Ve("beforetoggle",t),Ve("toggle",t),Ve("cancel",t),Ve("close",t);break;case"iframe":case"object":Ve("load",t);break;case"video":case"audio":for(l=0;l<Rl.length;l++)Ve(Rl[l],t);break;case"image":Ve("error",t),Ve("load",t);break;case"details":Ve("toggle",t);break;case"embed":case"source":case"link":Ve("error",t),Ve("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ze(t,r,F,l,a,null)}return;default:if(Ho(r)){for(J in a)a.hasOwnProperty(J)&&(l=a[J],l!==void 0&&im(t,r,J,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&Ze(t,r,T,l,a,null))}function AS(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,E=null,T=null,O=null,F=null,J=null;for(Q in a){var ne=a[Q];if(a.hasOwnProperty(Q)&&ne!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":O=ne;default:l.hasOwnProperty(Q)||Ze(t,r,Q,null,l,ne)}}for(var K in l){var Q=l[K];if(ne=a[K],l.hasOwnProperty(K)&&(Q!=null||ne!=null))switch(K){case"type":d=Q;break;case"name":h=Q;break;case"checked":F=Q;break;case"defaultChecked":J=Q;break;case"value":E=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:Q!==ne&&Ze(t,r,K,Q,l,ne)}}Tn(t,E,T,O,F,J,d,h);return;case"select":Q=E=T=K=null;for(d in a)if(O=a[d],a.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":Q=O;default:l.hasOwnProperty(d)||Ze(t,r,d,null,l,O)}for(h in l)if(d=l[h],O=a[h],l.hasOwnProperty(h)&&(d!=null||O!=null))switch(h){case"value":K=d;break;case"defaultValue":T=d;break;case"multiple":E=d;default:d!==O&&Ze(t,r,h,d,l,O)}r=T,a=E,l=Q,K!=null?Oi(t,!!a,K,!1):!!l!=!!a&&(r!=null?Oi(t,!!a,r,!0):Oi(t,!!a,a?[]:"",!1));return;case"textarea":Q=K=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Ze(t,r,T,null,l,h)}for(E in l)if(h=l[E],d=a[E],l.hasOwnProperty(E)&&(h!=null||d!=null))switch(E){case"value":K=h;break;case"defaultValue":Q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&Ze(t,r,E,h,l,d)}Xe(t,K,Q);return;case"option":for(var Re in a)if(K=a[Re],a.hasOwnProperty(Re)&&K!=null&&!l.hasOwnProperty(Re))switch(Re){case"selected":t.selected=!1;break;default:Ze(t,r,Re,null,l,K)}for(O in l)if(K=l[O],Q=a[O],l.hasOwnProperty(O)&&K!==Q&&(K!=null||Q!=null))switch(O){case"selected":t.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Ze(t,r,O,K,l,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)K=a[we],a.hasOwnProperty(we)&&K!=null&&!l.hasOwnProperty(we)&&Ze(t,r,we,null,l,K);for(F in l)if(K=l[F],Q=a[F],l.hasOwnProperty(F)&&K!==Q&&(K!=null||Q!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:Ze(t,r,F,K,l,Q)}return;default:if(Ho(r)){for(var Je in a)K=a[Je],a.hasOwnProperty(Je)&&K!==void 0&&!l.hasOwnProperty(Je)&&im(t,r,Je,void 0,l,K);for(J in l)K=l[J],Q=a[J],!l.hasOwnProperty(J)||K===Q||K===void 0&&Q===void 0||im(t,r,J,K,l,Q);return}}for(var B in a)K=a[B],a.hasOwnProperty(B)&&K!=null&&!l.hasOwnProperty(B)&&Ze(t,r,B,null,l,K);for(ne in l)K=l[ne],Q=a[ne],!l.hasOwnProperty(ne)||K===Q||K==null&&Q==null||Ze(t,r,ne,K,l,Q)}var rm=null,sm=null;function Uc(t){return t.nodeType===9?t:t.ownerDocument}function a_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function o_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function am(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var om=null;function RS(){var t=window.event;return t&&t.type==="popstate"?t===om?!1:(om=t,!0):(om=null,!1)}var l_=typeof setTimeout=="function"?setTimeout:void 0,xS=typeof clearTimeout=="function"?clearTimeout:void 0,u_=typeof Promise=="function"?Promise:void 0,IS=typeof queueMicrotask=="function"?queueMicrotask:typeof u_<"u"?function(t){return u_.resolve(null).then(t).catch(CS)}:l_;function CS(t){setTimeout(function(){throw t})}function Vr(t){return t==="head"}function c_(t,r){var a=r,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var E=t.ownerDocument;if(a&1&&Il(E.documentElement),a&2&&Il(E.body),a&4)for(a=E.head,Il(a),E=a.firstChild;E;){var T=E.nextSibling,O=E.nodeName;E[vs]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=T}}if(h===0){t.removeChild(d),Pl(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Pl(r)}function lm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":lm(a),gr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function NS(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[vs])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Wn(t.nextSibling),t===null)break}return null}function DS(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Wn(t.nextSibling),t===null))return null;return t}function um(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function OS(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Wn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var cm=null;function h_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function f_(t,r,a){switch(r=Uc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Il(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);gr(t)}var Hn=new Map,d_=new Set;function Lc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Wi=W.d;W.d={f:kS,r:MS,D:VS,C:PS,L:US,m:LS,X:zS,S:jS,M:BS};function kS(){var t=Wi.f(),r=Cc();return t||r}function MS(t){var r=ni(t);r!==null&&r.tag===5&&r.type==="form"?ky(r):Wi.r(t)}var Ya=typeof document>"u"?null:document;function m_(t,r,a){var l=Ya;if(l&&typeof r=="string"&&r){var h=Tt(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),d_.has(h)||(d_.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),$t(r,"link",t),pt(r),l.head.appendChild(r)))}}function VS(t){Wi.D(t),m_("dns-prefetch",t,null)}function PS(t,r){Wi.C(t,r),m_("preconnect",t,r)}function US(t,r,a){Wi.L(t,r,a);var l=Ya;if(l&&t&&r){var h='link[rel="preload"][as="'+Tt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Tt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Tt(a.imageSizes)+'"]')):h+='[href="'+Tt(t)+'"]';var d=h;switch(r){case"style":d=Xa(t);break;case"script":d=Wa(t)}Hn.has(d)||(t=_({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Hn.set(d,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(Cl(d))||r==="script"&&l.querySelector(Nl(d))||(r=l.createElement("link"),$t(r,"link",t),pt(r),l.head.appendChild(r)))}}function LS(t,r){Wi.m(t,r);var a=Ya;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+Tt(l)+'"][href="'+Tt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Wa(t)}if(!Hn.has(d)&&(t=_({rel:"modulepreload",href:t},r),Hn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Nl(d)))return}l=a.createElement("link"),$t(l,"link",t),pt(l),a.head.appendChild(l)}}}function jS(t,r,a){Wi.S(t,r,a);var l=Ya;if(l&&t){var h=on(l).hoistableStyles,d=Xa(t);r=r||"default";var E=h.get(d);if(!E){var T={loading:0,preload:null};if(E=l.querySelector(Cl(d)))T.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Hn.get(d))&&hm(t,a);var O=E=l.createElement("link");pt(O),$t(O,"link",t),O._p=new Promise(function(F,J){O.onload=F,O.onerror=J}),O.addEventListener("load",function(){T.loading|=1}),O.addEventListener("error",function(){T.loading|=2}),T.loading|=4,jc(E,r,l)}E={type:"stylesheet",instance:E,count:1,state:T},h.set(d,E)}}}function zS(t,r){Wi.X(t,r);var a=Ya;if(a&&t){var l=on(a).hoistableScripts,h=Wa(t),d=l.get(h);d||(d=a.querySelector(Nl(h)),d||(t=_({src:t,async:!0},r),(r=Hn.get(h))&&fm(t,r),d=a.createElement("script"),pt(d),$t(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function BS(t,r){Wi.M(t,r);var a=Ya;if(a&&t){var l=on(a).hoistableScripts,h=Wa(t),d=l.get(h);d||(d=a.querySelector(Nl(h)),d||(t=_({src:t,async:!0,type:"module"},r),(r=Hn.get(h))&&fm(t,r),d=a.createElement("script"),pt(d),$t(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function p_(t,r,a,l){var h=(h=Te.current)?Lc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Xa(a.href),a=on(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Xa(a.href);var d=on(h).hoistableStyles,E=d.get(t);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,E),(d=h.querySelector(Cl(t)))&&!d._p&&(E.instance=d,E.state.loading=5),Hn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Hn.set(t,a),d||qS(h,t,a,E.state))),r&&l===null)throw Error(s(528,""));return E}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Wa(a),a=on(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Xa(t){return'href="'+Tt(t)+'"'}function Cl(t){return'link[rel="stylesheet"]['+t+"]"}function g_(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function qS(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),$t(r,"link",a),pt(r),t.head.appendChild(r))}function Wa(t){return'[src="'+Tt(t)+'"]'}function Nl(t){return"script[async]"+t}function y_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Tt(a.href)+'"]');if(l)return r.instance=l,pt(l),l;var h=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),pt(l),$t(l,"style",h),jc(l,a.precedence,t),r.instance=l;case"stylesheet":h=Xa(a.href);var d=t.querySelector(Cl(h));if(d)return r.state.loading|=4,r.instance=d,pt(d),d;l=g_(a),(h=Hn.get(h))&&hm(l,h),d=(t.ownerDocument||t).createElement("link"),pt(d);var E=d;return E._p=new Promise(function(T,O){E.onload=T,E.onerror=O}),$t(d,"link",l),r.state.loading|=4,jc(d,a.precedence,t),r.instance=d;case"script":return d=Wa(a.src),(h=t.querySelector(Nl(d)))?(r.instance=h,pt(h),h):(l=a,(h=Hn.get(d))&&(l=_({},a),fm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),pt(h),$t(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,jc(l,a.precedence,t));return r.instance}function jc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,E=0;E<l.length;E++){var T=l[E];if(T.dataset.precedence===r)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function hm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function fm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var zc=null;function v_(t,r,a){if(zc===null){var l=new Map,h=zc=new Map;h.set(a,l)}else h=zc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[vs]||d[xt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var E=d.getAttribute(r)||"";E=t+E;var T=l.get(E);T?T.push(d):l.set(E,[d])}}return l}function __(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function HS(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function E_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Dl=null;function FS(){}function GS(t,r,a){if(Dl===null)throw Error(s(475));var l=Dl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=Xa(a.href),d=t.querySelector(Cl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Bc.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=d,pt(d);return}d=t.ownerDocument||t,a=g_(a),(h=Hn.get(h))&&hm(a,h),d=d.createElement("link"),pt(d);var E=d;E._p=new Promise(function(T,O){E.onload=T,E.onerror=O}),$t(d,"link",a),r.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Bc.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function $S(){if(Dl===null)throw Error(s(475));var t=Dl;return t.stylesheets&&t.count===0&&dm(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&dm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Bc(){if(this.count--,this.count===0){if(this.stylesheets)dm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var qc=null;function dm(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,qc=new Map,r.forEach(KS,t),qc=null,Bc.call(t))}function KS(t,r){if(!(r.state.loading&4)){var a=qc.get(t);if(a)var l=a.get(null);else{a=new Map,qc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var E=h[d];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}h=r.instance,E=h.getAttribute("data-precedence"),d=a.get(E)||l,d===l&&a.set(null,h),a.set(E,h),this.count++,l=Bc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Ol={$$typeof:te,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function QS(t,r,a,l,h,d,E,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xi(0),this.hiddenUpdates=xi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function T_(t,r,a,l,h,d,E,T,O,F,J,ne){return t=new QS(t,r,a,E,T,O,F,ne),r=1,d===!0&&(r|=24),d=wn(3,null,null,r),t.current=d,d.stateNode=t,r=Qf(),r.refCount++,t.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},Zf(d),t}function b_(t){return t?(t=Ia,t):Ia}function w_(t,r,a,l,h,d){h=b_(h),l.context===null?l.context=h:l.pendingContext=h,l=br(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=wr(t,l,r),a!==null&&(In(a,t,r),ll(a,t,r))}function S_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function mm(t,r){S_(t,r),(t=t.alternate)&&S_(t,r)}function A_(t){if(t.tag===13){var r=xa(t,67108864);r!==null&&In(r,t,67108864),mm(t,67108864)}}var Hc=!0;function YS(t,r,a,l){var h=j.T;j.T=null;var d=W.p;try{W.p=2,pm(t,r,a,l)}finally{W.p=d,j.T=h}}function XS(t,r,a,l){var h=j.T;j.T=null;var d=W.p;try{W.p=8,pm(t,r,a,l)}finally{W.p=d,j.T=h}}function pm(t,r,a,l){if(Hc){var h=gm(l);if(h===null)nm(t,r,l,Fc,a),x_(t,l);else if(ZS(h,t,r,a,l))l.stopPropagation();else if(x_(t,l),r&4&&-1<WS.indexOf(t)){for(;h!==null;){var d=ni(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var E=$n(d.pendingLanes);if(E!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;E;){var O=1<<31-Zt(E);T.entanglements[1]|=O,E&=~O}gi(d),(Qe&6)===0&&(xc=Dn()+500,Al(0))}}break;case 13:T=xa(d,2),T!==null&&In(T,d,2),Cc(),mm(d,2)}if(d=gm(l),d===null&&nm(t,r,l,Fc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else nm(t,r,l,null,a)}}function gm(t){return t=Mn(t),ym(t)}var Fc=null;function ym(t){if(Fc=null,t=Ci(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=f(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Fc=t,null}function R_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ef()){case No:return 2;case aa:return 8;case ds:case Tf:return 32;case oa:return 268435456;default:return 32}default:return 32}}var vm=!1,Pr=null,Ur=null,Lr=null,kl=new Map,Ml=new Map,jr=[],WS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function x_(t,r){switch(t){case"focusin":case"focusout":Pr=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":kl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ml.delete(r.pointerId)}}function Vl(t,r,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},r!==null&&(r=ni(r),r!==null&&A_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function ZS(t,r,a,l,h){switch(r){case"focusin":return Pr=Vl(Pr,t,r,a,l,h),!0;case"dragenter":return Ur=Vl(Ur,t,r,a,l,h),!0;case"mouseover":return Lr=Vl(Lr,t,r,a,l,h),!0;case"pointerover":var d=h.pointerId;return kl.set(d,Vl(kl.get(d)||null,t,r,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Ml.set(d,Vl(Ml.get(d)||null,t,r,a,l,h)),!0}return!1}function I_(t){var r=Ci(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=f(a),r!==null){t.blockedOn=r,Cu(t.priority,function(){if(a.tag===13){var l=xn();l=dr(l);var h=xa(a,l);h!==null&&In(h,a,l),mm(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gc(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=gm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);ki=l,a.target.dispatchEvent(l),ki=null}else return r=ni(a),r!==null&&A_(r),t.blockedOn=a,!1;r.shift()}return!0}function C_(t,r,a){Gc(t)&&a.delete(r)}function JS(){vm=!1,Pr!==null&&Gc(Pr)&&(Pr=null),Ur!==null&&Gc(Ur)&&(Ur=null),Lr!==null&&Gc(Lr)&&(Lr=null),kl.forEach(C_),Ml.forEach(C_)}function $c(t,r){t.blockedOn===r&&(t.blockedOn=null,vm||(vm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,JS)))}var Kc=null;function N_(t){Kc!==t&&(Kc=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Kc===t&&(Kc=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(ym(l||a)===null)continue;break}var d=ni(a);d!==null&&(t.splice(r,3),r-=3,yd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Pl(t){function r(O){return $c(O,t)}Pr!==null&&$c(Pr,t),Ur!==null&&$c(Ur,t),Lr!==null&&$c(Lr,t),kl.forEach(r),Ml.forEach(r);for(var a=0;a<jr.length;a++){var l=jr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<jr.length&&(a=jr[0],a.blockedOn===null);)I_(a),a.blockedOn===null&&jr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],E=h[Et]||null;if(typeof d=="function")E||N_(a);else if(E){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,E=d[Et]||null)T=E.formAction;else if(ym(h)!==null)continue}else T=E.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),N_(a)}}}function _m(t){this._internalRoot=t}Qc.prototype.render=_m.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=xn();w_(a,l,t,r,null,null)},Qc.prototype.unmount=_m.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;w_(t.current,2,null,t,null,null),Cc(),r[On]=null}};function Qc(t){this._internalRoot=t}Qc.prototype.unstable_scheduleHydration=function(t){if(t){var r=mr();t={blockedOn:null,target:t,priority:r};for(var a=0;a<jr.length&&r!==0&&r<jr[a].priority;a++);jr.splice(a,0,t),a===0&&I_(t)}};var D_=e.version;if(D_!=="19.1.0")throw Error(s(527,D_,"19.1.0"));W.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(r),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var eA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yc.isDisabled&&Yc.supportsFiber)try{ft=Yc.inject(eA),Ke=Yc}catch{}}return Ll.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=Ky,d=Qy,E=Yy,T=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(T=r.unstable_transitionCallbacks)),r=T_(t,1,!1,null,null,a,l,h,d,E,T,null),t[On]=r.current,tm(t),new _m(r)},Ll.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=Ky,E=Qy,T=Yy,O=null,F=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(O=a.unstable_transitionCallbacks),a.formState!==void 0&&(F=a.formState)),r=T_(t,1,!0,r,a??null,l,h,d,E,T,O,F),r.context=b_(null),a=r.current,l=xn(),l=dr(l),h=br(l),h.callback=null,wr(a,h,l),a=l,r.current.lanes=a,Ii(r,a),gi(r),t[On]=r.current,tm(t),new Qc(r)},Ll.version="19.1.0",Ll}var q_;function cA(){if(q_)return bm.exports;q_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),bm.exports=uA(),bm.exports}var hA=cA(),jl={},H_;function fA(){if(H_)return jl;H_=1,Object.defineProperty(jl,"__esModule",{value:!0}),jl.parse=f,jl.serialize=g;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const S=function(){};return S.prototype=Object.create(null),S})();function f(S,M){const k=new u,Y=S.length;if(Y<2)return k;const G=(M==null?void 0:M.decode)||_;let $=0;do{const ae=S.indexOf("=",$);if(ae===-1)break;const te=S.indexOf(";",$),pe=te===-1?Y:te;if(ae>pe){$=S.lastIndexOf(";",ae-1)+1;continue}const he=m(S,$,ae),ve=p(S,ae,he),V=S.slice(he,ve);if(k[V]===void 0){let R=m(S,ae+1,pe),I=p(S,pe,R);const x=G(S.slice(R,I));k[V]=x}$=pe+1}while($<Y);return k}function m(S,M,k){do{const Y=S.charCodeAt(M);if(Y!==32&&Y!==9)return M}while(++M<k);return k}function p(S,M,k){for(;M>k;){const Y=S.charCodeAt(--M);if(Y!==32&&Y!==9)return M+1}return k}function g(S,M,k){const Y=(k==null?void 0:k.encode)||encodeURIComponent;if(!i.test(S))throw new TypeError(`argument name is invalid: ${S}`);const G=Y(M);if(!e.test(G))throw new TypeError(`argument val is invalid: ${M}`);let $=S+"="+G;if(!k)return $;if(k.maxAge!==void 0){if(!Number.isInteger(k.maxAge))throw new TypeError(`option maxAge is invalid: ${k.maxAge}`);$+="; Max-Age="+k.maxAge}if(k.domain){if(!n.test(k.domain))throw new TypeError(`option domain is invalid: ${k.domain}`);$+="; Domain="+k.domain}if(k.path){if(!s.test(k.path))throw new TypeError(`option path is invalid: ${k.path}`);$+="; Path="+k.path}if(k.expires){if(!b(k.expires)||!Number.isFinite(k.expires.valueOf()))throw new TypeError(`option expires is invalid: ${k.expires}`);$+="; Expires="+k.expires.toUTCString()}if(k.httpOnly&&($+="; HttpOnly"),k.secure&&($+="; Secure"),k.partitioned&&($+="; Partitioned"),k.priority)switch(typeof k.priority=="string"?k.priority.toLowerCase():void 0){case"low":$+="; Priority=Low";break;case"medium":$+="; Priority=Medium";break;case"high":$+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${k.priority}`)}if(k.sameSite)switch(typeof k.sameSite=="string"?k.sameSite.toLowerCase():k.sameSite){case!0:case"strict":$+="; SameSite=Strict";break;case"lax":$+="; SameSite=Lax";break;case"none":$+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${k.sameSite}`)}return $}function _(S){if(S.indexOf("%")===-1)return S;try{return decodeURIComponent(S)}catch{return S}}function b(S){return o.call(S)==="[object Date]"}return jl}fA();/**
 * react-router v7.5.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var F_="popstate";function dA(i={}){function e(s,o){let{pathname:u,search:f,hash:m}=s.location;return zm("",{pathname:u,search:f,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:Jl(o)}return pA(e,n,null,i)}function ut(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function bi(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mA(){return Math.random().toString(36).substring(2,10)}function G_(i,e){return{usr:i.state,key:i.key,idx:e}}function zm(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?yo(e):e,state:n,key:e&&e.key||s||mA()}}function Jl({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function yo(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function pA(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",p=null,g=_();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function _(){return(f.state||{idx:null}).idx}function b(){m="POP";let G=_(),$=G==null?null:G-g;g=G,p&&p({action:m,location:Y.location,delta:$})}function S(G,$){m="PUSH";let ae=zm(Y.location,G,$);g=_()+1;let te=G_(ae,g),pe=Y.createHref(ae);try{f.pushState(te,"",pe)}catch(he){if(he instanceof DOMException&&he.name==="DataCloneError")throw he;o.location.assign(pe)}u&&p&&p({action:m,location:Y.location,delta:1})}function M(G,$){m="REPLACE";let ae=zm(Y.location,G,$);g=_();let te=G_(ae,g),pe=Y.createHref(ae);f.replaceState(te,"",pe),u&&p&&p({action:m,location:Y.location,delta:0})}function k(G){let $=o.location.origin!=="null"?o.location.origin:o.location.href,ae=typeof G=="string"?G:Jl(G);return ae=ae.replace(/ $/,"%20"),ut($,`No window.location.(origin|href) available to create URL for href: ${ae}`),new URL(ae,$)}let Y={get action(){return m},get location(){return i(o,f)},listen(G){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(F_,b),p=G,()=>{o.removeEventListener(F_,b),p=null}},createHref(G){return e(o,G)},createURL:k,encodeLocation(G){let $=k(G);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:S,replace:M,go(G){return f.go(G)}};return Y}function kE(i,e,n="/"){return gA(i,e,n,!1)}function gA(i,e,n,s){let o=typeof e=="string"?yo(e):e,u=sr(o.pathname||"/",n);if(u==null)return null;let f=ME(i);yA(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let g=IA(u);m=RA(f[p],g,s)}return m}function ME(i,e=[],n=[],s=""){let o=(u,f,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};p.relativePath.startsWith("/")&&(ut(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let g=nr([s,p.relativePath]),_=n.concat(p);u.children&&u.children.length>0&&(ut(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),ME(u.children,e,_,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:SA(g,u.index),routesMeta:_})};return i.forEach((u,f)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,f);else for(let p of VE(u.path))o(u,f,p)}),e}function VE(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=VE(s.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...f),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function yA(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:AA(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var vA=/^:[\w-]+$/,_A=3,EA=2,TA=1,bA=10,wA=-2,$_=i=>i==="*";function SA(i,e){let n=i.split("/"),s=n.length;return n.some($_)&&(s+=wA),e&&(s+=EA),n.filter(o=>!$_(o)).reduce((o,u)=>o+(vA.test(u)?_A:u===""?TA:bA),s)}function AA(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function RA(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",f=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,_=u==="/"?e:e.slice(u.length)||"/",b=_h({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),S=p.route;if(!b&&g&&n&&!s[s.length-1].route.index&&(b=_h({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!b)return null;Object.assign(o,b.params),f.push({params:o,pathname:nr([u,b.pathname]),pathnameBase:OA(nr([u,b.pathnameBase])),route:S}),b.pathnameBase!=="/"&&(u=nr([u,b.pathnameBase]))}return f}function _h(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=xA(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:_,isOptional:b},S)=>{if(_==="*"){let k=m[S]||"";f=u.slice(0,u.length-k.length).replace(/(.)\/+$/,"$1")}const M=m[S];return b&&!M?g[_]=void 0:g[_]=(M||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:i}}function xA(i,e=!1,n=!0){bi(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function IA(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bi(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function sr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function CA(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?yo(i):i;return{pathname:n?n.startsWith("/")?n:NA(n,e):e,search:kA(s),hash:MA(o)}}function NA(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Rm(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function DA(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function PE(i){let e=DA(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function UE(i,e,n,s=!1){let o;typeof i=="string"?o=yo(i):(o={...i},ut(!o.pathname||!o.pathname.includes("?"),Rm("?","pathname","search",o)),ut(!o.pathname||!o.pathname.includes("#"),Rm("#","pathname","hash",o)),ut(!o.search||!o.search.includes("#"),Rm("#","search","hash",o)));let u=i===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let b=e.length-1;if(!s&&f.startsWith("..")){let S=f.split("/");for(;S[0]==="..";)S.shift(),b-=1;o.pathname=S.join("/")}m=b>=0?e[b]:"/"}let p=CA(o,m),g=f&&f!=="/"&&f.endsWith("/"),_=(u||f===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}var nr=i=>i.join("/").replace(/\/\/+/g,"/"),OA=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),kA=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,MA=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function VA(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var LE=["POST","PUT","PATCH","DELETE"];new Set(LE);var PA=["GET",...LE];new Set(PA);var vo=L.createContext(null);vo.displayName="DataRouter";var Bh=L.createContext(null);Bh.displayName="DataRouterState";var jE=L.createContext({isTransitioning:!1});jE.displayName="ViewTransition";var UA=L.createContext(new Map);UA.displayName="Fetchers";var LA=L.createContext(null);LA.displayName="Await";var Si=L.createContext(null);Si.displayName="Navigation";var cu=L.createContext(null);cu.displayName="Location";var Ai=L.createContext({outlet:null,matches:[],isDataRoute:!1});Ai.displayName="Route";var _p=L.createContext(null);_p.displayName="RouteError";function jA(i,{relative:e}={}){ut(hu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=L.useContext(Si),{hash:o,pathname:u,search:f}=fu(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:nr([n,u])),s.createHref({pathname:m,search:f,hash:o})}function hu(){return L.useContext(cu)!=null}function Ri(){return ut(hu(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(cu).location}var zE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function BE(i){L.useContext(Si).static||L.useLayoutEffect(i)}function qh(){let{isDataRoute:i}=L.useContext(Ai);return i?JA():zA()}function zA(){ut(hu(),"useNavigate() may be used only in the context of a <Router> component.");let i=L.useContext(vo),{basename:e,navigator:n}=L.useContext(Si),{matches:s}=L.useContext(Ai),{pathname:o}=Ri(),u=JSON.stringify(PE(s)),f=L.useRef(!1);return BE(()=>{f.current=!0}),L.useCallback((p,g={})=>{if(bi(f.current,zE),!f.current)return;if(typeof p=="number"){n.go(p);return}let _=UE(p,JSON.parse(u),o,g.relative==="path");i==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:nr([e,_.pathname])),(g.replace?n.replace:n.push)(_,g.state,g)},[e,n,u,o,i])}L.createContext(null);function BA(){let{matches:i}=L.useContext(Ai),e=i[i.length-1];return e?e.params:{}}function fu(i,{relative:e}={}){let{matches:n}=L.useContext(Ai),{pathname:s}=Ri(),o=JSON.stringify(PE(n));return L.useMemo(()=>UE(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function qA(i,e){return qE(i,e)}function qE(i,e,n,s){var ae;ut(hu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:u}=L.useContext(Si),{matches:f}=L.useContext(Ai),m=f[f.length-1],p=m?m.params:{},g=m?m.pathname:"/",_=m?m.pathnameBase:"/",b=m&&m.route;{let te=b&&b.path||"";HE(g,!b||te.endsWith("*")||te.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${te}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${te}"> to <Route path="${te==="/"?"*":`${te}/*`}">.`)}let S=Ri(),M;if(e){let te=typeof e=="string"?yo(e):e;ut(_==="/"||((ae=te.pathname)==null?void 0:ae.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${te.pathname}" was given in the \`location\` prop.`),M=te}else M=S;let k=M.pathname||"/",Y=k;if(_!=="/"){let te=_.replace(/^\//,"").split("/");Y="/"+k.replace(/^\//,"").split("/").slice(te.length).join("/")}let G=!u&&n&&n.matches&&n.matches.length>0?n.matches:kE(i,{pathname:Y});bi(b||G!=null,`No routes matched location "${M.pathname}${M.search}${M.hash}" `),bi(G==null||G[G.length-1].route.element!==void 0||G[G.length-1].route.Component!==void 0||G[G.length-1].route.lazy!==void 0,`Matched leaf route at location "${M.pathname}${M.search}${M.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=KA(G&&G.map(te=>Object.assign({},te,{params:Object.assign({},p,te.params),pathname:nr([_,o.encodeLocation?o.encodeLocation(te.pathname).pathname:te.pathname]),pathnameBase:te.pathnameBase==="/"?_:nr([_,o.encodeLocation?o.encodeLocation(te.pathnameBase).pathname:te.pathnameBase])})),f,n,s);return e&&$?L.createElement(cu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...M},navigationType:"POP"}},$):$}function HA(){let i=ZA(),e=VA(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",i),f=L.createElement(L.Fragment,null,L.createElement("p",null,"💿 Hey developer 👋"),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:u},"ErrorBoundary")," or"," ",L.createElement("code",{style:u},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:o},n):null,f)}var FA=L.createElement(HA,null),GA=class extends L.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?L.createElement(Ai.Provider,{value:this.props.routeContext},L.createElement(_p.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $A({routeContext:i,match:e,children:n}){let s=L.useContext(vo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(Ai.Provider,{value:i},n)}function KA(i,e=[],n=null,s=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let o=i,u=n==null?void 0:n.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);ut(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let f=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:_,errors:b}=n,S=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||S){f=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,g,_)=>{let b,S=!1,M=null,k=null;n&&(b=u&&g.route.id?u[g.route.id]:void 0,M=g.route.errorElement||FA,f&&(m<0&&_===0?(HE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,k=null):m===_&&(S=!0,k=g.route.hydrateFallbackElement||null)));let Y=e.concat(o.slice(0,_+1)),G=()=>{let $;return b?$=M:S?$=k:g.route.Component?$=L.createElement(g.route.Component,null):g.route.element?$=g.route.element:$=p,L.createElement($A,{match:g,routeContext:{outlet:p,matches:Y,isDataRoute:n!=null},children:$})};return n&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?L.createElement(GA,{location:n.location,revalidation:n.revalidation,component:M,error:b,children:G(),routeContext:{outlet:null,matches:Y,isDataRoute:!0}}):G()},null)}function Ep(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QA(i){let e=L.useContext(vo);return ut(e,Ep(i)),e}function YA(i){let e=L.useContext(Bh);return ut(e,Ep(i)),e}function XA(i){let e=L.useContext(Ai);return ut(e,Ep(i)),e}function Tp(i){let e=XA(i),n=e.matches[e.matches.length-1];return ut(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function WA(){return Tp("useRouteId")}function ZA(){var s;let i=L.useContext(_p),e=YA("useRouteError"),n=Tp("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[n]}function JA(){let{router:i}=QA("useNavigate"),e=Tp("useNavigate"),n=L.useRef(!1);return BE(()=>{n.current=!0}),L.useCallback(async(o,u={})=>{bi(n.current,zE),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var K_={};function HE(i,e,n){!e&&!K_[i]&&(K_[i]=!0,bi(!1,n))}L.memo(e1);function e1({routes:i,future:e,state:n}){return qE(i,void 0,n,e)}function Ks(i){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function t1({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){ut(!hu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=i.replace(/^\/*/,"/"),m=L.useMemo(()=>({basename:f,navigator:o,static:u,future:{}}),[f,o,u]);typeof n=="string"&&(n=yo(n));let{pathname:p="/",search:g="",hash:_="",state:b=null,key:S="default"}=n,M=L.useMemo(()=>{let k=sr(p,f);return k==null?null:{location:{pathname:k,search:g,hash:_,state:b,key:S},navigationType:s}},[f,p,g,_,b,S,s]);return bi(M!=null,`<Router basename="${f}"> is not able to match the URL "${p}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:L.createElement(Si.Provider,{value:m},L.createElement(cu.Provider,{children:e,value:M}))}function n1({children:i,location:e}){return qA(Bm(i),e)}function Bm(i,e=[]){let n=[];return L.Children.forEach(i,(s,o)=>{if(!L.isValidElement(s))return;let u=[...e,o];if(s.type===L.Fragment){n.push.apply(n,Bm(s.props.children,u));return}ut(s.type===Ks,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=Bm(s.props.children,u)),n.push(f)}),n}var rh="get",sh="application/x-www-form-urlencoded";function Hh(i){return i!=null&&typeof i.tagName=="string"}function i1(i){return Hh(i)&&i.tagName.toLowerCase()==="button"}function r1(i){return Hh(i)&&i.tagName.toLowerCase()==="form"}function s1(i){return Hh(i)&&i.tagName.toLowerCase()==="input"}function a1(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function o1(i,e){return i.button===0&&(!e||e==="_self")&&!a1(i)}var Xc=null;function l1(){if(Xc===null)try{new FormData(document.createElement("form"),0),Xc=!1}catch{Xc=!0}return Xc}var u1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xm(i){return i!=null&&!u1.has(i)?(bi(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${sh}"`),null):i}function c1(i,e){let n,s,o,u,f;if(r1(i)){let m=i.getAttribute("action");s=m?sr(m,e):null,n=i.getAttribute("method")||rh,o=xm(i.getAttribute("enctype"))||sh,u=new FormData(i)}else if(i1(i)||s1(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||m.getAttribute("action");if(s=p?sr(p,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||rh,o=xm(i.getAttribute("formenctype"))||xm(m.getAttribute("enctype"))||sh,u=new FormData(m,i),!l1()){let{name:g,type:_,value:b}=i;if(_==="image"){let S=g?`${g}.`:"";u.append(`${S}x`,"0"),u.append(`${S}y`,"0")}else g&&u.append(g,b)}}else{if(Hh(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=rh,s=null,o=sh,f=i}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}function bp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function h1(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function f1(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function d1(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await h1(u,n);return f.links?f.links():[]}return[]}));return y1(s.flat(1).filter(f1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Q_(i,e,n,s,o,u){let f=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>{var _;return n[g].pathname!==p.pathname||((_=n[g].route.path)==null?void 0:_.endsWith("*"))&&n[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>f(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{var b;let _=s.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(f(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let S=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((b=n[0])==null?void 0:b.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function m1(i,e,{includeHydrateFallback:n}={}){return p1(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function p1(i){return[...new Set(i)]}function g1(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function y1(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(g1(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}var v1=new Set([100,101,204,205]);function _1(i,e){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname="_root.data":e&&sr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function FE(){let i=L.useContext(vo);return bp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function E1(){let i=L.useContext(Bh);return bp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var wp=L.createContext(void 0);wp.displayName="FrameworkContext";function GE(){let i=L.useContext(wp);return bp(i,"You must render this element inside a <HydratedRouter> element"),i}function T1(i,e){let n=L.useContext(wp),[s,o]=L.useState(!1),[u,f]=L.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:_,onTouchStart:b}=e,S=L.useRef(null);L.useEffect(()=>{if(i==="render"&&f(!0),i==="viewport"){let Y=$=>{$.forEach(ae=>{f(ae.isIntersecting)})},G=new IntersectionObserver(Y,{threshold:.5});return S.current&&G.observe(S.current),()=>{G.disconnect()}}},[i]),L.useEffect(()=>{if(s){let Y=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(Y)}}},[s]);let M=()=>{o(!0)},k=()=>{o(!1),f(!1)};return n?i!=="intent"?[u,S,{}]:[u,S,{onFocus:zl(m,M),onBlur:zl(p,k),onMouseEnter:zl(g,M),onMouseLeave:zl(_,k),onTouchStart:zl(b,M)}]:[!1,S,{}]}function zl(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function b1({page:i,...e}){let{router:n}=FE(),s=L.useMemo(()=>kE(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?L.createElement(S1,{page:i,matches:s,...e}):null}function w1(i){let{manifest:e,routeModules:n}=GE(),[s,o]=L.useState([]);return L.useEffect(()=>{let u=!1;return d1(i,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[i,e,n]),s}function S1({page:i,matches:e,...n}){let s=Ri(),{manifest:o,routeModules:u}=GE(),{basename:f}=FE(),{loaderData:m,matches:p}=E1(),g=L.useMemo(()=>Q_(i,e,p,o,s,"data"),[i,e,p,o,s]),_=L.useMemo(()=>Q_(i,e,p,o,s,"assets"),[i,e,p,o,s]),b=L.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let k=new Set,Y=!1;if(e.forEach($=>{var te;let ae=o.routes[$.route.id];!ae||!ae.hasLoader||(!g.some(pe=>pe.route.id===$.route.id)&&$.route.id in m&&((te=u[$.route.id])!=null&&te.shouldRevalidate)||ae.hasClientLoader?Y=!0:k.add($.route.id))}),k.size===0)return[];let G=_1(i,f);return Y&&k.size>0&&G.searchParams.set("_routes",e.filter($=>k.has($.route.id)).map($=>$.route.id).join(",")),[G.pathname+G.search]},[f,m,s,o,g,e,i,u]),S=L.useMemo(()=>m1(_,o),[_,o]),M=w1(_);return L.createElement(L.Fragment,null,b.map(k=>L.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),S.map(k=>L.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),M.map(({key:k,link:Y})=>L.createElement("link",{key:k,...Y})))}function A1(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var $E=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$E&&(window.__reactRouterVersion="7.5.1")}catch{}function R1({basename:i,children:e,window:n}){let s=L.useRef();s.current==null&&(s.current=dA({window:n,v5Compat:!0}));let o=s.current,[u,f]=L.useState({action:o.action,location:o.location}),m=L.useCallback(p=>{L.startTransition(()=>f(p))},[f]);return L.useLayoutEffect(()=>o.listen(m),[o,m]),L.createElement(t1,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:o})}var KE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Eh=L.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:p,to:g,preventScrollReset:_,viewTransition:b,...S},M){let{basename:k}=L.useContext(Si),Y=typeof g=="string"&&KE.test(g),G,$=!1;if(typeof g=="string"&&Y&&(G=g,$E))try{let I=new URL(window.location.href),x=g.startsWith("//")?new URL(I.protocol+g):new URL(g),D=sr(x.pathname,k);x.origin===I.origin&&D!=null?g=D+x.search+x.hash:$=!0}catch{bi(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ae=jA(g,{relative:o}),[te,pe,he]=T1(s,S),ve=N1(g,{replace:f,state:m,target:p,preventScrollReset:_,relative:o,viewTransition:b});function V(I){e&&e(I),I.defaultPrevented||ve(I)}let R=L.createElement("a",{...S,...he,href:G||ae,onClick:$||u?e:V,ref:A1(M,pe),target:p,"data-discover":!Y&&n==="render"?"true":void 0});return te&&!Y?L.createElement(L.Fragment,null,R,L.createElement(b1,{page:ae})):R});Eh.displayName="Link";var x1=L.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:p,...g},_){let b=fu(f,{relative:g.relative}),S=Ri(),M=L.useContext(Bh),{navigator:k,basename:Y}=L.useContext(Si),G=M!=null&&V1(b)&&m===!0,$=k.encodeLocation?k.encodeLocation(b).pathname:b.pathname,ae=S.pathname,te=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;n||(ae=ae.toLowerCase(),te=te?te.toLowerCase():null,$=$.toLowerCase()),te&&Y&&(te=sr(te,Y)||te);const pe=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let he=ae===$||!o&&ae.startsWith($)&&ae.charAt(pe)==="/",ve=te!=null&&(te===$||!o&&te.startsWith($)&&te.charAt($.length)==="/"),V={isActive:he,isPending:ve,isTransitioning:G},R=he?e:void 0,I;typeof s=="function"?I=s(V):I=[s,he?"active":null,ve?"pending":null,G?"transitioning":null].filter(Boolean).join(" ");let x=typeof u=="function"?u(V):u;return L.createElement(Eh,{...g,"aria-current":R,className:I,ref:_,style:x,to:f,viewTransition:m},typeof p=="function"?p(V):p)});x1.displayName="NavLink";var I1=L.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=rh,action:m,onSubmit:p,relative:g,preventScrollReset:_,viewTransition:b,...S},M)=>{let k=k1(),Y=M1(m,{relative:g}),G=f.toLowerCase()==="get"?"get":"post",$=typeof m=="string"&&KE.test(m),ae=te=>{if(p&&p(te),te.defaultPrevented)return;te.preventDefault();let pe=te.nativeEvent.submitter,he=(pe==null?void 0:pe.getAttribute("formmethod"))||f;k(pe||te.currentTarget,{fetcherKey:e,method:he,navigate:n,replace:o,state:u,relative:g,preventScrollReset:_,viewTransition:b})};return L.createElement("form",{ref:M,method:G,action:Y,onSubmit:s?p:ae,...S,"data-discover":!$&&i==="render"?"true":void 0})});I1.displayName="Form";function C1(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QE(i){let e=L.useContext(vo);return ut(e,C1(i)),e}function N1(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f}={}){let m=qh(),p=Ri(),g=fu(i,{relative:u});return L.useCallback(_=>{if(o1(_,e)){_.preventDefault();let b=n!==void 0?n:Jl(p)===Jl(g);m(i,{replace:b,state:s,preventScrollReset:o,relative:u,viewTransition:f})}},[p,m,g,n,s,e,i,o,u,f])}var D1=0,O1=()=>`__${String(++D1)}__`;function k1(){let{router:i}=QE("useSubmit"),{basename:e}=L.useContext(Si),n=WA();return L.useCallback(async(s,o={})=>{let{action:u,method:f,encType:m,formData:p,body:g}=c1(s,e);if(o.navigate===!1){let _=o.fetcherKey||O1();await i.fetch(_,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||m,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function M1(i,{relative:e}={}){let{basename:n}=L.useContext(Si),s=L.useContext(Ai);ut(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...fu(i||".",{relative:e})},f=Ri();if(i==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(_=>_==="")){m.delete("index"),p.filter(b=>b).forEach(b=>m.append("index",b));let _=m.toString();u.search=_?`?${_}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:nr([n,u.pathname])),Jl(u)}function V1(i,e={}){let n=L.useContext(jE);ut(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=QE("useViewTransitionState"),o=fu(i,{relative:e.relative});if(!n.isTransitioning)return!1;let u=sr(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=sr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return _h(o.pathname,f)!=null||_h(o.pathname,u)!=null}new TextEncoder;[...v1];/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),U1=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),Y_=i=>{const e=U1(i);return e.charAt(0).toUpperCase()+e.slice(1)},YE=(...i)=>i.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),L1=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var j1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=L.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:f,...m},p)=>L.createElement("svg",{ref:p,...j1,width:e,height:e,stroke:i,strokeWidth:s?Number(n)*24/Number(e):n,className:YE("lucide",o),...!u&&!L1(m)&&{"aria-hidden":"true"},...m},[...f.map(([g,_])=>L.createElement(g,_)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=(i,e)=>{const n=L.forwardRef(({className:s,...o},u)=>L.createElement(z1,{ref:u,iconNode:e,className:YE(`lucide-${P1(Y_(i))}`,`lucide-${i}`,s),...o}));return n.displayName=Y_(i),n};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],q1=fn("check",B1);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],F1=fn("chevron-left",H1);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$1=fn("circle-user-round",G1);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Q1=fn("clipboard-list",K1);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],X1=fn("copy",Y1);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Z1=fn("layout-dashboard",W1);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],X_=fn("menu",J1);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]],tR=fn("message-circle-more",eR);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],iR=fn("moon",nR);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],sR=fn("pencil",rR);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],oR=fn("send",aR);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],uR=fn("sun",lR);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],hR=fn("trash-2",cR);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],dR=fn("users",fR);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],XE=fn("x",mR),pR=()=>{const[i,e]=L.useState(!1),{pathname:n}=Ri(),s=[{name:"home",icon:A.jsx(Z1,{}),path:"/"},{name:"teams",icon:A.jsx(dR,{}),path:"/Teams"},{name:"tasks",icon:A.jsx(Q1,{}),path:"/TasksBoard"},{name:"chat",icon:A.jsx(tR,{}),path:"/ChatPage"}],[o,u]=L.useState(localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches),f=()=>{o?(document.documentElement.classList.remove("dark"),localStorage.theme="light",u(!1)):(document.documentElement.classList.add("dark"),localStorage.theme="dark",u(!0))};return A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"md:hidden p-6",children:A.jsx(X_,{onClick:()=>e(!i),className:"w-6 h-6 cursor-pointer text-gray-800 dark:text-gray-100"})}),A.jsx("div",{className:`
          fixed top-0 left-0 h-full w-20 bg-white dark:bg-zinc-900 shadow-xl z-50 
          transform transition-transform duration-300 ease-in-out
          ${i?"translate-x-0":"-translate-x-full"} 
          md:translate-x-0 md:static md:block
        `,children:A.jsxs("nav",{className:"h-full flex flex-col justify-between items-center p-4",children:[A.jsxs("div",{className:"flex flex-col items-center gap-8 w-full",children:[A.jsx("div",{className:"md:hidden p-3 self-start",children:A.jsx(X_,{onClick:()=>e(!1),className:"w-6 h-6 cursor-pointer text-gray-800 dark:text-gray-100"})}),A.jsx("div",{className:"flex flex-col gap-4 w-full",children:s.map(m=>A.jsx(Eh,{to:m.path,className:`
                    p-3 rounded-lg text-center 
                    ${n===m.path?"bg-gray-300 dark:bg-zinc-700":"hover:bg-gray-200 dark:hover:bg-zinc-800"} 
                    transition-colors w-full text-gray-800 dark:text-gray-100
                  `,onClick:()=>e(!1),children:m.icon},m.name))})]}),A.jsxs("div",{className:"flex flex-col items-center gap-4 w-full",children:[A.jsx(Eh,{to:"/profile",className:`
                p-3 rounded-lg text-center 
                ${n==="/profile"?"bg-gray-300 dark:bg-zinc-700":"hover:bg-gray-200 dark:hover:bg-zinc-800"} 
                transition-colors text-gray-800 dark:text-gray-100
              `,onClick:()=>e(!1),children:A.jsx($1,{})}),A.jsx("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2 bg-zinc-200 dark:bg-zinc-800 text-gray-900 dark:text-white rounded-xl hover:opacity-80",children:o?A.jsx(uR,{size:18}):A.jsx(iR,{size:18})})]})]})})]})},gR=()=>A.jsx("div",{children:"Dashboard"}),yR=()=>{};var W_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},vR=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],f=i[n++],m=i[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],f=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},ZE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,m=f?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,_=u>>2,b=(u&3)<<4|m>>4;let S=(m&15)<<2|g>>6,M=g&63;p||(M=64,f||(S=64)),s.push(n[_],n[b],n[S],n[M])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(WE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):vR(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const b=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||g==null||b==null)throw new _R;const S=u<<2|m>>4;if(s.push(S),g!==64){const M=m<<4&240|g>>2;if(s.push(M),b!==64){const k=g<<6&192|b;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class _R extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ER=function(i){const e=WE(i);return ZE.encodeByteArray(e,!0)},Th=function(i){return ER(i).replace(/\./g,"")},JE=function(i){try{return ZE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=()=>TR().__FIREBASE_DEFAULTS__,wR=()=>{if(typeof process>"u"||typeof W_>"u")return;const i=W_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},SR=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&JE(i[1]);return e&&JSON.parse(e)},Fh=()=>{try{return yR()||bR()||wR()||SR()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},eT=i=>{var e,n;return(n=(e=Fh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},AR=i=>{const e=eT(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},tT=()=>{var i;return(i=Fh())===null||i===void 0?void 0:i.config},nT=i=>{var e;return(e=Fh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Th(JSON.stringify(n)),Th(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function CR(){var i;const e=(i=Fh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DR(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function OR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kR(){const i=an();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function MR(){return!CR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VR(){try{return typeof indexedDB=="object"}catch{return!1}}function PR(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="FirebaseError";class fr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=UR,Object.setPrototypeOf(this,fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,du.prototype.create)}}class du{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?LR(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new fr(o,m,s)}}function LR(i,e){return i.replace(jR,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const jR=/\{\$([^}]+)}/g;function zR(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Zr(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],f=e[o];if(Z_(u)&&Z_(f)){if(!Zr(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Z_(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Bl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function ql(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function BR(i,e){const n=new qR(i,e);return n.subscribe.bind(n)}class qR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");HR(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Im),o.error===void 0&&(o.error=Im),o.complete===void 0&&(o.complete=Im);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HR(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Im(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(i){return i&&i._delegate?i._delegate:i}class Ws{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new RR;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($R(e))try{this.getOrInitializeService({instanceIdentifier:Qs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qs){return this.instances.has(e)}getOptions(e=Qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&e(f,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:GR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Qs){return this.component?this.component.multipleInstances?e:Qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GR(i){return i===Qs?void 0:i}function $R(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Pe||(Pe={}));const QR={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},YR=Pe.INFO,XR={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},WR=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=XR[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sp{constructor(e){this.name=e,this._logLevel=YR,this._logHandler=WR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const ZR=(i,e)=>e.some(n=>i instanceof n);let J_,e0;function JR(){return J_||(J_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ex(){return e0||(e0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iT=new WeakMap,qm=new WeakMap,rT=new WeakMap,Cm=new WeakMap,Ap=new WeakMap;function tx(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(Kr(i.result)),o()},f=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&iT.set(n,i)}).catch(()=>{}),Ap.set(e,i),e}function nx(i){if(qm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});qm.set(i,e)}let Hm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return qm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||rT.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function ix(i){Hm=i(Hm)}function rx(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Nm(this),e,...n);return rT.set(s,e.sort?e.sort():[e]),Kr(s)}:ex().includes(i)?function(...e){return i.apply(Nm(this),e),Kr(iT.get(this))}:function(...e){return Kr(i.apply(Nm(this),e))}}function sx(i){return typeof i=="function"?rx(i):(i instanceof IDBTransaction&&nx(i),ZR(i,JR())?new Proxy(i,Hm):i)}function Kr(i){if(i instanceof IDBRequest)return tx(i);if(Cm.has(i))return Cm.get(i);const e=sx(i);return e!==i&&(Cm.set(i,e),Ap.set(e,i)),e}const Nm=i=>Ap.get(i);function ax(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),m=Kr(f);return s&&f.addEventListener("upgradeneeded",p=>{s(Kr(f.result),p.oldVersion,p.newVersion,Kr(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const ox=["get","getKey","getAll","getAllKeys","count"],lx=["put","add","delete","clear"],Dm=new Map;function t0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Dm.get(e))return Dm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=lx.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||ox.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return Dm.set(e,u),u}ix(i=>({...i,get:(e,n,s)=>t0(e,n)||i.get(e,n,s),has:(e,n)=>!!t0(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cx(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function cx(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fm="@firebase/app",n0="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new Sp("@firebase/app"),hx="@firebase/app-compat",fx="@firebase/analytics-compat",dx="@firebase/analytics",mx="@firebase/app-check-compat",px="@firebase/app-check",gx="@firebase/auth",yx="@firebase/auth-compat",vx="@firebase/database",_x="@firebase/data-connect",Ex="@firebase/database-compat",Tx="@firebase/functions",bx="@firebase/functions-compat",wx="@firebase/installations",Sx="@firebase/installations-compat",Ax="@firebase/messaging",Rx="@firebase/messaging-compat",xx="@firebase/performance",Ix="@firebase/performance-compat",Cx="@firebase/remote-config",Nx="@firebase/remote-config-compat",Dx="@firebase/storage",Ox="@firebase/storage-compat",kx="@firebase/firestore",Mx="@firebase/vertexai",Vx="@firebase/firestore-compat",Px="firebase",Ux="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="[DEFAULT]",Lx={[Fm]:"fire-core",[hx]:"fire-core-compat",[dx]:"fire-analytics",[fx]:"fire-analytics-compat",[px]:"fire-app-check",[mx]:"fire-app-check-compat",[gx]:"fire-auth",[yx]:"fire-auth-compat",[vx]:"fire-rtdb",[_x]:"fire-data-connect",[Ex]:"fire-rtdb-compat",[Tx]:"fire-fn",[bx]:"fire-fn-compat",[wx]:"fire-iid",[Sx]:"fire-iid-compat",[Ax]:"fire-fcm",[Rx]:"fire-fcm-compat",[xx]:"fire-perf",[Ix]:"fire-perf-compat",[Cx]:"fire-rc",[Nx]:"fire-rc-compat",[Dx]:"fire-gcs",[Ox]:"fire-gcs-compat",[kx]:"fire-fst",[Vx]:"fire-fst-compat",[Mx]:"fire-vertex","fire-js":"fire-js",[Px]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Map,jx=new Map,$m=new Map;function i0(i,e){try{i.container.addComponent(e)}catch(n){ar.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function oo(i){const e=i.name;if($m.has(e))return ar.debug(`There were multiple attempts to register component ${e}.`),!1;$m.set(e,i);for(const n of bh.values())i0(n,i);for(const n of jx.values())i0(n,i);return!0}function Rp(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Fn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qr=new du("app","Firebase",zx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=Ux;function sT(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Gm,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw Qr.create("bad-app-name",{appName:String(o)});if(n||(n=tT()),!n)throw Qr.create("no-options");const u=bh.get(o);if(u){if(Zr(n,u.options)&&Zr(s,u.config))return u;throw Qr.create("duplicate-app",{appName:o})}const f=new KR(o);for(const p of $m.values())f.addComponent(p);const m=new Bx(n,s,f);return bh.set(o,m),m}function aT(i=Gm){const e=bh.get(i);if(!e&&i===Gm&&tT())return sT();if(!e)throw Qr.create("no-app",{appName:i});return e}function Yr(i,e,n){var s;let o=(s=Lx[i])!==null&&s!==void 0?s:i;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ar.warn(m.join(" "));return}oo(new Ws(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="firebase-heartbeat-database",Hx=1,eu="firebase-heartbeat-store";let Om=null;function oT(){return Om||(Om=ax(qx,Hx,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(eu)}catch(n){console.warn(n)}}}}).catch(i=>{throw Qr.create("idb-open",{originalErrorMessage:i.message})})),Om}async function Fx(i){try{const n=(await oT()).transaction(eu),s=await n.objectStore(eu).get(lT(i));return await n.done,s}catch(e){if(e instanceof fr)ar.warn(e.message);else{const n=Qr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ar.warn(n.message)}}}async function r0(i,e){try{const s=(await oT()).transaction(eu,"readwrite");await s.objectStore(eu).put(e,lT(i)),await s.done}catch(n){if(n instanceof fr)ar.warn(n.message);else{const s=Qr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ar.warn(s.message)}}}function lT(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=1024,$x=30;class Kx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Yx(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=s0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>$x){const f=Xx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ar.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=s0(),{heartbeatsToSend:s,unsentEntries:o}=Qx(this._heartbeatsCache.heartbeats),u=Th(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return ar.warn(n),""}}}function s0(){return new Date().toISOString().substring(0,10)}function Qx(i,e=Gx){const n=[];let s=i.slice();for(const o of i){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),a0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),a0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Yx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VR()?PR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Fx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return r0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return r0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function a0(i){return Th(JSON.stringify({version:2,heartbeats:i})).length}function Xx(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(i){oo(new Ws("platform-logger",e=>new ux(e),"PRIVATE")),oo(new Ws("heartbeat",e=>new Kx(e),"PRIVATE")),Yr(Fm,n0,i),Yr(Fm,n0,"esm2017"),Yr("fire-js","")}Wx("");var o0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xr,uT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,R){function I(){}I.prototype=R.prototype,V.D=R.prototype,V.prototype=new I,V.prototype.constructor=V,V.C=function(x,D,P){for(var N=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)N[ge-2]=arguments[ge];return R.prototype[D].apply(x,N)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(V,R,I){I||(I=0);var x=Array(16);if(typeof R=="string")for(var D=0;16>D;++D)x[D]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(D=0;16>D;++D)x[D]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=V.g[0],I=V.g[1],D=V.g[2];var P=V.g[3],N=R+(P^I&(D^P))+x[0]+3614090360&4294967295;R=I+(N<<7&4294967295|N>>>25),N=P+(D^R&(I^D))+x[1]+3905402710&4294967295,P=R+(N<<12&4294967295|N>>>20),N=D+(I^P&(R^I))+x[2]+606105819&4294967295,D=P+(N<<17&4294967295|N>>>15),N=I+(R^D&(P^R))+x[3]+3250441966&4294967295,I=D+(N<<22&4294967295|N>>>10),N=R+(P^I&(D^P))+x[4]+4118548399&4294967295,R=I+(N<<7&4294967295|N>>>25),N=P+(D^R&(I^D))+x[5]+1200080426&4294967295,P=R+(N<<12&4294967295|N>>>20),N=D+(I^P&(R^I))+x[6]+2821735955&4294967295,D=P+(N<<17&4294967295|N>>>15),N=I+(R^D&(P^R))+x[7]+4249261313&4294967295,I=D+(N<<22&4294967295|N>>>10),N=R+(P^I&(D^P))+x[8]+1770035416&4294967295,R=I+(N<<7&4294967295|N>>>25),N=P+(D^R&(I^D))+x[9]+2336552879&4294967295,P=R+(N<<12&4294967295|N>>>20),N=D+(I^P&(R^I))+x[10]+4294925233&4294967295,D=P+(N<<17&4294967295|N>>>15),N=I+(R^D&(P^R))+x[11]+2304563134&4294967295,I=D+(N<<22&4294967295|N>>>10),N=R+(P^I&(D^P))+x[12]+1804603682&4294967295,R=I+(N<<7&4294967295|N>>>25),N=P+(D^R&(I^D))+x[13]+4254626195&4294967295,P=R+(N<<12&4294967295|N>>>20),N=D+(I^P&(R^I))+x[14]+2792965006&4294967295,D=P+(N<<17&4294967295|N>>>15),N=I+(R^D&(P^R))+x[15]+1236535329&4294967295,I=D+(N<<22&4294967295|N>>>10),N=R+(D^P&(I^D))+x[1]+4129170786&4294967295,R=I+(N<<5&4294967295|N>>>27),N=P+(I^D&(R^I))+x[6]+3225465664&4294967295,P=R+(N<<9&4294967295|N>>>23),N=D+(R^I&(P^R))+x[11]+643717713&4294967295,D=P+(N<<14&4294967295|N>>>18),N=I+(P^R&(D^P))+x[0]+3921069994&4294967295,I=D+(N<<20&4294967295|N>>>12),N=R+(D^P&(I^D))+x[5]+3593408605&4294967295,R=I+(N<<5&4294967295|N>>>27),N=P+(I^D&(R^I))+x[10]+38016083&4294967295,P=R+(N<<9&4294967295|N>>>23),N=D+(R^I&(P^R))+x[15]+3634488961&4294967295,D=P+(N<<14&4294967295|N>>>18),N=I+(P^R&(D^P))+x[4]+3889429448&4294967295,I=D+(N<<20&4294967295|N>>>12),N=R+(D^P&(I^D))+x[9]+568446438&4294967295,R=I+(N<<5&4294967295|N>>>27),N=P+(I^D&(R^I))+x[14]+3275163606&4294967295,P=R+(N<<9&4294967295|N>>>23),N=D+(R^I&(P^R))+x[3]+4107603335&4294967295,D=P+(N<<14&4294967295|N>>>18),N=I+(P^R&(D^P))+x[8]+1163531501&4294967295,I=D+(N<<20&4294967295|N>>>12),N=R+(D^P&(I^D))+x[13]+2850285829&4294967295,R=I+(N<<5&4294967295|N>>>27),N=P+(I^D&(R^I))+x[2]+4243563512&4294967295,P=R+(N<<9&4294967295|N>>>23),N=D+(R^I&(P^R))+x[7]+1735328473&4294967295,D=P+(N<<14&4294967295|N>>>18),N=I+(P^R&(D^P))+x[12]+2368359562&4294967295,I=D+(N<<20&4294967295|N>>>12),N=R+(I^D^P)+x[5]+4294588738&4294967295,R=I+(N<<4&4294967295|N>>>28),N=P+(R^I^D)+x[8]+2272392833&4294967295,P=R+(N<<11&4294967295|N>>>21),N=D+(P^R^I)+x[11]+1839030562&4294967295,D=P+(N<<16&4294967295|N>>>16),N=I+(D^P^R)+x[14]+4259657740&4294967295,I=D+(N<<23&4294967295|N>>>9),N=R+(I^D^P)+x[1]+2763975236&4294967295,R=I+(N<<4&4294967295|N>>>28),N=P+(R^I^D)+x[4]+1272893353&4294967295,P=R+(N<<11&4294967295|N>>>21),N=D+(P^R^I)+x[7]+4139469664&4294967295,D=P+(N<<16&4294967295|N>>>16),N=I+(D^P^R)+x[10]+3200236656&4294967295,I=D+(N<<23&4294967295|N>>>9),N=R+(I^D^P)+x[13]+681279174&4294967295,R=I+(N<<4&4294967295|N>>>28),N=P+(R^I^D)+x[0]+3936430074&4294967295,P=R+(N<<11&4294967295|N>>>21),N=D+(P^R^I)+x[3]+3572445317&4294967295,D=P+(N<<16&4294967295|N>>>16),N=I+(D^P^R)+x[6]+76029189&4294967295,I=D+(N<<23&4294967295|N>>>9),N=R+(I^D^P)+x[9]+3654602809&4294967295,R=I+(N<<4&4294967295|N>>>28),N=P+(R^I^D)+x[12]+3873151461&4294967295,P=R+(N<<11&4294967295|N>>>21),N=D+(P^R^I)+x[15]+530742520&4294967295,D=P+(N<<16&4294967295|N>>>16),N=I+(D^P^R)+x[2]+3299628645&4294967295,I=D+(N<<23&4294967295|N>>>9),N=R+(D^(I|~P))+x[0]+4096336452&4294967295,R=I+(N<<6&4294967295|N>>>26),N=P+(I^(R|~D))+x[7]+1126891415&4294967295,P=R+(N<<10&4294967295|N>>>22),N=D+(R^(P|~I))+x[14]+2878612391&4294967295,D=P+(N<<15&4294967295|N>>>17),N=I+(P^(D|~R))+x[5]+4237533241&4294967295,I=D+(N<<21&4294967295|N>>>11),N=R+(D^(I|~P))+x[12]+1700485571&4294967295,R=I+(N<<6&4294967295|N>>>26),N=P+(I^(R|~D))+x[3]+2399980690&4294967295,P=R+(N<<10&4294967295|N>>>22),N=D+(R^(P|~I))+x[10]+4293915773&4294967295,D=P+(N<<15&4294967295|N>>>17),N=I+(P^(D|~R))+x[1]+2240044497&4294967295,I=D+(N<<21&4294967295|N>>>11),N=R+(D^(I|~P))+x[8]+1873313359&4294967295,R=I+(N<<6&4294967295|N>>>26),N=P+(I^(R|~D))+x[15]+4264355552&4294967295,P=R+(N<<10&4294967295|N>>>22),N=D+(R^(P|~I))+x[6]+2734768916&4294967295,D=P+(N<<15&4294967295|N>>>17),N=I+(P^(D|~R))+x[13]+1309151649&4294967295,I=D+(N<<21&4294967295|N>>>11),N=R+(D^(I|~P))+x[4]+4149444226&4294967295,R=I+(N<<6&4294967295|N>>>26),N=P+(I^(R|~D))+x[11]+3174756917&4294967295,P=R+(N<<10&4294967295|N>>>22),N=D+(R^(P|~I))+x[2]+718787259&4294967295,D=P+(N<<15&4294967295|N>>>17),N=I+(P^(D|~R))+x[9]+3951481745&4294967295,V.g[0]=V.g[0]+R&4294967295,V.g[1]=V.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,V.g[2]=V.g[2]+D&4294967295,V.g[3]=V.g[3]+P&4294967295}s.prototype.u=function(V,R){R===void 0&&(R=V.length);for(var I=R-this.blockSize,x=this.B,D=this.h,P=0;P<R;){if(D==0)for(;P<=I;)o(this,V,P),P+=this.blockSize;if(typeof V=="string"){for(;P<R;)if(x[D++]=V.charCodeAt(P++),D==this.blockSize){o(this,x),D=0;break}}else for(;P<R;)if(x[D++]=V[P++],D==this.blockSize){o(this,x),D=0;break}}this.h=D,this.o+=R},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var R=1;R<V.length-8;++R)V[R]=0;var I=8*this.o;for(R=V.length-8;R<V.length;++R)V[R]=I&255,I/=256;for(this.u(V),V=Array(16),R=I=0;4>R;++R)for(var x=0;32>x;x+=8)V[I++]=this.g[R]>>>x&255;return V};function u(V,R){var I=m;return Object.prototype.hasOwnProperty.call(I,V)?I[V]:I[V]=R(V)}function f(V,R){this.h=R;for(var I=[],x=!0,D=V.length-1;0<=D;D--){var P=V[D]|0;x&&P==R||(I[D]=P,x=!1)}this.g=I}var m={};function p(V){return-128<=V&&128>V?u(V,function(R){return new f([R|0],0>R?-1:0)}):new f([V|0],0>V?-1:0)}function g(V){if(isNaN(V)||!isFinite(V))return b;if(0>V)return G(g(-V));for(var R=[],I=1,x=0;V>=I;x++)R[x]=V/I|0,I*=4294967296;return new f(R,0)}function _(V,R){if(V.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(V.charAt(0)=="-")return G(_(V.substring(1),R));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=g(Math.pow(R,8)),x=b,D=0;D<V.length;D+=8){var P=Math.min(8,V.length-D),N=parseInt(V.substring(D,D+P),R);8>P?(P=g(Math.pow(R,P)),x=x.j(P).add(g(N))):(x=x.j(I),x=x.add(g(N)))}return x}var b=p(0),S=p(1),M=p(16777216);i=f.prototype,i.m=function(){if(Y(this))return-G(this).m();for(var V=0,R=1,I=0;I<this.g.length;I++){var x=this.i(I);V+=(0<=x?x:4294967296+x)*R,R*=4294967296}return V},i.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(k(this))return"0";if(Y(this))return"-"+G(this).toString(V);for(var R=g(Math.pow(V,6)),I=this,x="";;){var D=pe(I,R).g;I=$(I,D.j(R));var P=((0<I.g.length?I.g[0]:I.h)>>>0).toString(V);if(I=D,k(I))return P+x;for(;6>P.length;)P="0"+P;x=P+x}},i.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function k(V){if(V.h!=0)return!1;for(var R=0;R<V.g.length;R++)if(V.g[R]!=0)return!1;return!0}function Y(V){return V.h==-1}i.l=function(V){return V=$(this,V),Y(V)?-1:k(V)?0:1};function G(V){for(var R=V.g.length,I=[],x=0;x<R;x++)I[x]=~V.g[x];return new f(I,~V.h).add(S)}i.abs=function(){return Y(this)?G(this):this},i.add=function(V){for(var R=Math.max(this.g.length,V.g.length),I=[],x=0,D=0;D<=R;D++){var P=x+(this.i(D)&65535)+(V.i(D)&65535),N=(P>>>16)+(this.i(D)>>>16)+(V.i(D)>>>16);x=N>>>16,P&=65535,N&=65535,I[D]=N<<16|P}return new f(I,I[I.length-1]&-2147483648?-1:0)};function $(V,R){return V.add(G(R))}i.j=function(V){if(k(this)||k(V))return b;if(Y(this))return Y(V)?G(this).j(G(V)):G(G(this).j(V));if(Y(V))return G(this.j(G(V)));if(0>this.l(M)&&0>V.l(M))return g(this.m()*V.m());for(var R=this.g.length+V.g.length,I=[],x=0;x<2*R;x++)I[x]=0;for(x=0;x<this.g.length;x++)for(var D=0;D<V.g.length;D++){var P=this.i(x)>>>16,N=this.i(x)&65535,ge=V.i(D)>>>16,le=V.i(D)&65535;I[2*x+2*D]+=N*le,ae(I,2*x+2*D),I[2*x+2*D+1]+=P*le,ae(I,2*x+2*D+1),I[2*x+2*D+1]+=N*ge,ae(I,2*x+2*D+1),I[2*x+2*D+2]+=P*ge,ae(I,2*x+2*D+2)}for(x=0;x<R;x++)I[x]=I[2*x+1]<<16|I[2*x];for(x=R;x<2*R;x++)I[x]=0;return new f(I,0)};function ae(V,R){for(;(V[R]&65535)!=V[R];)V[R+1]+=V[R]>>>16,V[R]&=65535,R++}function te(V,R){this.g=V,this.h=R}function pe(V,R){if(k(R))throw Error("division by zero");if(k(V))return new te(b,b);if(Y(V))return R=pe(G(V),R),new te(G(R.g),G(R.h));if(Y(R))return R=pe(V,G(R)),new te(G(R.g),R.h);if(30<V.g.length){if(Y(V)||Y(R))throw Error("slowDivide_ only works with positive integers.");for(var I=S,x=R;0>=x.l(V);)I=he(I),x=he(x);var D=ve(I,1),P=ve(x,1);for(x=ve(x,2),I=ve(I,2);!k(x);){var N=P.add(x);0>=N.l(V)&&(D=D.add(I),P=N),x=ve(x,1),I=ve(I,1)}return R=$(V,D.j(R)),new te(D,R)}for(D=b;0<=V.l(R);){for(I=Math.max(1,Math.floor(V.m()/R.m())),x=Math.ceil(Math.log(I)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),P=g(I),N=P.j(R);Y(N)||0<N.l(V);)I-=x,P=g(I),N=P.j(R);k(P)&&(P=S),D=D.add(P),V=$(V,N)}return new te(D,V)}i.A=function(V){return pe(this,V).h},i.and=function(V){for(var R=Math.max(this.g.length,V.g.length),I=[],x=0;x<R;x++)I[x]=this.i(x)&V.i(x);return new f(I,this.h&V.h)},i.or=function(V){for(var R=Math.max(this.g.length,V.g.length),I=[],x=0;x<R;x++)I[x]=this.i(x)|V.i(x);return new f(I,this.h|V.h)},i.xor=function(V){for(var R=Math.max(this.g.length,V.g.length),I=[],x=0;x<R;x++)I[x]=this.i(x)^V.i(x);return new f(I,this.h^V.h)};function he(V){for(var R=V.g.length+1,I=[],x=0;x<R;x++)I[x]=V.i(x)<<1|V.i(x-1)>>>31;return new f(I,V.h)}function ve(V,R){var I=R>>5;R%=32;for(var x=V.g.length-I,D=[],P=0;P<x;P++)D[P]=0<R?V.i(P+I)>>>R|V.i(P+I+1)<<32-R:V.i(P+I);return new f(D,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,uT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=_,Xr=f}).apply(typeof o0<"u"?o0:typeof self<"u"?self:typeof window<"u"?window:{});var Wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cT,Hl,hT,ah,Km,fT,dT,mT;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,v){return c==Array.prototype||c==Object.prototype||(c[y]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wc=="object"&&Wc];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var v=s;c=c.split(".");for(var w=0;w<c.length-1;w++){var q=c[w];if(!(q in v))break e;v=v[q]}c=c[c.length-1],w=v[c],y=y(w),y!=w&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var v=0,w=!1,q={next:function(){if(!w&&v<c.length){var X=v++;return{value:y(X,c[X]),done:!1}}return w=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function _(c,y,v){return c.call.apply(c.bind,arguments)}function b(c,y,v){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,w),c.apply(y,q)}}return function(){return c.apply(y,arguments)}}function S(c,y,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:b,S.apply(null,arguments)}function M(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function k(c,y){function v(){}v.prototype=y.prototype,c.aa=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(w,q,X){for(var ce=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)ce[Le-2]=arguments[Le];return y.prototype[q].apply(w,ce)}}function Y(c){const y=c.length;if(0<y){const v=Array(y);for(let w=0;w<y;w++)v[w]=c[w];return v}return[]}function G(c,y){for(let v=1;v<arguments.length;v++){const w=arguments[v];if(p(w)){const q=c.length||0,X=w.length||0;c.length=q+X;for(let ce=0;ce<X;ce++)c[q+ce]=w[ce]}else c.push(w)}}class ${constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ae(c){return/^[\s\xa0]*$/.test(c)}function te(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function pe(c){return pe[" "](c),c}pe[" "]=function(){};var he=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function ve(c,y,v){for(const w in c)y.call(v,c[w],w,c)}function V(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function R(c){const y={};for(const v in c)y[v]=c[v];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,y){let v,w;for(let q=1;q<arguments.length;q++){w=arguments[q];for(v in w)c[v]=w[v];for(let X=0;X<I.length;X++)v=I[X],Object.prototype.hasOwnProperty.call(w,v)&&(c[v]=w[v])}}function D(c){var y=1;c=c.split(":");const v=[];for(;0<y&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function P(c){m.setTimeout(()=>{throw c},0)}function N(){var c=ue;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class ge{constructor(){this.h=this.g=null}add(y,v){const w=le.get();w.set(y,v),this.h?this.h.next=w:this.g=w,this.h=w}}var le=new $(()=>new j,c=>c.reset());class j{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let W,z=!1,ue=new ge,C=()=>{const c=m.Promise.resolve(void 0);W=()=>{c.then(Z)}};var Z=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(v){P(v)}var y=le;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}z=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var fe=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return c}();function be(c,y){if(se.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(he){e:{try{pe(y.nodeName);var q=!0;break e}catch{}q=!1}q||(y=null)}}else v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Te[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&be.aa.h.call(this)}}k(be,se);var Te={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var tt="closure_listenable_"+(1e6*Math.random()|0),qe=0;function Mt(c,y,v,w,q){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!w,this.ha=q,this.key=++qe,this.da=this.fa=!1}function at(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Vt(c){this.src=c,this.g={},this.h=0}Vt.prototype.add=function(c,y,v,w,q){var X=c.toString();c=this.g[X],c||(c=this.g[X]=[],this.h++);var ce=Nn(c,y,w,q);return-1<ce?(y=c[ce],v||(y.fa=!1)):(y=new Mt(y,this.src,X,!!w,q),y.fa=v,c.push(y)),y};function _n(c,y){var v=y.type;if(v in c.g){var w=c.g[v],q=Array.prototype.indexOf.call(w,y,void 0),X;(X=0<=q)&&Array.prototype.splice.call(w,q,1),X&&(at(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Nn(c,y,v,w){for(var q=0;q<c.length;++q){var X=c[q];if(!X.da&&X.listener==y&&X.capture==!!v&&X.ha==w)return q}return-1}var fs="closure_lm_"+(1e6*Math.random()|0),Co={};function Ru(c,y,v,w,q){if(Array.isArray(y)){for(var X=0;X<y.length;X++)Ru(c,y[X],v,w,q);return null}return v=xu(v),c&&c[tt]?c.K(y,v,g(w)?!!w.capture:!1,q):Dn(c,y,v,!1,w,q)}function Dn(c,y,v,w,q,X){if(!y)throw Error("Invalid event type");var ce=g(q)?!!q.capture:!!q,Le=oa(c);if(Le||(c[fs]=Le=new Vt(c)),v=Le.add(y,v,w,ce,X),v.proxy)return v;if(w=Ef(),v.proxy=w,w.src=c,w.listener=v,c.addEventListener)fe||(q=ce),q===void 0&&(q=!1),c.addEventListener(y.toString(),w,q);else if(c.attachEvent)c.attachEvent(ds(y.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ef(){function c(v){return y.call(c.src,c.listener,v)}const y=Tf;return c}function No(c,y,v,w,q){if(Array.isArray(y))for(var X=0;X<y.length;X++)No(c,y[X],v,w,q);else w=g(w)?!!w.capture:!!w,v=xu(v),c&&c[tt]?(c=c.i,y=String(y).toString(),y in c.g&&(X=c.g[y],v=Nn(X,v,w,q),-1<v&&(at(X[v]),Array.prototype.splice.call(X,v,1),X.length==0&&(delete c.g[y],c.h--)))):c&&(c=oa(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Nn(y,v,w,q)),(v=-1<c?y[c]:null)&&aa(v))}function aa(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[tt])_n(y.i,c);else{var v=c.type,w=c.proxy;y.removeEventListener?y.removeEventListener(v,w,c.capture):y.detachEvent?y.detachEvent(ds(v),w):y.addListener&&y.removeListener&&y.removeListener(w),(v=oa(y))?(_n(v,c),v.h==0&&(v.src=null,y[fs]=null)):at(c)}}}function ds(c){return c in Co?Co[c]:Co[c]="on"+c}function Tf(c,y){if(c.da)c=!0;else{y=new be(y,this);var v=c.listener,w=c.ha||c.src;c.fa&&aa(c),c=v.call(w,y)}return c}function oa(c){return c=c[fs],c instanceof Vt?c:null}var Do="__closure_events_fn_"+(1e9*Math.random()>>>0);function xu(c){return typeof c=="function"?c:(c[Do]||(c[Do]=function(y){return c.handleEvent(y)}),c[Do])}function ft(){oe.call(this),this.i=new Vt(this),this.M=this,this.F=null}k(ft,oe),ft.prototype[tt]=!0,ft.prototype.removeEventListener=function(c,y,v,w){No(this,c,y,v,w)};function Ke(c,y){var v,w=c.F;if(w)for(v=[];w;w=w.F)v.push(w);if(c=c.M,w=y.type||y,typeof y=="string")y=new se(y,c);else if(y instanceof se)y.target=y.target||c;else{var q=y;y=new se(w,c),x(y,q)}if(q=!0,v)for(var X=v.length-1;0<=X;X--){var ce=y.g=v[X];q=En(ce,w,!0,y)&&q}if(ce=y.g=c,q=En(ce,w,!0,y)&&q,q=En(ce,w,!1,y)&&q,v)for(X=0;X<v.length;X++)ce=y.g=v[X],q=En(ce,w,!1,y)&&q}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var v=c.g[y],w=0;w<v.length;w++)at(v[w]);delete c.g[y],c.h--}}this.F=null},ft.prototype.K=function(c,y,v,w){return this.i.add(String(c),y,!1,v,w)},ft.prototype.L=function(c,y,v,w){return this.i.add(String(c),y,!0,v,w)};function En(c,y,v,w){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var q=!0,X=0;X<y.length;++X){var ce=y[X];if(ce&&!ce.da&&ce.capture==v){var Le=ce.listener,It=ce.ha||ce.src;ce.fa&&_n(c.i,ce),q=Le.call(It,w)!==!1&&q}}return q&&!w.defaultPrevented}function Zt(c,y,v){if(typeof c=="function")v&&(c=S(c,v));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(c,y||0)}function Iu(c){c.g=Zt(()=>{c.g=null,c.i&&(c.i=!1,Iu(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class bf extends oe{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Iu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ms(c){oe.call(this),this.h=c,this.g={}}k(ms,oe);var ps=[];function gs(c){ve(c.g,function(y,v){this.g.hasOwnProperty(v)&&aa(y)},c),c.g={}}ms.prototype.N=function(){ms.aa.N.call(this),gs(this)},ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $n=m.JSON.stringify,la=m.JSON.parse,ys=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Oo(){}Oo.prototype.h=null;function ko(c){return c.h||(c.h=c.i())}function Mo(){}var xi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ii(){se.call(this,"d")}k(Ii,se);function Vo(){se.call(this,"c")}k(Vo,se);var ti={},Po=null;function dr(){return Po=Po||new ft}ti.La="serverreachability";function ua(c){se.call(this,ti.La,c)}k(ua,se);function mr(c){const y=dr();Ke(y,new ua(y))}ti.STAT_EVENT="statevent";function Cu(c,y){se.call(this,ti.STAT_EVENT,c),this.stat=y}k(Cu,se);function rt(c){const y=dr();Ke(y,new Cu(y,c))}ti.Ma="timingevent";function xt(c,y){se.call(this,ti.Ma,c),this.size=y}k(xt,se);function Et(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},y)}function On(){this.g=!0}On.prototype.xa=function(){this.g=!1};function Uo(c,y,v,w,q,X){c.info(function(){if(c.g)if(X)for(var ce="",Le=X.split("&"),It=0;It<Le.length;It++){var je=Le[It].split("=");if(1<je.length){var Ut=je[0];je=je[1];var Ct=Ut.split("_");ce=2<=Ct.length&&Ct[1]=="type"?ce+(Ut+"="+je+"&"):ce+(Ut+"=redacted&")}}else ce=null;else ce=X;return"XMLHTTP REQ ("+w+") [attempt "+q+"]: "+y+`
`+v+`
`+ce})}function wf(c,y,v,w,q,X,ce){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+q+"]: "+y+`
`+v+`
`+X+" "+ce})}function pr(c,y,v,w){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+vs(c,v)+(w?" "+w:"")})}function Nu(c,y){c.info(function(){return"TIMEOUT: "+y})}On.prototype.info=function(){};function vs(c,y){if(!c.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var w=v[c];if(!(2>w.length)){var q=w[1];if(Array.isArray(q)&&!(1>q.length)){var X=q[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ce=1;ce<q.length;ce++)q[ce]=""}}}}return $n(v)}catch{return y}}var gr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ci={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ni;function ii(){}k(ii,Oo),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},ni=new ii;function on(c,y,v,w){this.j=c,this.i=y,this.l=v,this.R=w||1,this.U=new ms(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pt}function pt(){this.i=null,this.g="",this.h=!1}var Lo={},ca={};function Kn(c,y,v){c.L=1,c.v=ws(Tn(y)),c.m=v,c.P=!0,Ni(c,null)}function Ni(c,y){c.F=Date.now(),_s(c),c.A=Tn(c.v);var v=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),Fo(v.i,"t",w),c.C=0,v=c.j.J,c.h=new pt,c.g=$u(c.j,v?y:null,!c.m),0<c.O&&(c.M=new bf(S(c.Y,c,c.g),c.O)),y=c.U,v=c.g,w=c.ca;var q="readystatechange";Array.isArray(q)||(q&&(ps[0]=q.toString()),q=ps);for(var X=0;X<q.length;X++){var ce=Ru(v,q[X],w||y.handleEvent,!1,y.h||y);if(!ce)break;y.g[ce.key]=ce}y=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),mr(),Uo(c.i,c.u,c.A,c.l,c.R,c.m)}on.prototype.ca=function(c){c=c.target;const y=this.M;y&&Pn(c)==3?y.j():this.Y(c)},on.prototype.Y=function(c){try{if(c==this.g)e:{const Ct=Pn(this.g);var y=this.g.Ba();const Li=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||Lu(this.g)))){this.J||Ct!=4||y==7||(y==8||0>=Li?mr(3):mr(2)),yr(this);var v=this.g.Z();this.X=v;t:if(Du(this)){var w=Lu(this.g);c="";var q=w.length,X=Pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qt(this),ri(this);var ce="";break t}this.h.i=new m.TextDecoder}for(y=0;y<q;y++)this.h.h=!0,c+=this.h.i.decode(w[y],{stream:!(X&&y==q-1)});w.length=0,this.h.g+=c,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=v==200,wf(this.i,this.u,this.A,this.l,this.R,Ct,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,It=this.g;if((Le=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ae(Le)){var je=Le;break t}}je=null}if(v=je)pr(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Es(this,v);else{this.o=!1,this.s=3,rt(12),qt(this),ri(this);break e}}if(this.P){v=!0;let Ht;for(;!this.J&&this.C<ce.length;)if(Ht=Ou(this,ce),Ht==ca){Ct==4&&(this.s=4,rt(14),v=!1),pr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ht==Lo){this.s=4,rt(15),pr(this.i,this.l,ce,"[Invalid Chunk]"),v=!1;break}else pr(this.i,this.l,Ht,null),Es(this,Ht);if(Du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||ce.length!=0||this.h.h||(this.s=1,rt(16),v=!1),this.o=this.o&&v,!v)pr(this.i,this.l,ce,"[Invalid Chunked Response]"),qt(this),ri(this);else if(0<ce.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Ds(Ut),Ut.M=!0,rt(11))}}else pr(this.i,this.l,ce,null),Es(this,ce);Ct==4&&qt(this),this.o&&!this.J&&(Ct==4?Hu(this.j,this):(this.o=!1,_s(this)))}else If(this.g),v==400&&0<ce.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),qt(this),ri(this)}}}catch{}finally{}};function Du(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Ou(c,y){var v=c.C,w=y.indexOf(`
`,v);return w==-1?ca:(v=Number(y.substring(v,w)),isNaN(v)?Lo:(w+=1,w+v>y.length?ca:(y=y.slice(w,w+v),c.C=w+v,y)))}on.prototype.cancel=function(){this.J=!0,qt(this)};function _s(c){c.S=Date.now()+c.I,ku(c,c.I)}function ku(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Et(S(c.ba,c),y)}function yr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}on.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Nu(this.i,this.A),this.L!=2&&(mr(),rt(17)),qt(this),this.s=2,ri(this)):ku(this,this.S-c)};function ri(c){c.j.G==0||c.J||Hu(c.j,c)}function qt(c){yr(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,gs(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Es(c,y){try{var v=c.j;if(v.G!=0&&(v.g==c||jo(v.h,c))){if(!c.K&&jo(v.h,c)&&v.G==3){try{var w=v.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var q=w;if(q[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)ba(v),Ea(v);else break e;Yo(v),rt(18)}}else v.za=q[1],0<v.za-v.T&&37500>q[2]&&v.F&&v.v==0&&!v.C&&(v.C=Et(S(v.Za,v),6e3));if(1>=fa(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ui(v,11)}else if((c.K||v.g==c)&&ba(v),!ae(y))for(q=v.Da.g.parse(y),y=0;y<q.length;y++){let je=q[y];if(v.T=je[0],je=je[1],v.G==2)if(je[0]=="c"){v.K=je[1],v.ia=je[2];const Ut=je[3];Ut!=null&&(v.la=Ut,v.j.info("VER="+v.la));const Ct=je[4];Ct!=null&&(v.Aa=Ct,v.j.info("SVER="+v.Aa));const Li=je[5];Li!=null&&typeof Li=="number"&&0<Li&&(w=1.5*Li,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const Ht=c.g;if(Ht){const hi=Ht.g?Ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hi){var X=w.h;X.g||hi.indexOf("spdy")==-1&&hi.indexOf("quic")==-1&&hi.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(da(X,X.h),X.h=null))}if(w.D){const Wo=Ht.g?Ht.g.getResponseHeader("X-HTTP-Session-Id"):null;Wo&&(w.ya=Wo,Xe(w.I,w.D,Wo))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var ce=c;if(w.qa=Gu(w,w.J?w.ia:null,w.W),ce.K){ln(w.h,ce);var Le=ce,It=w.L;It&&(Le.I=It),Le.B&&(yr(Le),_s(Le)),w.g=ce}else Bu(w);0<v.i.length&&Ta(v)}else je[0]!="stop"&&je[0]!="close"||Ui(v,7);else v.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?Ui(v,7):Ko(v):je[0]!="noop"&&v.l&&v.l.ta(je),v.v=0)}}mr(4)}catch{}}var Mu=class{constructor(c,y){this.g=c,this.map=y}};function Di(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ha(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function fa(c){return c.h?1:c.g?c.g.size:0}function jo(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function da(c,y){c.g?c.g.add(y):c.h=y}function ln(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Di.prototype.cancel=function(){if(this.i=zo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function zo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.D);return y}return Y(c.i)}function Sf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],v=c.length,w=0;w<v;w++)y.push(c[w]);return y}y=[],v=0;for(w in c)y[v++]=c[w];return y}function ma(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var v=0;v<c;v++)y.push(v);return y}y=[],v=0;for(const w in c)y[v++]=w;return y}}}function Bo(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var v=ma(c),w=Sf(c),q=w.length,X=0;X<q;X++)y.call(void 0,w[X],v&&v[X],c)}var Ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Af(c,y){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var w=c[v].indexOf("="),q=null;if(0<=w){var X=c[v].substring(0,w);q=c[v].substring(w+1)}else X=c[v];y(X,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Tt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Tt){this.h=c.h,bs(this,c.j),this.o=c.o,this.g=c.g,vr(this,c.s),this.l=c.l;var y=c.i,v=new ki;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Oi(this,v),this.m=c.m}else c&&(y=String(c).match(Ts))?(this.h=!1,bs(this,y[1]||"",!0),this.o=kn(y[2]||""),this.g=kn(y[3]||"",!0),vr(this,y[4]),this.l=kn(y[5]||"",!0),Oi(this,y[6]||"",!0),this.m=kn(y[7]||"")):(this.h=!1,this.i=new ki(null,this.h))}Tt.prototype.toString=function(){var c=[],y=this.j;y&&c.push(Ss(y,qo,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Ss(y,qo,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Ss(v,v.charAt(0)=="/"?Rf:Ho,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Ss(v,pa)),c.join("")};function Tn(c){return new Tt(c)}function bs(c,y,v){c.j=v?kn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function vr(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function Oi(c,y,v){y instanceof ki?(c.i=y,Pu(c.i,c.h)):(v||(y=Ss(y,xf)),c.i=new ki(y,c.h))}function Xe(c,y,v){c.i.set(y,v)}function ws(c){return Xe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function kn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ss(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,Vu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Vu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var qo=/[#\/\?@]/g,Ho=/[#\?:]/g,Rf=/[#\?]/g,xf=/[#\?@]/g,pa=/#/g;function ki(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Mn(c){c.g||(c.g=new Map,c.h=0,c.i&&Af(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}i=ki.prototype,i.add=function(c,y){Mn(this),this.i=null,c=si(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function Mi(c,y){Mn(c),y=si(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Vi(c,y){return Mn(c),y=si(c,y),c.g.has(y)}i.forEach=function(c,y){Mn(this),this.g.forEach(function(v,w){v.forEach(function(q){c.call(y,q,w,this)},this)},this)},i.na=function(){Mn(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let w=0;w<y.length;w++){const q=c[w];for(let X=0;X<q.length;X++)v.push(y[w])}return v},i.V=function(c){Mn(this);let y=[];if(typeof c=="string")Vi(this,c)&&(y=y.concat(this.g.get(si(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)y=y.concat(c[v])}return y},i.set=function(c,y){return Mn(this),this.i=null,c=si(this,c),Vi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function Fo(c,y,v){Mi(c,y),0<v.length&&(c.i=null,c.g.set(si(c,y),Y(v)),c.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var w=y[v];const X=encodeURIComponent(String(w)),ce=this.V(w);for(w=0;w<ce.length;w++){var q=X;ce[w]!==""&&(q+="="+encodeURIComponent(String(ce[w]))),c.push(q)}}return this.i=c.join("&")};function si(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Pu(c,y){y&&!c.j&&(Mn(c),c.i=null,c.g.forEach(function(v,w){var q=w.toLowerCase();w!=q&&(Mi(this,w),Fo(this,q,v))},c)),c.j=y}function As(c,y){const v=new On;if(m.Image){const w=new Image;w.onload=M(Vn,v,"TestLoadImage: loaded",!0,y,w),w.onerror=M(Vn,v,"TestLoadImage: error",!1,y,w),w.onabort=M(Vn,v,"TestLoadImage: abort",!1,y,w),w.ontimeout=M(Vn,v,"TestLoadImage: timeout",!1,y,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else y(!1)}function Qn(c,y){const v=new On,w=new AbortController,q=setTimeout(()=>{w.abort(),Vn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:w.signal}).then(X=>{clearTimeout(q),X.ok?Vn(v,"TestPingServer: ok",!0,y):Vn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Vn(v,"TestPingServer: error",!1,y)})}function Vn(c,y,v,w,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),w(v)}catch{}}function Rs(){this.g=new ys}function ai(c,y,v){const w=v||"";try{Bo(c,function(q,X){let ce=q;g(q)&&(ce=$n(q)),y.push(w+X+"="+encodeURIComponent(ce))})}catch(q){throw y.push(w+"type="+encodeURIComponent("_badmap")),q}}function _r(c){this.l=c.Ub||null,this.j=c.eb||!1}k(_r,Oo),_r.prototype.g=function(){return new Pi(this.l,this.j)},_r.prototype.i=function(c){return function(){return c}}({});function Pi(c,y){ft.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Pi,ft),i=Pi.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,li(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oi(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,li(this)),this.g&&(this.readyState=3,li(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Go(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Go(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?oi(this):li(this),this.readyState==3&&Go(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,oi(this))},i.Qa=function(c){this.g&&(this.response=c,oi(this))},i.ga=function(){this.g&&oi(this)};function oi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,li(c)}i.setRequestHeader=function(c,y){this.u.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function li(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Pi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function $o(c){let y="";return ve(c,function(v,w){y+=w,y+=":",y+=v,y+=`\r
`}),y}function Pt(c,y,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=$o(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):Xe(c,y,v))}function Ge(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Ge,ft);var ga=/^https?$/i,xs=["POST","PUT"];i=Ge.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,y,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ni.g(),this.v=this.o?ko(this.o):ko(ni),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(X){Uu(this,X);return}if(c=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var q in w)v.set(q,w[q]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const X of w.keys())v.set(X,w.get(X));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(X=>X.toLowerCase()=="content-type"),q=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(xs,y,void 0))||w||q||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ce]of v)this.g.setRequestHeader(X,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Is(this),this.u=!0,this.g.send(c),this.u=!1}catch(X){Uu(this,X)}};function Uu(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,ya(c),ui(c)}function ya(c){c.A||(c.A=!0,Ke(c,"complete"),Ke(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ke(this,"complete"),Ke(this,"abort"),ui(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ui(this,!0)),Ge.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?va(this):this.bb())},i.bb=function(){va(this)};function va(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Pn(c)!=4||c.Z()!=2)){if(c.u&&Pn(c)==4)Zt(c.Ea,0,c);else if(Ke(c,"readystatechange"),Pn(c)==4){c.h=!1;try{const ce=c.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var w;if(w=ce===0){var q=String(c.D).match(Ts)[1]||null;!q&&m.self&&m.self.location&&(q=m.self.location.protocol.slice(0,-1)),w=!ga.test(q?q.toLowerCase():"")}v=w}if(v)Ke(c,"complete"),Ke(c,"success");else{c.m=6;try{var X=2<Pn(c)?c.g.statusText:""}catch{X=""}c.l=X+" ["+c.Z()+"]",ya(c)}}finally{ui(c)}}}}function ui(c,y){if(c.g){Is(c);const v=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Ke(c,"ready");try{v.onreadystatechange=w}catch{}}}function Is(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function Pn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<Pn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),la(y)}};function Lu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function If(c){const y={};c=(c.g&&2<=Pn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(ae(c[w]))continue;var v=D(c[w]);const q=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const X=y[q]||[];y[q]=X,X.push(v)}V(y,function(w){return w.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cs(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function _a(c){this.Aa=0,this.i=[],this.j=new On,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cs("baseRetryDelayMs",5e3,c),this.cb=Cs("retryDelaySeedMs",1e4,c),this.Wa=Cs("forwardChannelMaxRetries",2,c),this.wa=Cs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Di(c&&c.concurrentRequestLimit),this.Da=new Rs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=_a.prototype,i.la=8,i.G=1,i.connect=function(c,y,v,w){rt(0),this.W=c,this.H=y||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=Gu(this,null,this.W),Ta(this)};function Ko(c){if(ju(c),c.G==3){var y=c.U++,v=Tn(c.I);if(Xe(v,"SID",c.K),Xe(v,"RID",y),Xe(v,"TYPE","terminate"),Ns(c,v),y=new on(c,c.j,y),y.L=2,y.v=ws(Tn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=$u(y.j,null),y.g.ea(y.v)),y.F=Date.now(),_s(y)}Fu(c)}function Ea(c){c.g&&(Ds(c),c.g.cancel(),c.g=null)}function ju(c){Ea(c),c.u&&(m.clearTimeout(c.u),c.u=null),ba(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Ta(c){if(!ha(c.h)&&!c.s){c.s=!0;var y=c.Ga;W||C(),z||(W(),z=!0),ue.add(y,c),c.B=0}}function Cf(c,y){return fa(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Et(S(c.Ga,c,y),Xo(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const q=new on(this,this.j,c);let X=this.o;if(this.S&&(X?(X=R(X),x(X,this.S)):X=this.S),this.m!==null||this.O||(q.H=X,X=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=zu(this,q,y),v=Tn(this.I),Xe(v,"RID",c),Xe(v,"CVER",22),this.D&&Xe(v,"X-HTTP-Session-Id",this.D),Ns(this,v),X&&(this.O?y="headers="+encodeURIComponent(String($o(X)))+"&"+y:this.m&&Pt(v,this.m,X)),da(this.h,q),this.Ua&&Xe(v,"TYPE","init"),this.P?(Xe(v,"$req",y),Xe(v,"SID","null"),q.T=!0,Kn(q,v,null)):Kn(q,v,y),this.G=2}}else this.G==3&&(c?Qo(this,c):this.i.length==0||ha(this.h)||Qo(this))};function Qo(c,y){var v;y?v=y.l:v=c.U++;const w=Tn(c.I);Xe(w,"SID",c.K),Xe(w,"RID",v),Xe(w,"AID",c.T),Ns(c,w),c.m&&c.o&&Pt(w,c.m,c.o),v=new on(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),y&&(c.i=y.D.concat(c.i)),y=zu(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),da(c.h,v),Kn(v,w,y)}function Ns(c,y){c.H&&ve(c.H,function(v,w){Xe(y,w,v)}),c.l&&Bo({},function(v,w){Xe(y,w,v)})}function zu(c,y,v){v=Math.min(c.i.length,v);var w=c.l?S(c.l.Na,c.l,c):null;e:{var q=c.i;let X=-1;for(;;){const ce=["count="+v];X==-1?0<v?(X=q[0].g,ce.push("ofs="+X)):X=0:ce.push("ofs="+X);let Le=!0;for(let It=0;It<v;It++){let je=q[It].g;const Ut=q[It].map;if(je-=X,0>je)X=Math.max(0,q[It].g-100),Le=!1;else try{ai(Ut,ce,"req"+je+"_")}catch{w&&w(Ut)}}if(Le){w=ce.join("&");break e}}}return c=c.i.splice(0,v),y.D=c,w}function Bu(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;W||C(),z||(W(),z=!0),ue.add(y,c),c.v=0}}function Yo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Et(S(c.Fa,c),Xo(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,qu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Et(S(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),Ea(this),qu(this))};function Ds(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function qu(c){c.g=new on(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=Tn(c.qa);Xe(y,"RID","rpc"),Xe(y,"SID",c.K),Xe(y,"AID",c.T),Xe(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&Xe(y,"TO",c.ja),Xe(y,"TYPE","xmlhttp"),Ns(c,y),c.m&&c.o&&Pt(y,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=ws(Tn(y)),v.m=null,v.P=!0,Ni(v,c)}i.Za=function(){this.C!=null&&(this.C=null,Ea(this),Yo(this),rt(19))};function ba(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Hu(c,y){var v=null;if(c.g==y){ba(c),Ds(c),c.g=null;var w=2}else if(jo(c.h,y))v=y.D,ln(c.h,y),w=1;else return;if(c.G!=0){if(y.o)if(w==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var q=c.B;w=dr(),Ke(w,new xt(w,v)),Ta(c)}else Bu(c);else if(q=y.s,q==3||q==0&&0<y.X||!(w==1&&Cf(c,y)||w==2&&Yo(c)))switch(v&&0<v.length&&(y=c.h,y.i=y.i.concat(v)),q){case 1:Ui(c,5);break;case 4:Ui(c,10);break;case 3:Ui(c,6);break;default:Ui(c,2)}}}function Xo(c,y){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*y}function Ui(c,y){if(c.j.info("Error code "+y),y==2){var v=S(c.fb,c),w=c.Xa;const q=!w;w=new Tt(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||bs(w,"https"),ws(w),q?As(w.toString(),v):Qn(w.toString(),v)}else rt(2);c.G=0,c.l&&c.l.sa(y),Fu(c),ju(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function Fu(c){if(c.G=0,c.ka=[],c.l){const y=zo(c.h);(y.length!=0||c.i.length!=0)&&(G(c.ka,y),G(c.ka,c.i),c.h.i.length=0,Y(c.i),c.i.length=0),c.l.ra()}}function Gu(c,y,v){var w=v instanceof Tt?Tn(v):new Tt(v);if(w.g!="")y&&(w.g=y+"."+w.g),vr(w,w.s);else{var q=m.location;w=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;var X=new Tt(null);w&&bs(X,w),y&&(X.g=y),q&&vr(X,q),v&&(X.l=v),w=X}return v=c.D,y=c.ya,v&&y&&Xe(w,v,y),Xe(w,"VER",c.la),Ns(c,w),w}function $u(c,y,v){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new Ge(new _r({eb:v})):new Ge(c.pa),y.Ha(c.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ku(){}i=Ku.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function wa(){}wa.prototype.g=function(c,y){return new un(c,y)};function un(c,y){ft.call(this),this.g=new _a(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!ae(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!ae(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new ci(this)}k(un,ft),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Ko(this.g)},un.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=$n(c),c=v);y.i.push(new Mu(y.Ya++,c)),y.G==3&&Ta(y)},un.prototype.N=function(){this.g.l=null,delete this.j,Ko(this.g),delete this.g,un.aa.N.call(this)};function Qu(c){Ii.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}k(Qu,Ii);function Yu(){Vo.call(this),this.status=1}k(Yu,Vo);function ci(c){this.g=c}k(ci,Ku),ci.prototype.ua=function(){Ke(this.g,"a")},ci.prototype.ta=function(c){Ke(this.g,new Qu(c))},ci.prototype.sa=function(c){Ke(this.g,new Yu)},ci.prototype.ra=function(){Ke(this.g,"b")},wa.prototype.createWebChannel=wa.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,mT=function(){return new wa},dT=function(){return dr()},fT=ti,Km={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gr.NO_ERROR=0,gr.TIMEOUT=8,gr.HTTP_ERROR=6,ah=gr,Ci.COMPLETE="complete",hT=Ci,Mo.EventType=xi,xi.OPEN="a",xi.CLOSE="b",xi.ERROR="c",xi.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Hl=Mo,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,cT=Ge}).apply(typeof Wc<"u"?Wc:typeof self<"u"?self:typeof window<"u"?window:{});const l0="@firebase/firestore",u0="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eo="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=new Sp("@firebase/firestore");function Za(){return Zs.logLevel}function de(i,...e){if(Zs.logLevel<=Pe.DEBUG){const n=e.map(xp);Zs.debug(`Firestore (${Eo}): ${i}`,...n)}}function or(i,...e){if(Zs.logLevel<=Pe.ERROR){const n=e.map(xp);Zs.error(`Firestore (${Eo}): ${i}`,...n)}}function lo(i,...e){if(Zs.logLevel<=Pe.WARN){const n=e.map(xp);Zs.warn(`Firestore (${Eo}): ${i}`,...n)}}function xp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(i="Unexpected state"){const e=`FIRESTORE (${Eo}) INTERNAL ASSERTION FAILED: `+i;throw or(e),new Error(e)}function $e(i,e){i||xe()}function Ce(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends fr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class Jx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eI{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new ir;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ir,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ir)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($e(typeof s.accessToken=="string"),new pT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new nn(e)}}class tI{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class nI{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new tI(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class c0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iI{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Fn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){$e(this.o===void 0);const s=u=>{u.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.R;return this.R=u.token,de("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new c0(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($e(typeof n.token=="string"),this.R=n.token,new c0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=rI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Oe(i,e){return i<e?-1:i>e?1:0}function Qm(i,e){let n=0;for(;n<i.length&&n<e.length;){const s=i.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return Oe(s,o);{const u=gT(),f=sI(u.encode(h0(i,n)),u.encode(h0(e,n)));return f!==0?f:Oe(s,o)}}n+=s>65535?2:1}return Oe(i.length,e.length)}function h0(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function sI(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return Oe(i[n],e[n]);return Oe(i.length,e.length)}function uo(i,e,n){return i.length===e.length&&i.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=-62135596800,d0=1e6;class Ot{static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*d0);return new Ot(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new me(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new me(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<f0)throw new me(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/d0}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-f0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new Ot(0,0))}static max(){return new Ie(new Ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="__name__";class yi{constructor(e,n,s){n===void 0?n=0:n>e.length&&xe(),s===void 0?s=e.length-n:s>e.length-n&&xe(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return yi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yi?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=yi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Oe(e.length,n.length)}static compareSegments(e,n){const s=yi.isNumericId(e),o=yi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?yi.extractNumericId(e).compare(yi.extractNumericId(n)):Qm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xr.fromString(e.substring(4,e.length-2))}}class it extends yi{construct(e,n,s){return new it(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new me(ie.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new it(n)}static emptyPath(){return new it([])}}const aI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends yi{construct(e,n,s){return new Yt(e,n,s)}static isValidIdentifier(e){return aI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===m0}static keyField(){return new Yt([m0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new me(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new me(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new me(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new me(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(n)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(it.fromString(e))}static fromName(e){return new Ee(it.fromString(e).popFirst(5))}static empty(){return new Ee(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return it.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new it(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=-1;function oI(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(s===1e9?new Ot(n+1,0):new Ot(n,s));return new Jr(o,Ee.empty(),e)}function lI(i){return new Jr(i.readTime,i.key,tu)}class Jr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Jr(Ie.min(),Ee.empty(),tu)}static max(){return new Jr(Ie.max(),Ee.empty(),tu)}}function uI(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(i.documentKey,e.documentKey),n!==0?n:Oe(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(i){if(i.code!==ie.FAILED_PRECONDITION||i.message!==cI)throw i;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):re.reject(n)}static resolve(e){return new re((n,s)=>{n(e)})}static reject(e){return new re((n,s)=>{s(e)})}static waitFor(e){return new re((n,s)=>{let o=0,u=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},p=>s(p))}),f=!0,u===o&&n()})}static or(e){let n=re.resolve(!1);for(const s of e)n=n.next(o=>o?re.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new re((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next(_=>{f[g]=_,++m,m===u&&s(f)},_=>o(_))}})}static doWhile(e,n){return new re((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function fI(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.oe(s),this._e=s=>n.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Gh.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=-1;function $h(i){return i==null}function wh(i){return i===0&&1/i==-1/0}function dI(i){return typeof i=="number"&&Number.isInteger(i)&&!wh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="";function mI(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=p0(e)),e=pI(i.get(n),e);return p0(e)}function pI(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case vT:n+="";break;default:n+=u}}return n}function p0(i){return i+vT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function as(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function _T(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){this.comparator=e,this.root=n||Qt.EMPTY}insert(e,n){return new ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zc(this.root,e,this.comparator,!0)}}class Zc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Qt.RED,this.left=o??Qt.EMPTY,this.right=u??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Qt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Qt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();const e=this.left.check();if(e!==this.right.check())throw xe();return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(e,n,s,o,u){return this}insert(e,n,s){return new Qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new y0(this.data.getIterator())}getIteratorFrom(e){return new y0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class y0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new Cn([])}unionWith(e){let n=new kt(Yt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new ET("Invalid base64 string: "+u):u}}(e);return new Xt(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new Xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const gI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(i){if($e(!!i),typeof i=="string"){let e=0;const n=gI.exec(i);if($e(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:_t(i.seconds),nanos:_t(i.nanos)}}function _t(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ts(i){return typeof i=="string"?Xt.fromBase64String(i):Xt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="server_timestamp",bT="__type__",wT="__previous_value__",ST="__local_write_time__";function Cp(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[bT])===null||n===void 0?void 0:n.stringValue)===TT}function Kh(i){const e=i.mapValue.fields[wT];return Cp(e)?Kh(e):e}function nu(i){const e=es(i.mapValue.fields[ST].timestampValue);return new Ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n,s,o,u,f,m,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g}}const Sh="(default)";class iu{constructor(e,n){this.projectId=e,this.database=n||Sh}static empty(){return new iu("","")}get isDefaultDatabase(){return this.database===Sh}isEqual(e){return e instanceof iu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="__type__",vI="__max__",Jc={mapValue:{}},RT="__vector__",Ah="value";function ns(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Cp(i)?4:EI(i)?9007199254740991:_I(i)?10:11:xe()}function wi(i,e){if(i===e)return!0;const n=ns(i);if(n!==ns(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return nu(i).isEqual(nu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=es(o.timestampValue),m=es(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,u){return ts(o.bytesValue).isEqual(ts(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return _t(o.geoPointValue.latitude)===_t(u.geoPointValue.latitude)&&_t(o.geoPointValue.longitude)===_t(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return _t(o.integerValue)===_t(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=_t(o.doubleValue),m=_t(u.doubleValue);return f===m?wh(f)===wh(m):isNaN(f)&&isNaN(m)}return!1}(i,e);case 9:return uo(i.arrayValue.values||[],e.arrayValue.values||[],wi);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(g0(f)!==g0(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!wi(f[p],m[p])))return!1;return!0}(i,e);default:return xe()}}function ru(i,e){return(i.values||[]).find(n=>wi(n,e))!==void 0}function co(i,e){if(i===e)return 0;const n=ns(i),s=ns(e);if(n!==s)return Oe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Oe(i.booleanValue,e.booleanValue);case 2:return function(u,f){const m=_t(u.integerValue||u.doubleValue),p=_t(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(i,e);case 3:return v0(i.timestampValue,e.timestampValue);case 4:return v0(nu(i),nu(e));case 5:return Qm(i.stringValue,e.stringValue);case 6:return function(u,f){const m=ts(u),p=ts(f);return m.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(u,f){const m=u.split("/"),p=f.split("/");for(let g=0;g<m.length&&g<p.length;g++){const _=Oe(m[g],p[g]);if(_!==0)return _}return Oe(m.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,f){const m=Oe(_t(u.latitude),_t(f.latitude));return m!==0?m:Oe(_t(u.longitude),_t(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return _0(i.arrayValue,e.arrayValue);case 10:return function(u,f){var m,p,g,_;const b=u.fields||{},S=f.fields||{},M=(m=b[Ah])===null||m===void 0?void 0:m.arrayValue,k=(p=S[Ah])===null||p===void 0?void 0:p.arrayValue,Y=Oe(((g=M==null?void 0:M.values)===null||g===void 0?void 0:g.length)||0,((_=k==null?void 0:k.values)===null||_===void 0?void 0:_.length)||0);return Y!==0?Y:_0(M,k)}(i.mapValue,e.mapValue);case 11:return function(u,f){if(u===Jc.mapValue&&f===Jc.mapValue)return 0;if(u===Jc.mapValue)return 1;if(f===Jc.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=f.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let b=0;b<p.length&&b<_.length;++b){const S=Qm(p[b],_[b]);if(S!==0)return S;const M=co(m[p[b]],g[_[b]]);if(M!==0)return M}return Oe(p.length,_.length)}(i.mapValue,e.mapValue);default:throw xe()}}function v0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Oe(i,e);const n=es(i),s=es(e),o=Oe(n.seconds,s.seconds);return o!==0?o:Oe(n.nanos,s.nanos)}function _0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=co(n[o],s[o]);if(u)return u}return Oe(n.length,s.length)}function ho(i){return Ym(i)}function Ym(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=es(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return ts(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return Ee.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Ym(u);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Ym(n.fields[f])}`;return o+"}"}(i.mapValue):xe()}function oh(i){switch(ns(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kh(i);return e?16+oh(e):16;case 5:return 2*i.stringValue.length;case 6:return ts(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+oh(u),0)}(i.arrayValue);case 10:case 11:return function(s){let o=0;return as(s.fields,(u,f)=>{o+=u.length+oh(f)}),o}(i.mapValue);default:throw xe()}}function E0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Xm(i){return!!i&&"integerValue"in i}function Np(i){return!!i&&"arrayValue"in i}function T0(i){return!!i&&"nullValue"in i}function b0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function lh(i){return!!i&&"mapValue"in i}function _I(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[AT])===null||n===void 0?void 0:n.stringValue)===RT}function Kl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return as(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Kl(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kl(i.arrayValue.values[n]);return e}return Object.assign({},i)}function EI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===vI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kl(n)}setAll(e){let n=Yt.emptyPath(),s={},o=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=Kl(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];lh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){as(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new yn(Kl(this.value))}}function xT(i){const e=[];return as(i.fields,(n,s)=>{const o=new Yt([n]);if(lh(s)){const u=xT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new rn(e,0,Ie.min(),Ie.min(),Ie.min(),yn.empty(),0)}static newFoundDocument(e,n,s,o){return new rn(e,1,n,Ie.min(),s,o,0)}static newNoDocument(e,n){return new rn(e,2,n,Ie.min(),Ie.min(),yn.empty(),0)}static newUnknownDocument(e,n){return new rn(e,3,n,Ie.min(),Ie.min(),yn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.position=e,this.inclusive=n}}function w0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?s=Ee.comparator(Ee.fromName(f.referenceValue),n.key):s=co(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function S0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!wi(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n="asc"){this.field=e,this.dir=n}}function TI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{}class At extends IT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new wI(e,n,s):n==="array-contains"?new RI(e,s):n==="in"?new xI(e,s):n==="not-in"?new II(e,s):n==="array-contains-any"?new CI(e,s):new At(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new SI(e,s):new AI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(co(n,this.value)):n!==null&&ns(this.value)===ns(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends IT{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Jn(e,n)}matches(e){return CT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function CT(i){return i.op==="and"}function NT(i){return bI(i)&&CT(i)}function bI(i){for(const e of i.filters)if(e instanceof Jn)return!1;return!0}function Wm(i){if(i instanceof At)return i.field.canonicalString()+i.op.toString()+ho(i.value);if(NT(i))return i.filters.map(e=>Wm(e)).join(",");{const e=i.filters.map(n=>Wm(n)).join(",");return`${i.op}(${e})`}}function DT(i,e){return i instanceof At?function(s,o){return o instanceof At&&s.op===o.op&&s.field.isEqual(o.field)&&wi(s.value,o.value)}(i,e):i instanceof Jn?function(s,o){return o instanceof Jn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,m)=>u&&DT(f,o.filters[m]),!0):!1}(i,e):void xe()}function OT(i){return i instanceof At?function(n){return`${n.field.canonicalString()} ${n.op} ${ho(n.value)}`}(i):i instanceof Jn?function(n){return n.op.toString()+" {"+n.getFilters().map(OT).join(" ,")+"}"}(i):"Filter"}class wI extends At{constructor(e,n,s){super(e,n,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class SI extends At{constructor(e,n){super(e,"in",n),this.keys=kT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class AI extends At{constructor(e,n){super(e,"not-in",n),this.keys=kT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kT(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Ee.fromName(s.referenceValue))}class RI extends At{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Np(n)&&ru(n.arrayValue,this.value)}}class xI extends At{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ru(this.value.arrayValue,n)}}class II extends At{constructor(e,n){super(e,"not-in",n)}matches(e){if(ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ru(this.value.arrayValue,n)}}class CI extends At{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Np(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ru(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.le=null}}function A0(i,e=null,n=[],s=[],o=null,u=null,f=null){return new NI(i,e,n,s,o,u,f)}function Dp(i){const e=Ce(i);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Wm(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),$h(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>ho(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>ho(s)).join(",")),e.le=n}return e.le}function Op(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!TI(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!DT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!S0(i.startAt,e.startAt)&&S0(i.endAt,e.endAt)}function Zm(i){return Ee.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function DI(i,e,n,s,o,u,f,m){return new wo(i,e,n,s,o,u,f,m)}function Qh(i){return new wo(i)}function R0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function MT(i){return i.collectionGroup!==null}function Ql(i){const e=Ce(i);if(e.he===null){e.he=[];const n=new Set;for(const u of e.explicitOrderBy)e.he.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new kt(Yt.comparator);return f.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.he.push(new su(u,s))}),n.has(Yt.keyField().canonicalString())||e.he.push(new su(Yt.keyField(),s))}return e.he}function vi(i){const e=Ce(i);return e.Pe||(e.Pe=OI(e,Ql(i))),e.Pe}function OI(i,e){if(i.limitType==="F")return A0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new su(o.field,u)});const n=i.endAt?new Rh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Rh(i.startAt.position,i.startAt.inclusive):null;return A0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Jm(i,e){const n=i.filters.concat([e]);return new wo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function ep(i,e,n){return new wo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Yh(i,e){return Op(vi(i),vi(e))&&i.limitType===e.limitType}function VT(i){return`${Dp(vi(i))}|lt:${i.limitType}`}function Ja(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>OT(o)).join(", ")}]`),$h(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>ho(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>ho(o)).join(",")),`Target(${s})`}(vi(i))}; limitType=${i.limitType})`}function Xh(i,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Ee.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(i,e)&&function(s,o){for(const u of Ql(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(i,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(i,e)&&function(s,o){return!(s.startAt&&!function(f,m,p){const g=w0(f,m,p);return f.inclusive?g<=0:g<0}(s.startAt,Ql(s),o)||s.endAt&&!function(f,m,p){const g=w0(f,m,p);return f.inclusive?g>=0:g>0}(s.endAt,Ql(s),o))}(i,e)}function kI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function PT(i){return(e,n)=>{let s=!1;for(const o of Ql(i)){const u=MI(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function MI(i,e,n){const s=i.field.isKeyField()?Ee.comparator(e.key,n.key):function(u,f,m){const p=f.data.field(u),g=m.data.field(u);return p!==null&&g!==null?co(p,g):xe()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return xe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){as(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return _T(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=new ct(Ee.comparator);function lr(){return VI}const UT=new ct(Ee.comparator);function Fl(...i){let e=UT;for(const n of i)e=e.insert(n.key,n);return e}function LT(i){let e=UT;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ys(){return Yl()}function jT(){return Yl()}function Yl(){return new na(i=>i.toString(),(i,e)=>i.isEqual(e))}const PI=new ct(Ee.comparator),UI=new kt(Ee.comparator);function Ue(...i){let e=UI;for(const n of i)e=e.add(n);return e}const LI=new kt(Oe);function jI(){return LI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wh(e)?"-0":e}}function zT(i){return{integerValue:""+i}}function zI(i,e){return dI(e)?zT(e):kp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this._=void 0}}function BI(i,e,n){return i instanceof au?function(o,u){const f={fields:{[bT]:{stringValue:TT},[ST]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Cp(u)&&(u=Kh(u)),u&&(f.fields[wT]=u),{mapValue:f}}(n,e):i instanceof fo?qT(i,e):i instanceof ou?HT(i,e):function(o,u){const f=BT(o,u),m=x0(f)+x0(o.Ie);return Xm(f)&&Xm(o.Ie)?zT(m):kp(o.serializer,m)}(i,e)}function qI(i,e,n){return i instanceof fo?qT(i,e):i instanceof ou?HT(i,e):n}function BT(i,e){return i instanceof xh?function(s){return Xm(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class au extends Wh{}class fo extends Wh{constructor(e){super(),this.elements=e}}function qT(i,e){const n=FT(e);for(const s of i.elements)n.some(o=>wi(o,s))||n.push(s);return{arrayValue:{values:n}}}class ou extends Wh{constructor(e){super(),this.elements=e}}function HT(i,e){let n=FT(e);for(const s of i.elements)n=n.filter(o=>!wi(o,s));return{arrayValue:{values:n}}}class xh extends Wh{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function x0(i){return _t(i.integerValue||i.doubleValue)}function FT(i){return Np(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,n){this.field=e,this.transform=n}}function HI(i,e){return i.field.isEqual(e.field)&&function(s,o){return s instanceof fo&&o instanceof fo||s instanceof ou&&o instanceof ou?uo(s.elements,o.elements,wi):s instanceof xh&&o instanceof xh?wi(s.Ie,o.Ie):s instanceof au&&o instanceof au}(i.transform,e.transform)}class FI{constructor(e,n){this.version=e,this.transformResults=n}}class Gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Zh{}function $T(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Mp(i.key,Gn.none()):new pu(i.key,i.data,Gn.none());{const n=i.data,s=yn.empty();let o=new kt(Yt.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new os(i.key,s,new Cn(o.toArray()),Gn.none())}}function GI(i,e,n){i instanceof pu?function(o,u,f){const m=o.value.clone(),p=C0(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(i,e,n):i instanceof os?function(o,u,f){if(!uh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=C0(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(KT(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(i,e,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Xl(i,e,n,s){return i instanceof pu?function(u,f,m,p){if(!uh(u.precondition,f))return m;const g=u.value.clone(),_=N0(u.fieldTransforms,p,f);return g.setAll(_),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null}(i,e,n,s):i instanceof os?function(u,f,m,p){if(!uh(u.precondition,f))return m;const g=N0(u.fieldTransforms,p,f),_=f.data;return _.setAll(KT(u)),_.setAll(g),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(b=>b.field))}(i,e,n,s):function(u,f,m){return uh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(i,e,n)}function $I(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=BT(s.transform,o||null);u!=null&&(n===null&&(n=yn.empty()),n.set(s.field,u))}return n||null}function I0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&uo(s,o,(u,f)=>HI(u,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class pu extends Zh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class os extends Zh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function KT(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function C0(i,e,n){const s=new Map;$e(i.length===n.length);for(let o=0;o<n.length;o++){const u=i[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,qI(f,m,n[o]))}return s}function N0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,f=n.data.field(o.field);s.set(o.field,BI(u,f,e))}return s}class Mp extends Zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KI extends Zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&GI(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Xl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Xl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=jT();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=$T(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(Ie.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ue())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,(n,s)=>I0(n,s))&&uo(this.baseMutations,e.baseMutations,(n,s)=>I0(n,s))}}class Vp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){$e(e.mutations.length===s.length);let o=function(){return PI}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Vp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,Be;function WI(i){switch(i){case ie.OK:return xe();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return xe()}}function QT(i){if(i===void 0)return or("GRPC error has no .code"),ie.UNKNOWN;switch(i){case St.OK:return ie.OK;case St.CANCELLED:return ie.CANCELLED;case St.UNKNOWN:return ie.UNKNOWN;case St.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case St.INTERNAL:return ie.INTERNAL;case St.UNAVAILABLE:return ie.UNAVAILABLE;case St.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case St.NOT_FOUND:return ie.NOT_FOUND;case St.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case St.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case St.ABORTED:return ie.ABORTED;case St.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case St.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case St.DATA_LOSS:return ie.DATA_LOSS;default:return xe()}}(Be=St||(St={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=new Xr([4294967295,4294967295],0);function D0(i){const e=gT().encode(i),n=new uT;return n.update(e),new Uint8Array(n.digest())}function O0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Xr([n,s],0),new Xr([o,u],0)]}class Pp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Gl(`Invalid padding: ${n}`);if(s<0)throw new Gl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Gl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Gl(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Xr.fromNumber(this.Ee)}Ae(e,n,s){let o=e.add(n.multiply(Xr.fromNumber(s)));return o.compare(ZI)===1&&(o=new Xr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=D0(e),[s,o]=O0(n);for(let u=0;u<this.hashCount;u++){const f=this.Ae(s,o,u);if(!this.Re(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Pp(u,o,n);return s.forEach(m=>f.insert(m)),f}insert(e){if(this.Ee===0)return;const n=D0(e),[s,o]=O0(n);for(let u=0;u<this.hashCount;u++){const f=this.Ae(s,o,u);this.Ve(f)}}Ve(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Gl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,gu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Jh(Ie.min(),o,new ct(Oe),lr(),Ue())}}class gu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new gu(s,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n,s,o){this.me=e,this.removedTargetIds=n,this.key=s,this.fe=o}}class YT{constructor(e,n){this.targetId=e,this.ge=n}}class XT{constructor(e,n,s=Xt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class k0{constructor(){this.pe=0,this.ye=M0(),this.we=Xt.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ue(),n=Ue(),s=Ue();return this.ye.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:xe()}}),new gu(this.we,this.Se,e,n,s)}Me(){this.be=!1,this.ye=M0()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,$e(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class JI{constructor(e){this.ke=e,this.qe=new Map,this.Qe=lr(),this.$e=eh(),this.Ue=eh(),this.Ke=new ct(Oe)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const s=this.He(n);switch(e.state){case 0:this.Je(n)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(n);break;case 3:this.Je(n)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),s.Ce(e.resumeToken));break;default:xe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((s,o)=>{this.Je(o)&&n(o)})}Ze(e){const n=e.targetId,s=e.ge.count,o=this.Xe(n);if(o){const u=o.target;if(Zm(u))if(s===0){const f=new Ee(u.path);this.ze(n,f,rn.newNoDocument(f,Ie.min()))}else $e(s===1);else{const f=this.et(n);if(f!==s){const m=this.tt(e),p=m?this.nt(m,e,f):1;if(p!==0){this.Ye(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,g)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=ts(s).toUint8Array()}catch(p){if(p instanceof ET)return lo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Pp(f,o,u)}catch(p){return lo(p instanceof Gl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.Ee===0?null:m}nt(e,n,s){return n.ge.count===s-this.st(e,n.targetId)?0:2}st(e,n){const s=this.ke.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const f=this.ke.it(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.ze(n,u,null),o++)}),o}ot(e){const n=new Map;this.qe.forEach((u,f)=>{const m=this.Xe(f);if(m){if(u.current&&Zm(m.target)){const p=new Ee(m.target.path);this._t(p).has(f)||this.ut(f,p)||this.ze(f,p,rn.newNoDocument(p,e))}u.ve&&(n.set(f,u.Fe()),u.Me())}});let s=Ue();this.Ue.forEach((u,f)=>{let m=!0;f.forEachWhile(p=>{const g=this.Xe(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.Qe.forEach((u,f)=>f.setReadTime(e));const o=new Jh(e,n,this.Ke,this.Qe,s);return this.Qe=lr(),this.$e=eh(),this.Ue=eh(),this.Ke=new ct(Oe),o}Ge(e,n){if(!this.Je(e))return;const s=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,s),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,s){if(!this.Je(e))return;const o=this.He(e);this.ut(e,n)?o.xe(n,1):o.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),s&&(this.Qe=this.Qe.insert(n,s))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new k0,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new kt(Oe),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new kt(Oe),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new k0),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function eh(){return new ct(Ee.comparator)}function M0(){return new ct(Ee.comparator)}const eC={asc:"ASCENDING",desc:"DESCENDING"},tC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nC={and:"AND",or:"OR"};class iC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tp(i,e){return i.useProto3Json||$h(e)?e:{value:e}}function Ih(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function rC(i,e){return Ih(i,e.toTimestamp())}function _i(i){return $e(!!i),Ie.fromTimestamp(function(n){const s=es(n);return new Ot(s.seconds,s.nanos)}(i))}function Up(i,e){return np(i,e).canonicalString()}function np(i,e){const n=function(o){return new it(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?n:n.child(e)}function ZT(i){const e=it.fromString(i);return $e(ib(e)),e}function ip(i,e){return Up(i.databaseId,e.path)}function km(i,e){const n=ZT(e);if(n.get(1)!==i.databaseId.projectId)throw new me(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new me(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ee(eb(n))}function JT(i,e){return Up(i.databaseId,e)}function sC(i){const e=ZT(i);return e.length===4?it.emptyPath():eb(e)}function rp(i){return new it(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function eb(i){return $e(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function V0(i,e,n){return{name:ip(i,e),fields:n.value.mapValue.fields}}function aC(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:xe()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,_){return g.useProto3Json?($e(_===void 0||typeof _=="string"),Xt.fromBase64String(_||"")):($e(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Xt.fromUint8Array(_||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(g){const _=g.code===void 0?ie.UNKNOWN:QT(g.code);return new me(_,g.message||"")}(f);n=new XT(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=km(i,s.document.name),u=_i(s.document.updateTime),f=s.document.createTime?_i(s.document.createTime):Ie.min(),m=new yn({mapValue:{fields:s.document.fields}}),p=rn.newFoundDocument(o,u,f,m),g=s.targetIds||[],_=s.removedTargetIds||[];n=new ch(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=km(i,s.document),u=s.readTime?_i(s.readTime):Ie.min(),f=rn.newNoDocument(o,u),m=s.removedTargetIds||[];n=new ch([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=km(i,s.document),u=s.removedTargetIds||[];n=new ch([],u,o,null)}else{if(!("filter"in e))return xe();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new XI(o,u),m=s.targetId;n=new YT(m,f)}}return n}function oC(i,e){let n;if(e instanceof pu)n={update:V0(i,e.key,e.value)};else if(e instanceof Mp)n={delete:ip(i,e.key)};else if(e instanceof os)n={update:V0(i,e.key,e.data),updateMask:gC(e.fieldMask)};else{if(!(e instanceof KI))return xe();n={verify:ip(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,f){const m=f.transform;if(m instanceof au)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof fo)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ou)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof xh)return{fieldPath:f.field.canonicalString(),increment:m.Ie};throw xe()}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:rC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:xe()}(i,e.precondition)),n}function lC(i,e){return i&&i.length>0?($e(e!==void 0),i.map(n=>function(o,u){let f=o.updateTime?_i(o.updateTime):_i(u);return f.isEqual(Ie.min())&&(f=_i(u)),new FI(f,o.transformResults||[])}(n,e))):[]}function uC(i,e){return{documents:[JT(i,e.path)]}}function cC(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=JT(i,o);const u=function(g){if(g.length!==0)return nb(Jn.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(g){if(g.length!==0)return g.map(_=>function(S){return{field:eo(S.field),direction:dC(S.dir)}}(_))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=tp(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ht:n,parent:o}}function hC(i){let e=sC(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){$e(s===1);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=function(b){const S=tb(b);return S instanceof Jn&&NT(S)?S.getFilters():[S]}(n.where));let f=[];n.orderBy&&(f=function(b){return b.map(S=>function(k){return new su(to(k.field),function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(S))}(n.orderBy));let m=null;n.limit&&(m=function(b){let S;return S=typeof b=="object"?b.value:b,$h(S)?null:S}(n.limit));let p=null;n.startAt&&(p=function(b){const S=!!b.before,M=b.values||[];return new Rh(M,S)}(n.startAt));let g=null;return n.endAt&&(g=function(b){const S=!b.before,M=b.values||[];return new Rh(M,S)}(n.endAt)),DI(e,o,f,u,m,"F",p,g)}function fC(i,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tb(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=to(n.unaryFilter.field);return At.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=to(n.unaryFilter.field);return At.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=to(n.unaryFilter.field);return At.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=to(n.unaryFilter.field);return At.create(f,"!=",{nullValue:"NULL_VALUE"});default:return xe()}}(i):i.fieldFilter!==void 0?function(n){return At.create(to(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xe()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Jn.create(n.compositeFilter.filters.map(s=>tb(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return xe()}}(n.compositeFilter.op))}(i):xe()}function dC(i){return eC[i]}function mC(i){return tC[i]}function pC(i){return nC[i]}function eo(i){return{fieldPath:i.canonicalString()}}function to(i){return Yt.fromServerFormat(i.fieldPath)}function nb(i){return i instanceof At?function(n){if(n.op==="=="){if(b0(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NAN"}};if(T0(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(b0(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NAN"}};if(T0(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eo(n.field),op:mC(n.op),value:n.value}}}(i):i instanceof Jn?function(n){const s=n.getFilters().map(o=>nb(o));return s.length===1?s[0]:{compositeFilter:{op:pC(n.op),filters:s}}}(i):xe()}function gC(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ib(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n,s,o,u=Ie.min(),f=Ie.min(),m=Xt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new $r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.Tt=e}}function vC(i){const e=hC({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?ep(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this.Tn=new EC}addToCollectionParentIndex(e,n){return this.Tn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(Jr.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(Jr.min())}updateCollectionGroup(e,n,s){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class EC{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new kt(it.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new kt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rb=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(rb,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new mo(0)}static Kn(){return new mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="LruGarbageCollector",TC=1048576;function L0([i,e],[n,s]){const o=Oe(i,n);return o===0?Oe(e,s):o}class bC{constructor(e){this.Hn=e,this.buffer=new kt(L0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();L0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class wC{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){de(U0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){bo(n)?de(U0,"Ignoring IndexedDB error during garbage collection: ",n):await To(n)}await this.er(3e5)})}}class SC{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return re.resolve(Gh.ae);const s=new bC(n);return this.tr.forEachTarget(e,o=>s.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>s.Zn(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.tr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(P0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),P0):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let s,o,u,f,m,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,f=Date.now(),this.nthSequenceNumber(e,o))).next(b=>(s=b,m=Date.now(),this.removeTargets(e,s,n))).next(b=>(u=b,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(b=>(g=Date.now(),Za()<=Pe.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${b} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b})))}}function AC(i,e){return new SC(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.changes=new na(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?re.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&Xl(s.mutation,o,Cn.empty(),Ot.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ue()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ue()){const o=Ys();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let f=Fl();return u.forEach((m,p)=>{f=f.insert(m,p.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=Ys();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ue()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,s,o){let u=lr();const f=Yl(),m=function(){return Yl()}();return n.forEach((p,g)=>{const _=s.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof os)?u=u.insert(g.key,g):_!==void 0?(f.set(g.key,_.mutation.getFieldMask()),Xl(_.mutation,g,_.mutation.getFieldMask(),Ot.now())):f.set(g.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,_)=>f.set(g,_)),n.forEach((g,_)=>{var b;return m.set(g,new xC(_,(b=f.get(g))!==null&&b!==void 0?b:null))}),m))}recalculateAndSaveOverlays(e,n){const s=Yl();let o=new ct((f,m)=>f-m),u=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let _=s.get(p)||Cn.empty();_=m.applyToLocalView(g,_),s.set(p,_);const b=(o.get(m.batchId)||Ue()).add(p);o=o.insert(m.batchId,b)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,_=p.value,b=jT();_.forEach(S=>{if(!u.has(S)){const M=$T(n.get(S),s.get(S));M!==null&&b.set(S,M),u=u.add(S)}}),f.push(this.documentOverlayCache.saveOverlays(e,g,b))}return re.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(f){return Ee.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):MT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):re.resolve(Ys());let m=tu,p=u;return f.next(g=>re.forEach(g,(_,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(_)?re.resolve():this.remoteDocumentCache.getEntry(e,_).next(S=>{p=p.insert(_,S)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,Ue())).next(_=>({batchId:m,changes:LT(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next(s=>{let o=Fl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Fl();return this.indexManager.getCollectionParents(e,u).next(m=>re.forEach(m,p=>{const g=function(b,S){return new wo(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(_=>{_.forEach((b,S)=>{f=f.insert(b,S)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(f=>{u.forEach((p,g)=>{const _=g.getKey();f.get(_)===null&&(f=f.insert(_,rn.newInvalidDocument(_)))});let m=Fl();return f.forEach((p,g)=>{const _=u.get(p);_!==void 0&&Xl(_.mutation,g,Cn.empty(),Ot.now()),Xh(n,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return re.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:_i(o.createTime)}}(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(o){return{name:o.name,query:vC(o.bundledQuery),readTime:_i(o.readTime)}}(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.overlays=new ct(Ee.comparator),this.Rr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ys();return re.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.Et(e,n,u)}),re.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Rr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(s)),re.resolve()}getOverlaysForCollection(e,n,s){const o=Ys(),u=n.length+1,f=new Ee(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return re.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new ct((g,_)=>g-_);const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let _=u.get(g.largestBatchId);_===null&&(_=Ys(),u=u.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const m=Ys(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,_)=>m.set(g,_)),!(m.size()>=o)););return re.resolve(m)}Et(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Rr.get(o.largestBatchId).delete(s.key);this.Rr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new YI(n,s));let u=this.Rr.get(n);u===void 0&&(u=Ue(),this.Rr.set(n,u)),this.Rr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(){this.Vr=new kt(Bt.mr),this.gr=new kt(Bt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const s=new Bt(e,n);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.wr(new Bt(e,n))}Sr(e,n){e.forEach(s=>this.removeReference(s,n))}br(e){const n=new Ee(new it([])),s=new Bt(n,e),o=new Bt(n,e+1),u=[];return this.gr.forEachInRange([s,o],f=>{this.wr(f),u.push(f.key)}),u}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new Ee(new it([])),s=new Bt(n,e),o=new Bt(n,e+1);let u=Ue();return this.gr.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new Bt(e,0),s=this.Vr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Bt{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return Ee.comparator(e.key,n.key)||Oe(e.Cr,n.Cr)}static pr(e,n){return Oe(e.Cr,n.Cr)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new kt(Bt.mr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new QI(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Mr=this.Mr.add(new Bt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(f)}lookupMutationBatch(e,n){return re.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Nr(s),u=o<0?0:o;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Ip:this.Fr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Bt(n,0),o=new Bt(n,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([s,o],f=>{const m=this.Or(f.Cr);u.push(m)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new kt(Oe);return n.forEach(o=>{const u=new Bt(o,0),f=new Bt(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,f],m=>{s=s.add(m.Cr)})}),re.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Ee.isDocumentKey(u)||(u=u.child(""));const f=new Bt(new Ee(u),0);let m=new kt(Oe);return this.Mr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Cr)),!0)},f),re.resolve(this.Br(m))}Br(e){const n=[];return e.forEach(s=>{const o=this.Or(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){$e(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return re.forEach(n.mutations,o=>{const u=new Bt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,n){const s=new Bt(n,0),o=this.Mr.firstAfterOrEqual(s);return re.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.kr=e,this.docs=function(){return new ct(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.kr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return re.resolve(s?s.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let s=lr();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():rn.newInvalidDocument(o))}),re.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=lr();const f=n.path,m=new Ee(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||uI(lI(_),s)<=0||(o.has(_.key)||Xh(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return re.resolve(u)}getAllFromCollectionGroup(e,n,s,o){xe()}qr(e,n){return re.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new MC(this)}getSize(e){return re.resolve(this.size)}}class MC extends RC{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(s)}),re.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.persistence=e,this.Qr=new na(n=>Dp(n),Op),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Lp,this.targetCount=0,this.Kr=mo.Un()}forEachTarget(e,n){return this.Qr.forEach((s,o)=>n(o)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.$r&&(this.$r=n),re.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new mo(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.zn(n),re.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.Qr.forEach((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Qr.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),re.waitFor(u).next(()=>o)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const s=this.Qr.get(n)||null;return re.resolve(s)}addMatchingKeys(e,n,s){return this.Ur.yr(n,s),re.resolve()}removeMatchingKeys(e,n,s){this.Ur.Sr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),re.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ur.vr(n);return re.resolve(s)}containsKey(e,n){return re.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Gh(0),this.zr=!1,this.zr=!0,this.jr=new DC,this.referenceDelegate=e(this),this.Hr=new VC(this),this.indexManager=new _C,this.remoteDocumentCache=function(o){return new kC(o)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new yC(n),this.Yr=new CC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new NC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Wr[e.toKey()];return s||(s=new OC(n,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,s){de("MemoryPersistence","Starting transaction:",e);const o=new PC(this.Gr.next());return this.referenceDelegate.Zr(),s(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(e,n){return re.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,n)))}}class PC extends hI{constructor(e){super(),this.currentSequenceNumber=e}}class jp{constructor(e){this.persistence=e,this.ti=new Lp,this.ni=null}static ri(e){return new jp(e)}get ii(){if(this.ni)return this.ni;throw xe()}addReference(e,n,s){return this.ti.addReference(s,n),this.ii.delete(s.toString()),re.resolve()}removeReference(e,n,s){return this.ti.removeReference(s,n),this.ii.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),re.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(o=>this.ii.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.ii,s=>{const o=Ee.fromPath(s);return this.si(e,o).next(u=>{u||n.removeEntry(o,Ie.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(s=>{s?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return re.or([()=>re.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class Ch{constructor(e,n){this.persistence=e,this.oi=new na(s=>mI(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=AC(this,n)}static ri(e,n){return new Ch(e,n)}Zr(){}Xr(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}sr(e){let n=0;return this.rr(e,s=>{n++}).next(()=>n)}rr(e,n){return re.forEach(this.oi,(s,o)=>this.ar(e,s,o).next(u=>u?re.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(e,f=>this.ar(e,f,n).next(m=>{m||(s++,u.removeEntry(f,Ie.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),re.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=oh(e.data.value)),n}ar(e,n,s){return re.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.oi.get(n);return re.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Hi=s,this.Ji=o}static Yi(e,n){let s=Ue(),o=Ue();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new zp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return MR()?8:fI(an())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.rs(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.ss(e,n,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new UC;return this._s(e,n,f).next(m=>{if(u.result=m,this.Xi)return this.us(e,n,f,m.size)})}).next(()=>u.result)}us(e,n,s,o){return s.documentReadCount<this.es?(Za()<=Pe.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Ja(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),re.resolve()):(Za()<=Pe.DEBUG&&de("QueryEngine","Query:",Ja(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ts*o?(Za()<=Pe.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Ja(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vi(n))):re.resolve())}rs(e,n){if(R0(n))return re.resolve(null);let s=vi(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=ep(n,null,"F"),s=vi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const f=Ue(...u);return this.ns.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.cs(n,m);return this.ls(n,g,f,p.readTime)?this.rs(e,ep(n,null,"F")):this.hs(e,g,n,p)}))})))}ss(e,n,s,o){return R0(n)||o.isEqual(Ie.min())?re.resolve(null):this.ns.getDocuments(e,s).next(u=>{const f=this.cs(n,u);return this.ls(n,f,s,o)?re.resolve(null):(Za()<=Pe.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ja(n)),this.hs(e,f,n,oI(o,tu)).next(m=>m))})}cs(e,n){let s=new kt(PT(e));return n.forEach((o,u)=>{Xh(e,u)&&(s=s.add(u))}),s}ls(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(e,n,s){return Za()<=Pe.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Ja(n)),this.ns.getDocumentsMatchingQuery(e,n,Jr.min(),s)}hs(e,n,s,o){return this.ns.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="LocalStore",jC=3e8;class zC{constructor(e,n,s,o){this.persistence=e,this.Ps=n,this.serializer=o,this.Ts=new ct(Oe),this.Is=new na(u=>Dp(u),Op),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IC(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function BC(i,e,n,s){return new zC(i,e,n,s)}async function ab(i,e){const n=Ce(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.As(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],m=[];let p=Ue();for(const g of o){f.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of u){m.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return n.localDocuments.getDocuments(s,p).next(g=>({Rs:g,removedBatchIds:f,addedBatchIds:m}))})})}function qC(i,e){const n=Ce(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.ds.newChangeBuffer({trackRemovals:!0});return function(m,p,g,_){const b=g.batch,S=b.keys();let M=re.resolve();return S.forEach(k=>{M=M.next(()=>_.getEntry(p,k)).next(Y=>{const G=g.docVersions.get(k);$e(G!==null),Y.version.compareTo(G)<0&&(b.applyToRemoteDocument(Y,g),Y.isValidDocument()&&(Y.setReadTime(g.commitVersion),_.addEntry(Y)))})}),M.next(()=>m.mutationQueue.removeMutationBatch(p,b))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=Ue();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function ob(i){const e=Ce(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function HC(i,e){const n=Ce(i),s=e.snapshotVersion;let o=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.ds.newChangeBuffer({trackRemovals:!0});o=n.Ts;const m=[];e.targetChanges.forEach((_,b)=>{const S=o.get(b);if(!S)return;m.push(n.Hr.removeMatchingKeys(u,_.removedDocuments,b).next(()=>n.Hr.addMatchingKeys(u,_.addedDocuments,b)));let M=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(b)!==null?M=M.withResumeToken(Xt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):_.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(_.resumeToken,s)),o=o.insert(b,M),function(Y,G,$){return Y.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=jC?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(S,M,_)&&m.push(n.Hr.updateTargetData(u,M))});let p=lr(),g=Ue();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))}),m.push(FC(u,f,e.documentUpdates).next(_=>{p=_.Vs,g=_.fs})),!s.isEqual(Ie.min())){const _=n.Hr.getLastRemoteSnapshotVersion(u).next(b=>n.Hr.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(_)}return re.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(n.Ts=o,u))}function FC(i,e,n){let s=Ue(),o=Ue();return n.forEach(u=>s=s.add(u)),e.getEntries(i,s).next(u=>{let f=lr();return n.forEach((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Ie.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):de(Bp,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{Vs:f,fs:o}})}function GC(i,e){const n=Ce(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Ip),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function $C(i,e){const n=Ce(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Hr.getTargetData(s,e).next(u=>u?(o=u,re.resolve(o)):n.Hr.allocateTargetId(s).next(f=>(o=new $r(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Hr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ts.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(s.targetId,s),n.Is.set(e,s.targetId)),s})}async function sp(i,e,n){const s=Ce(i),o=s.Ts.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!bo(f))throw f;de(Bp,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ts=s.Ts.remove(e),s.Is.delete(o.target)}function j0(i,e,n){const s=Ce(i);let o=Ie.min(),u=Ue();return s.persistence.runTransaction("Execute query","readwrite",f=>function(p,g,_){const b=Ce(p),S=b.Is.get(_);return S!==void 0?re.resolve(b.Ts.get(S)):b.Hr.getTargetData(g,_)}(s,f,vi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(f,m.targetId).next(p=>{u=p})}).next(()=>s.Ps.getDocumentsMatchingQuery(f,e,n?o:Ie.min(),n?u:Ue())).next(m=>(KC(s,kI(e),m),{documents:m,gs:u})))}function KC(i,e,n){let s=i.Es.get(e)||Ie.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),i.Es.set(e,s)}class z0{constructor(){this.activeTargetIds=jI()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QC{constructor(){this.ho=new z0,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,s){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new z0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="ConnectivityMonitor";class q0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){de(B0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){de(B0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let th=null;function ap(){return th===null?th=function(){return 268435456+Math.round(2147483648*Math.random())}():th++,"0x"+th.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="RestConnection",XC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WC{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${s}/databases/${o}`,this.wo=this.databaseId.database===Sh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}So(e,n,s,o,u){const f=ap(),m=this.bo(e,n.toUriEncodedString());de(Mm,`Sending RPC '${e}' ${f}:`,m,s);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,o,u),this.vo(e,m,p,s).then(g=>(de(Mm,`Received RPC '${e}' ${f}: `,g),g),g=>{throw lo(Mm,`RPC '${e}' ${f} failed with error: `,g,"url: ",m,"request:",s),g})}Co(e,n,s,o,u,f){return this.So(e,n,s,o,u)}Do(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Eo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}bo(e,n){const s=XC[e];return`${this.po}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class JC extends WC{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,s,o){const u=ap();return new Promise((f,m)=>{const p=new cT;p.setWithCredentials(!0),p.listenOnce(hT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case ah.NO_ERROR:const _=p.getResponseJson();de(tn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),f(_);break;case ah.TIMEOUT:de(tn,`RPC '${e}' ${u} timed out`),m(new me(ie.DEADLINE_EXCEEDED,"Request time out"));break;case ah.HTTP_ERROR:const b=p.getStatus();if(de(tn,`RPC '${e}' ${u} failed with status:`,b,"response text:",p.getResponseText()),b>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const M=S==null?void 0:S.error;if(M&&M.status&&M.message){const k=function(G){const $=G.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf($)>=0?$:ie.UNKNOWN}(M.status);m(new me(k,M.message))}else m(new me(ie.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new me(ie.UNAVAILABLE,"Connection failed."));break;default:xe()}}finally{de(tn,`RPC '${e}' ${u} completed.`)}});const g=JSON.stringify(o);de(tn,`RPC '${e}' ${u} sending request:`,o),p.send(n,"POST",g,s,15)})}Wo(e,n,s){const o=ap(),u=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=mT(),m=dT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const _=u.join("");de(tn,`Creating RPC '${e}' stream ${o}: ${_}`,p);const b=f.createWebChannel(_,p);let S=!1,M=!1;const k=new ZC({Fo:G=>{M?de(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,G):(S||(de(tn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),S=!0),de(tn,`RPC '${e}' stream ${o} sending:`,G),b.send(G))},Mo:()=>b.close()}),Y=(G,$,ae)=>{G.listen($,te=>{try{ae(te)}catch(pe){setTimeout(()=>{throw pe},0)}})};return Y(b,Hl.EventType.OPEN,()=>{M||(de(tn,`RPC '${e}' stream ${o} transport opened.`),k.Qo())}),Y(b,Hl.EventType.CLOSE,()=>{M||(M=!0,de(tn,`RPC '${e}' stream ${o} transport closed`),k.Uo())}),Y(b,Hl.EventType.ERROR,G=>{M||(M=!0,lo(tn,`RPC '${e}' stream ${o} transport errored:`,G),k.Uo(new me(ie.UNAVAILABLE,"The operation could not be completed")))}),Y(b,Hl.EventType.MESSAGE,G=>{var $;if(!M){const ae=G.data[0];$e(!!ae);const te=ae,pe=(te==null?void 0:te.error)||(($=te[0])===null||$===void 0?void 0:$.error);if(pe){de(tn,`RPC '${e}' stream ${o} received error:`,pe);const he=pe.status;let ve=function(I){const x=St[I];if(x!==void 0)return QT(x)}(he),V=pe.message;ve===void 0&&(ve=ie.INTERNAL,V="Unknown error status: "+he+" with message "+pe.message),M=!0,k.Uo(new me(ve,V)),b.close()}else de(tn,`RPC '${e}' stream ${o} received:`,ae),k.Ko(ae)}}),Y(m,fT.STAT_EVENT,G=>{G.stat===Km.PROXY?de(tn,`RPC '${e}' stream ${o} detected buffering proxy`):G.stat===Km.NOPROXY&&de(tn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{k.$o()},0),k}}function Vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(i){return new iC(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Ti=e,this.timerId=n,this.Go=s,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),o=Math.max(0,n-s);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="PersistentStream";class ub{constructor(e,n,s,o,u,f,m,p){this.Ti=e,this.n_=s,this.r_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new lb(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(or(n.toString()),or("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.i_===n&&this.V_(s,o)},s=>{e(()=>{const o=new me(ie.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(o)})})}V_(e,n){const s=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{s(()=>this.m_(o))}),this.stream.onMessage(o=>{s(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return de(H0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(de(H0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class e2 extends ub{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=aC(this.serializer,e),s=function(u){if(!("targetChange"in u))return Ie.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ie.min():f.readTime?_i(f.readTime):Ie.min()}(e);return this.listener.p_(n,s)}y_(e){const n={};n.database=rp(this.serializer),n.addTarget=function(u,f){let m;const p=f.target;if(m=Zm(p)?{documents:uC(u,p)}:{query:cC(u,p).ht},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=WT(u,f.resumeToken);const g=tp(u,f.expectedCount);g!==null&&(m.expectedCount=g)}else if(f.snapshotVersion.compareTo(Ie.min())>0){m.readTime=Ih(u,f.snapshotVersion.toTimestamp());const g=tp(u,f.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const s=fC(this.serializer,e);s&&(n.labels=s),this.I_(n)}w_(e){const n={};n.database=rp(this.serializer),n.removeTarget=e,this.I_(n)}}class t2 extends ub{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return $e(!!e.streamToken),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){$e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=lC(e.writeResults,e.commitTime),s=_i(e.commitTime);return this.listener.v_(s,n)}C_(){const e={};e.database=rp(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>oC(this.serializer,s))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{}class i2 extends n2{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new me(ie.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.So(e,np(n,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(ie.UNKNOWN,u.toString())})}Co(e,n,s,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Co(e,np(n,s),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new me(ie.UNKNOWN,f.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class r2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(or(n),this.N_=!1):de("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="RemoteStore";class s2{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(f=>{s.enqueueAndForget(async()=>{ia(this)&&(de(Js,"Restarting streams for network reachability change."),await async function(p){const g=Ce(p);g.W_.add(4),await yu(g),g.j_.set("Unknown"),g.W_.delete(4),await tf(g)}(this))})}),this.j_=new r2(s,o)}}async function tf(i){if(ia(i))for(const e of i.G_)await e(!0)}async function yu(i){for(const e of i.G_)await e(!1)}function cb(i,e){const n=Ce(i);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),Gp(n)?Fp(n):So(n).c_()&&Hp(n,e))}function qp(i,e){const n=Ce(i),s=So(n);n.K_.delete(e),s.c_()&&hb(n,e),n.K_.size===0&&(s.c_()?s.P_():ia(n)&&n.j_.set("Unknown"))}function Hp(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}So(i).y_(e)}function hb(i,e){i.H_.Ne(e),So(i).w_(e)}function Fp(i){i.H_=new JI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.K_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),So(i).start(),i.j_.B_()}function Gp(i){return ia(i)&&!So(i).u_()&&i.K_.size>0}function ia(i){return Ce(i).W_.size===0}function fb(i){i.H_=void 0}async function a2(i){i.j_.set("Online")}async function o2(i){i.K_.forEach((e,n)=>{Hp(i,e)})}async function l2(i,e){fb(i),Gp(i)?(i.j_.q_(e),Fp(i)):i.j_.set("Unknown")}async function u2(i,e,n){if(i.j_.set("Online"),e instanceof XT&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.K_.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.K_.delete(m),o.H_.removeTarget(m))}(i,e)}catch(s){de(Js,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Nh(i,s)}else if(e instanceof ch?i.H_.We(e):e instanceof YT?i.H_.Ze(e):i.H_.je(e),!n.isEqual(Ie.min()))try{const s=await ob(i.localStore);n.compareTo(s)>=0&&await function(u,f){const m=u.H_.ot(f);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=u.K_.get(g);_&&u.K_.set(g,_.withResumeToken(p.resumeToken,f))}}),m.targetMismatches.forEach((p,g)=>{const _=u.K_.get(p);if(!_)return;u.K_.set(p,_.withResumeToken(Xt.EMPTY_BYTE_STRING,_.snapshotVersion)),hb(u,p);const b=new $r(_.target,p,g,_.sequenceNumber);Hp(u,b)}),u.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){de(Js,"Failed to raise snapshot:",s),await Nh(i,s)}}async function Nh(i,e,n){if(!bo(e))throw e;i.W_.add(1),await yu(i),i.j_.set("Offline"),n||(n=()=>ob(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{de(Js,"Retrying IndexedDB access"),await n(),i.W_.delete(1),await tf(i)})}function db(i,e){return e().catch(n=>Nh(i,n,e))}async function nf(i){const e=Ce(i),n=is(e);let s=e.U_.length>0?e.U_[e.U_.length-1].batchId:Ip;for(;c2(e);)try{const o=await GC(e.localStore,s);if(o===null){e.U_.length===0&&n.P_();break}s=o.batchId,h2(e,o)}catch(o){await Nh(e,o)}mb(e)&&pb(e)}function c2(i){return ia(i)&&i.U_.length<10}function h2(i,e){i.U_.push(e);const n=is(i);n.c_()&&n.S_&&n.b_(e.mutations)}function mb(i){return ia(i)&&!is(i).u_()&&i.U_.length>0}function pb(i){is(i).start()}async function f2(i){is(i).C_()}async function d2(i){const e=is(i);for(const n of i.U_)e.b_(n.mutations)}async function m2(i,e,n){const s=i.U_.shift(),o=Vp.from(s,e,n);await db(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await nf(i)}async function p2(i,e){e&&is(i).S_&&await async function(s,o){if(function(f){return WI(f)&&f!==ie.ABORTED}(o.code)){const u=s.U_.shift();is(s).h_(),await db(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await nf(s)}}(i,e),mb(i)&&pb(i)}async function F0(i,e){const n=Ce(i);n.asyncQueue.verifyOperationInProgress(),de(Js,"RemoteStore received new credentials");const s=ia(n);n.W_.add(3),await yu(n),s&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await tf(n)}async function g2(i,e){const n=Ce(i);e?(n.W_.delete(2),await tf(n)):e||(n.W_.add(2),await yu(n),n.j_.set("Unknown"))}function So(i){return i.J_||(i.J_=function(n,s,o){const u=Ce(n);return u.M_(),new e2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:a2.bind(null,i),No:o2.bind(null,i),Lo:l2.bind(null,i),p_:u2.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),Gp(i)?Fp(i):i.j_.set("Unknown")):(await i.J_.stop(),fb(i))})),i.J_}function is(i){return i.Y_||(i.Y_=function(n,s,o){const u=Ce(n);return u.M_(),new t2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:f2.bind(null,i),Lo:p2.bind(null,i),D_:d2.bind(null,i),v_:m2.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await nf(i)):(await i.Y_.stop(),i.U_.length>0&&(de(Js,`Stopping write stream with ${i.U_.length} pending writes`),i.U_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new $p(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kp(i,e){if(or("AsyncQueue",`${e}: ${i}`),bo(i))return new me(ie.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{static emptySet(e){return new io(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ee.comparator(n.key,s.key):(n,s)=>Ee.comparator(n.key,s.key),this.keyedMap=Fl(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new io;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(){this.Z_=new ct(Ee.comparator)}track(e){const n=e.doc.key,s=this.Z_.get(n);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(n):e.type===1&&s.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):xe():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class po{constructor(e,n,s,o,u,f,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new po(e,n,io.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class v2{constructor(){this.queries=$0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,s){const o=Ce(n),u=o.queries;o.queries=$0(),u.forEach((f,m)=>{for(const p of m.ta)p.onError(s)})})(this,new me(ie.ABORTED,"Firestore shutting down"))}}function $0(){return new na(i=>VT(i),Yh)}async function Qp(i,e){const n=Ce(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.na()&&e.ra()&&(s=2):(u=new y2,s=e.ra()?0:1);try{switch(s){case 0:u.ea=await n.onListen(o,!0);break;case 1:u.ea=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Kp(f,`Initialization of query '${Ja(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.ta.push(e),e.sa(n.onlineState),u.ea&&e.oa(u.ea)&&Xp(n)}async function Yp(i,e){const n=Ce(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.ta.indexOf(e);f>=0&&(u.ta.splice(f,1),u.ta.length===0?o=e.ra()?0:1:!u.na()&&e.ra()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function _2(i,e){const n=Ce(i);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.ta)m.oa(o)&&(s=!0);f.ea=o}}s&&Xp(n)}function E2(i,e,n){const s=Ce(i),o=s.queries.get(e);if(o)for(const u of o.ta)u.onError(n);s.queries.delete(e)}function Xp(i){i.ia.forEach(e=>{e.next()})}var op,K0;(K0=op||(op={}))._a="default",K0.Cache="cache";class Wp{constructor(e,n,s){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new po(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const s=n!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e){this.key=e}}class yb{constructor(e){this.key=e}}class T2{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ue(),this.mutatedKeys=Ue(),this.ya=PT(e),this.wa=new io(this.ya)}get Sa(){return this.fa}ba(e,n){const s=n?n.Da:new G0,o=n?n.wa:this.wa;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,b)=>{const S=o.get(_),M=Xh(this.query,b)?b:null,k=!!S&&this.mutatedKeys.has(S.key),Y=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let G=!1;S&&M?S.data.isEqual(M.data)?k!==Y&&(s.track({type:3,doc:M}),G=!0):this.va(S,M)||(s.track({type:2,doc:M}),G=!0,(p&&this.ya(M,p)>0||g&&this.ya(M,g)<0)&&(m=!0)):!S&&M?(s.track({type:0,doc:M}),G=!0):S&&!M&&(s.track({type:1,doc:S}),G=!0,(p||g)&&(m=!0)),G&&(M?(f=f.add(M),u=Y?u.add(_):u.delete(_)):(f=f.delete(_),u=u.delete(_)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),u=u.delete(_.key),s.track({type:1,doc:_})}return{wa:f,Da:s,ls:m,mutatedKeys:u}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const f=e.Da.X_();f.sort((_,b)=>function(M,k){const Y=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe()}};return Y(M)-Y(k)}(_.type,b.type)||this.ya(_.doc,b.doc)),this.Ca(s),o=o!=null&&o;const m=n&&!o?this.Fa():[],p=this.pa.size===0&&this.current&&!o?1:0,g=p!==this.ga;return this.ga=p,f.length!==0||g?{snapshot:new po(this.query,e.wa,u,f,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new G0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ue(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const n=[];return e.forEach(s=>{this.pa.has(s)||n.push(new yb(s))}),this.pa.forEach(s=>{e.has(s)||n.push(new gb(s))}),n}Oa(e){this.fa=e.gs,this.pa=Ue();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return po.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Zp="SyncEngine";class b2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class w2{constructor(e){this.key=e,this.Ba=!1}}class S2{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.La={},this.ka=new na(m=>VT(m),Yh),this.qa=new Map,this.Qa=new Set,this.$a=new ct(Ee.comparator),this.Ua=new Map,this.Ka=new Lp,this.Wa={},this.Ga=new Map,this.za=mo.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function A2(i,e,n=!0){const s=wb(i);let o;const u=s.ka.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await vb(s,e,n,!0),o}async function R2(i,e){const n=wb(i);await vb(n,e,!0,!1)}async function vb(i,e,n,s){const o=await $C(i.localStore,vi(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await x2(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&cb(i.remoteStore,o),m}async function x2(i,e,n,s,o){i.Ha=(b,S,M)=>async function(Y,G,$,ae){let te=G.view.ba($);te.ls&&(te=await j0(Y.localStore,G.query,!1).then(({documents:V})=>G.view.ba(V,te)));const pe=ae&&ae.targetChanges.get(G.targetId),he=ae&&ae.targetMismatches.get(G.targetId)!=null,ve=G.view.applyChanges(te,Y.isPrimaryClient,pe,he);return Y0(Y,G.targetId,ve.Ma),ve.snapshot}(i,b,S,M);const u=await j0(i.localStore,e,!0),f=new T2(e,u.gs),m=f.ba(u.documents),p=gu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),g=f.applyChanges(m,i.isPrimaryClient,p);Y0(i,n,g.Ma);const _=new b2(e,n,f);return i.ka.set(e,_),i.qa.has(n)?i.qa.get(n).push(e):i.qa.set(n,[e]),g.snapshot}async function I2(i,e,n){const s=Ce(i),o=s.ka.get(e),u=s.qa.get(o.targetId);if(u.length>1)return s.qa.set(o.targetId,u.filter(f=>!Yh(f,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await sp(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&qp(s.remoteStore,o.targetId),lp(s,o.targetId)}).catch(To)):(lp(s,o.targetId),await sp(s.localStore,o.targetId,!0))}async function C2(i,e){const n=Ce(i),s=n.ka.get(e),o=n.qa.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),qp(n.remoteStore,s.targetId))}async function N2(i,e,n){const s=U2(i);try{const o=await function(f,m){const p=Ce(f),g=Ot.now(),_=m.reduce((M,k)=>M.add(k.key),Ue());let b,S;return p.persistence.runTransaction("Locally write mutations","readwrite",M=>{let k=lr(),Y=Ue();return p.ds.getEntries(M,_).next(G=>{k=G,k.forEach(($,ae)=>{ae.isValidDocument()||(Y=Y.add($))})}).next(()=>p.localDocuments.getOverlayedDocuments(M,k)).next(G=>{b=G;const $=[];for(const ae of m){const te=$I(ae,b.get(ae.key).overlayedDocument);te!=null&&$.push(new os(ae.key,te,xT(te.value.mapValue),Gn.exists(!0)))}return p.mutationQueue.addMutationBatch(M,g,$,m)}).next(G=>{S=G;const $=G.applyToLocalDocumentSet(b,Y);return p.documentOverlayCache.saveOverlays(M,G.batchId,$)})}).then(()=>({batchId:S.batchId,changes:LT(b)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(f,m,p){let g=f.Wa[f.currentUser.toKey()];g||(g=new ct(Oe)),g=g.insert(m,p),f.Wa[f.currentUser.toKey()]=g}(s,o.batchId,n),await vu(s,o.changes),await nf(s.remoteStore)}catch(o){const u=Kp(o,"Failed to persist write");n.reject(u)}}async function _b(i,e){const n=Ce(i);try{const s=await HC(n.localStore,e);e.targetChanges.forEach((o,u)=>{const f=n.Ua.get(u);f&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.Ba=!0:o.modifiedDocuments.size>0?$e(f.Ba):o.removedDocuments.size>0&&($e(f.Ba),f.Ba=!1))}),await vu(n,s,e)}catch(s){await To(s)}}function Q0(i,e,n){const s=Ce(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.ka.forEach((u,f)=>{const m=f.view.sa(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const p=Ce(f);p.onlineState=m;let g=!1;p.queries.forEach((_,b)=>{for(const S of b.ta)S.sa(m)&&(g=!0)}),g&&Xp(p)}(s.eventManager,e),o.length&&s.La.p_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function D2(i,e,n){const s=Ce(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Ua.get(e),u=o&&o.key;if(u){let f=new ct(Ee.comparator);f=f.insert(u,rn.newNoDocument(u,Ie.min()));const m=Ue().add(u),p=new Jh(Ie.min(),new Map,new ct(Oe),f,m);await _b(s,p),s.$a=s.$a.remove(u),s.Ua.delete(e),Jp(s)}else await sp(s.localStore,e,!1).then(()=>lp(s,e,n)).catch(To)}async function O2(i,e){const n=Ce(i),s=e.batch.batchId;try{const o=await qC(n.localStore,e);Tb(n,s,null),Eb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await vu(n,o)}catch(o){await To(o)}}async function k2(i,e,n){const s=Ce(i);try{const o=await function(f,m){const p=Ce(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return p.mutationQueue.lookupMutationBatch(g,m).next(b=>($e(b!==null),_=b.keys(),p.mutationQueue.removeMutationBatch(g,b))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>p.localDocuments.getDocuments(g,_))})}(s.localStore,e);Tb(s,e,n),Eb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await vu(s,o)}catch(o){await To(o)}}function Eb(i,e){(i.Ga.get(e)||[]).forEach(n=>{n.resolve()}),i.Ga.delete(e)}function Tb(i,e,n){const s=Ce(i);let o=s.Wa[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Wa[s.currentUser.toKey()]=o}}function lp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.qa.get(e))i.ka.delete(s),n&&i.La.Ja(s,n);i.qa.delete(e),i.isPrimaryClient&&i.Ka.br(e).forEach(s=>{i.Ka.containsKey(s)||bb(i,s)})}function bb(i,e){i.Qa.delete(e.path.canonicalString());const n=i.$a.get(e);n!==null&&(qp(i.remoteStore,n),i.$a=i.$a.remove(e),i.Ua.delete(n),Jp(i))}function Y0(i,e,n){for(const s of n)s instanceof gb?(i.Ka.addReference(s.key,e),M2(i,s)):s instanceof yb?(de(Zp,"Document no longer in limbo: "+s.key),i.Ka.removeReference(s.key,e),i.Ka.containsKey(s.key)||bb(i,s.key)):xe()}function M2(i,e){const n=e.key,s=n.path.canonicalString();i.$a.get(n)||i.Qa.has(s)||(de(Zp,"New document in limbo: "+n),i.Qa.add(s),Jp(i))}function Jp(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const n=new Ee(it.fromString(e)),s=i.za.next();i.Ua.set(s,new w2(n)),i.$a=i.$a.insert(n,s),cb(i.remoteStore,new $r(vi(Qh(n.path)),s,"TargetPurposeLimboResolution",Gh.ae))}}async function vu(i,e,n){const s=Ce(i),o=[],u=[],f=[];s.ka.isEmpty()||(s.ka.forEach((m,p)=>{f.push(s.Ha(p,e,n).then(g=>{var _;if((g||n)&&s.isPrimaryClient){const b=g?!g.fromCache:(_=n==null?void 0:n.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;s.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(g){o.push(g);const b=zp.Yi(p.targetId,g);u.push(b)}}))}),await Promise.all(f),s.La.p_(o),await async function(p,g){const _=Ce(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>re.forEach(g,S=>re.forEach(S.Hi,M=>_.persistence.referenceDelegate.addReference(b,S.targetId,M)).next(()=>re.forEach(S.Ji,M=>_.persistence.referenceDelegate.removeReference(b,S.targetId,M)))))}catch(b){if(!bo(b))throw b;de(Bp,"Failed to update sequence numbers: "+b)}for(const b of g){const S=b.targetId;if(!b.fromCache){const M=_.Ts.get(S),k=M.snapshotVersion,Y=M.withLastLimboFreeSnapshotVersion(k);_.Ts=_.Ts.insert(S,Y)}}}(s.localStore,u))}async function V2(i,e){const n=Ce(i);if(!n.currentUser.isEqual(e)){de(Zp,"User change. New user:",e.toKey());const s=await ab(n.localStore,e);n.currentUser=e,function(u,f){u.Ga.forEach(m=>{m.forEach(p=>{p.reject(new me(ie.CANCELLED,f))})}),u.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await vu(n,s.Rs)}}function P2(i,e){const n=Ce(i),s=n.Ua.get(e);if(s&&s.Ba)return Ue().add(s.key);{let o=Ue();const u=n.qa.get(e);if(!u)return o;for(const f of u){const m=n.ka.get(f);o=o.unionWith(m.view.Sa)}return o}}function wb(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=_b.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D2.bind(null,e),e.La.p_=_2.bind(null,e.eventManager),e.La.Ja=E2.bind(null,e.eventManager),e}function U2(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=O2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k2.bind(null,e),e}class Dh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ef(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return BC(this.persistence,new LC,e.initialUser,this.serializer)}Xa(e){return new sb(jp.ri,this.serializer)}Za(e){return new QC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dh.provider={build:()=>new Dh};class L2 extends Dh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){$e(this.persistence.referenceDelegate instanceof Ch);const s=this.persistence.referenceDelegate.garbageCollector;return new wC(s,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new sb(s=>Ch.ri(s,n),this.serializer)}}class up{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Q0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=V2.bind(null,this.syncEngine),await g2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new v2}()}createDatastore(e){const n=ef(e.databaseInfo.databaseId),s=function(u){return new JC(u)}(e.databaseInfo);return function(u,f,m,p){return new i2(u,f,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,f,m){return new s2(s,o,u,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>Q0(this.syncEngine,n,0),function(){return q0.D()?new q0:new YC}())}createSyncEngine(e,n){return function(o,u,f,m,p,g,_){const b=new S2(o,u,f,m,p,g);return _&&(b.ja=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Ce(o);de(Js,"RemoteStore shutting down."),u.W_.add(5),await yu(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}up.provider={build:()=>new up};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):or("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="FirestoreClient";class j2{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=yT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{de(rs,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(de(rs,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Kp(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Pm(i,e){i.asyncQueue.verifyOperationInProgress(),de(rs,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async o=>{s.isEqual(o)||(await ab(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function X0(i,e){i.asyncQueue.verifyOperationInProgress();const n=await z2(i);de(rs,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>F0(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,o)=>F0(e.remoteStore,o)),i._onlineComponents=e}async function z2(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){de(rs,"Using user provided OfflineComponentProvider");try{await Pm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;lo("Error using user provided cache. Falling back to memory cache: "+n),await Pm(i,new Dh)}}else de(rs,"Using default OfflineComponentProvider"),await Pm(i,new L2(void 0));return i._offlineComponents}async function Sb(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(de(rs,"Using user provided OnlineComponentProvider"),await X0(i,i._uninitializedComponentsProvider._online)):(de(rs,"Using default OnlineComponentProvider"),await X0(i,new up))),i._onlineComponents}function B2(i){return Sb(i).then(e=>e.syncEngine)}async function Oh(i){const e=await Sb(i),n=e.eventManager;return n.onListen=A2.bind(null,e.syncEngine),n.onUnlisten=I2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=R2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=C2.bind(null,e.syncEngine),n}function q2(i,e,n={}){const s=new ir;return i.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,g){const _=new eg({next:S=>{_.su(),f.enqueueAndForget(()=>Yp(u,b));const M=S.docs.has(m);!M&&S.fromCache?g.reject(new me(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&S.fromCache&&p&&p.source==="server"?g.reject(new me(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),b=new Wp(Qh(m.path),_,{includeMetadataChanges:!0,Ta:!0});return Qp(u,b)}(await Oh(i),i.asyncQueue,e,n,s)),s.promise}function H2(i,e,n={}){const s=new ir;return i.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,g){const _=new eg({next:S=>{_.su(),f.enqueueAndForget(()=>Yp(u,b)),S.fromCache&&p.source==="server"?g.reject(new me(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),b=new Wp(m,_,{includeMetadataChanges:!0,Ta:!0});return Qp(u,b)}(await Oh(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(i,e,n){if(!n)throw new me(ie.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function F2(i,e,n,s){if(e===!0&&s===!0)throw new me(ie.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Z0(i){if(!Ee.isDocumentKey(i))throw new me(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function J0(i){if(Ee.isDocumentKey(i))throw new me(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function rf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":xe()}function vn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new me(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rf(i);throw new me(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="firestore.googleapis.com",eE=!0;class tE{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new me(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xb,this.ssl=eE}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:eE;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TC)throw new me(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}F2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ab((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sf{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Zx;switch(s.type){case"firstParty":return new nI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new me(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=W0.get(n);s&&(de("ComponentProvider","Removing Datastore"),W0.delete(n),s.terminate())}(this),Promise.resolve()}}function G2(i,e,n,s={}){var o;const u=(i=vn(i,sf))._getSettings(),f=Object.assign(Object.assign({},u),{emulatorOptions:i._getEmulatorOptions()}),m=`${e}:${n}`;u.host!==xb&&u.host!==m&&lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},u),{host:m,ssl:!1,emulatorOptions:s});if(!Zr(p,f)&&(i._setSettings(p),s.mockUserToken)){let g,_;if(typeof s.mockUserToken=="string")g=s.mockUserToken,_=nn.MOCK_USER;else{g=xR(s.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new me(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new nn(b)}i._authCredentials=new Jx(new pT(g,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ls(this.firestore,e,this._query)}}class sn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}}class Wr extends ls{constructor(e,n,s){super(e,n,Qh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new Ee(e))}withConverter(e){return new Wr(this.firestore,e,this._path)}}function ss(i,e,...n){if(i=Rt(i),Rb("collection","path",e),i instanceof sf){const s=it.fromString(e,...n);return J0(s),new Wr(i,null,s)}{if(!(i instanceof sn||i instanceof Wr))throw new me(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(it.fromString(e,...n));return J0(s),new Wr(i.firestore,null,s)}}function Wt(i,e,...n){if(i=Rt(i),arguments.length===1&&(e=yT.newId()),Rb("doc","path",e),i instanceof sf){const s=it.fromString(e,...n);return Z0(s),new sn(i,null,new Ee(s))}{if(!(i instanceof sn||i instanceof Wr))throw new me(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(it.fromString(e,...n));return Z0(s),new sn(i.firestore,i instanceof Wr?i.converter:null,new Ee(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="AsyncQueue";class iE{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new lb(this,"async_queue_retry"),this.Su=()=>{const s=Vm();s&&de(nE,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=e;const n=Vm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=Vm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new ir;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!bo(e))throw e;de(nE,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const o=function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m}(s);throw or("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.pu=!1,s))));return this.bu=n,n}enqueueAfterDelay(e,n,s){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const o=$p.createAndSchedule(this,e,n,s,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&xe()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}function rE(i){return function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(i,["next","error","complete"])}class ur extends sf{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new iE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iE(e),this._firestoreClient=void 0,await e}}}function $2(i,e){const n=typeof i=="object"?i:aT(),s=typeof i=="string"?i:Sh,o=Rp(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=AR("firestore");u&&G2(o,...u)}return o}function af(i){if(i._terminated)throw new me(ie.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||K2(i),i._firestoreClient}function K2(i){var e,n,s;const o=i._freezeSettings(),u=function(m,p,g,_){return new yI(m,p,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Ab(_.experimentalLongPollingOptions),_.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new j2(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this._byteString=e}static fromBase64String(e){try{return new go(Xt.fromBase64String(e))}catch(n){throw new me(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new go(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new me(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new me(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new me(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=/^__.*__$/;class Y2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,n,this.fieldTransforms):new pu(e,this.data,n,this.fieldTransforms)}}class Ib{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new os(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Cb(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe()}}class lf{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new lf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.$u(e),o}Uu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return kh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Cb(this.Lu)&&Q2.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class X2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ef(e)}ju(e,n,s,o=!1){return new lf({Lu:e,methodName:n,zu:s,path:Yt.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uf(i){const e=i._freezeSettings(),n=ef(i._databaseId);return new X2(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Nb(i,e,n,s,o,u={}){const f=i.ju(u.merge||u.mergeFields?2:0,e,n,o);sg("Data must be an object, but it was:",f,s);const m=Db(s,f);let p,g;if(u.merge)p=new Cn(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const _=[];for(const b of u.mergeFields){const S=cp(e,b,n);if(!f.contains(S))throw new me(ie.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);kb(_,S)||_.push(S)}p=new Cn(_),g=f.fieldTransforms.filter(b=>p.covers(b.field))}else p=null,g=f.fieldTransforms;return new Y2(new yn(m),p,g)}class cf extends _u{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cf}}function W2(i,e,n){return new lf({Lu:3,zu:e.settings.zu,methodName:i._methodName,Qu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ig extends _u{_toFieldTransform(e){return new GT(e.path,new au)}isEqual(e){return e instanceof ig}}class rg extends _u{constructor(e,n){super(e),this.Hu=n}_toFieldTransform(e){const n=W2(this,e,!0),s=this.Hu.map(u=>Ao(u,n)),o=new fo(s);return new GT(e.path,o)}isEqual(e){return e instanceof rg&&Zr(this.Hu,e.Hu)}}function Z2(i,e,n,s){const o=i.ju(1,e,n);sg("Data must be an object, but it was:",o,s);const u=[],f=yn.empty();as(s,(p,g)=>{const _=ag(e,p,n);g=Rt(g);const b=o.Uu(_);if(g instanceof cf)u.push(_);else{const S=Ao(g,b);S!=null&&(u.push(_),f.set(_,S))}});const m=new Cn(u);return new Ib(f,m,o.fieldTransforms)}function J2(i,e,n,s,o,u){const f=i.ju(1,e,n),m=[cp(e,s,n)],p=[o];if(u.length%2!=0)throw new me(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)m.push(cp(e,u[S])),p.push(u[S+1]);const g=[],_=yn.empty();for(let S=m.length-1;S>=0;--S)if(!kb(g,m[S])){const M=m[S];let k=p[S];k=Rt(k);const Y=f.Uu(M);if(k instanceof cf)g.push(M);else{const G=Ao(k,Y);G!=null&&(g.push(M),_.set(M,G))}}const b=new Cn(g);return new Ib(_,b,f.fieldTransforms)}function eN(i,e,n,s=!1){return Ao(n,i.ju(s?4:3,e))}function Ao(i,e){if(Ob(i=Rt(i)))return sg("Unsupported field value:",e,i),Db(i,e);if(i instanceof _u)return function(s,o){if(!Cb(o.Lu))throw o.Wu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const m of s){let p=Ao(m,o.Ku(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}}(i,e)}return function(s,o){if((s=Rt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return zI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Ot.fromDate(s);return{timestampValue:Ih(o.serializer,u)}}if(s instanceof Ot){const u=new Ot(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ih(o.serializer,u)}}if(s instanceof tg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof go)return{bytesValue:WT(o.serializer,s._byteString)};if(s instanceof sn){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Wu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Up(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ng)return function(f,m){return{mapValue:{fields:{[AT]:{stringValue:RT},[Ah]:{arrayValue:{values:f.toArray().map(g=>{if(typeof g!="number")throw m.Wu("VectorValues must only contain numeric values.");return kp(m.serializer,g)})}}}}}}(s,o);throw o.Wu(`Unsupported field value: ${rf(s)}`)}(i,e)}function Db(i,e){const n={};return _T(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):as(i,(s,o)=>{const u=Ao(o,e.qu(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function Ob(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ot||i instanceof tg||i instanceof go||i instanceof sn||i instanceof _u||i instanceof ng)}function sg(i,e,n){if(!Ob(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=rf(n);throw s==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+s)}}function cp(i,e,n){if((e=Rt(e))instanceof of)return e._internalPath;if(typeof e=="string")return ag(i,e);throw kh("Field path arguments must be of type string or ",i,!1,void 0,n)}const tN=new RegExp("[~\\*/\\[\\]]");function ag(i,e,n){if(e.search(tN)>=0)throw kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new of(...e.split("."))._internalPath}catch{throw kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function kh(i,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new me(ie.INVALID_ARGUMENT,m+i+p)}function kb(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nN extends Mb{data(){return super.data()}}function hf(i,e){return typeof e=="string"?ag(i,e):e instanceof of?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new me(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class og{}class Pb extends og{}function ff(i,e,...n){let s=[];e instanceof og&&s.push(e),s=s.concat(n),function(u){const f=u.filter(p=>p instanceof lg).length,m=u.filter(p=>p instanceof df).length;if(f>1||f>0&&m>0)throw new me(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)i=o._apply(i);return i}class df extends Pb{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new df(e,n,s)}_apply(e){const n=this._parse(e);return Lb(e._query,n),new ls(e.firestore,e.converter,Jm(e._query,n))}_parse(e){const n=uf(e.firestore);return function(u,f,m,p,g,_,b){let S;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new me(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){aE(b,_);const k=[];for(const Y of b)k.push(sE(p,u,Y));S={arrayValue:{values:k}}}else S=sE(p,u,b)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||aE(b,_),S=eN(m,f,b,_==="in"||_==="not-in");return At.create(g,_,S)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function iN(i,e,n){const s=e,o=hf("where",i);return df._create(o,s,n)}class lg extends og{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new lg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Jn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let f=o;const m=u.getFlattenedFilters();for(const p of m)Lb(f,p),f=Jm(f,p)}(e._query,n),new ls(e.firestore,e.converter,Jm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ug extends Pb{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ug(e,n)}_apply(e){const n=function(o,u,f){if(o.startAt!==null)throw new me(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new me(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new su(u,f)}(e._query,this._field,this._direction);return new ls(e.firestore,e.converter,function(o,u){const f=o.explicitOrderBy.concat([u]);return new wo(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function Ub(i,e="asc"){const n=e,s=hf("orderBy",i);return ug._create(s,n)}function sE(i,e,n){if(typeof(n=Rt(n))=="string"){if(n==="")throw new me(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!MT(e)&&n.indexOf("/")!==-1)throw new me(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(it.fromString(n));if(!Ee.isDocumentKey(s))throw new me(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return E0(i,new Ee(s))}if(n instanceof sn)return E0(i,n._key);throw new me(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rf(n)}.`)}function aE(i,e){if(!Array.isArray(i)||i.length===0)throw new me(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Lb(i,e){const n=function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new me(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rN{convertValue(e,n="none"){switch(ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return as(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[Ah].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(f=>_t(f.doubleValue));return new ng(u)}convertGeoPoint(e){return new tg(_t(e.latitude),_t(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Kh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(nu(e));default:return null}}convertTimestamp(e){const n=es(e);return new Ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=it.fromString(e);$e(ib(s));const o=new iu(s.get(1),s.get(3)),u=new Ee(s.popFirst(5));return o.isEqual(n)||or(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(i,e,n){let s;return s=i?i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zb extends Mb{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(hf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class hh extends zb{data(e={}){return super.data(e)}}class Bb{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new $l(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new hh(this._firestore,this._userDataWriter,s.key,s,new $l(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new me(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const p=new hh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new $l(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new hh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new $l(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return m.type!==0&&(g=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),_=f.indexOf(m.doc.key)),{type:sN(m.type),doc:p,oldIndex:g,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function sN(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(i){i=vn(i,sn);const e=vn(i.firestore,ur);return q2(af(e),i._key).then(n=>Gb(e,i,n))}class cg extends rN{constructor(e){super(),this.firestore=e}convertBytes(e){return new go(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,n)}}function qb(i){i=vn(i,ls);const e=vn(i.firestore,ur),n=af(e),s=new cg(e);return Vb(i._query),H2(n,i._query).then(o=>new Bb(e,s,i,o))}function Hb(i,e,n){i=vn(i,sn);const s=vn(i.firestore,ur),o=jb(i.converter,e);return pf(s,[Nb(uf(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,Gn.none())])}function Ro(i,e,n,...s){i=vn(i,sn);const o=vn(i.firestore,ur),u=uf(o);let f;return f=typeof(e=Rt(e))=="string"||e instanceof of?J2(u,"updateDoc",i._key,e,n,s):Z2(u,"updateDoc",i._key,e),pf(o,[f.toMutation(i._key,Gn.exists(!0))])}function hg(i){return pf(vn(i.firestore,ur),[new Mp(i._key,Gn.none())])}function fg(i,e){const n=vn(i.firestore,ur),s=Wt(i),o=jb(i.converter,e);return pf(n,[Nb(uf(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,Gn.exists(!1))]).then(()=>s)}function Fb(i,...e){var n,s,o;i=Rt(i);let u={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||rE(e[f])||(u=e[f],f++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(rE(e[f])){const b=e[f];e[f]=(n=b.next)===null||n===void 0?void 0:n.bind(b),e[f+1]=(s=b.error)===null||s===void 0?void 0:s.bind(b),e[f+2]=(o=b.complete)===null||o===void 0?void 0:o.bind(b)}let p,g,_;if(i instanceof sn)g=vn(i.firestore,ur),_=Qh(i._key.path),p={next:b=>{e[f]&&e[f](Gb(g,i,b))},error:e[f+1],complete:e[f+2]};else{const b=vn(i,ls);g=vn(b.firestore,ur),_=b._query;const S=new cg(g);p={next:M=>{e[f]&&e[f](new Bb(g,S,b,M))},error:e[f+1],complete:e[f+2]},Vb(i._query)}return function(S,M,k,Y){const G=new eg(Y),$=new Wp(M,G,k);return S.asyncQueue.enqueueAndForget(async()=>Qp(await Oh(S),$)),()=>{G.su(),S.asyncQueue.enqueueAndForget(async()=>Yp(await Oh(S),$))}}(af(g),_,m,p)}function pf(i,e){return function(s,o){const u=new ir;return s.asyncQueue.enqueueAndForget(async()=>N2(await B2(s),o,u)),u.promise}(af(i),e)}function Gb(i,e,n){const s=n.docs.get(e._key),o=new cg(i);return new zb(i,o,e._key,s,new $l(n.hasPendingWrites,n.fromCache),e.converter)}function $b(){return new ig("serverTimestamp")}function oE(...i){return new rg("arrayUnion",i)}(function(e,n=!0){(function(o){Eo=o})(_o),oo(new Ws("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new ur(new eI(s.getProvider("auth-internal")),new iI(f,s.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new me(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iu(g.options.projectId,_)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),Yr(l0,u0,e),Yr(l0,u0,"esm2017")})();const Kt=[];for(let i=0;i<256;++i)Kt.push((i+256).toString(16).slice(1));function aN(i,e=0){return(Kt[i[e+0]]+Kt[i[e+1]]+Kt[i[e+2]]+Kt[i[e+3]]+"-"+Kt[i[e+4]]+Kt[i[e+5]]+"-"+Kt[i[e+6]]+Kt[i[e+7]]+"-"+Kt[i[e+8]]+Kt[i[e+9]]+"-"+Kt[i[e+10]]+Kt[i[e+11]]+Kt[i[e+12]]+Kt[i[e+13]]+Kt[i[e+14]]+Kt[i[e+15]]).toLowerCase()}let Um;const oN=new Uint8Array(16);function lN(){if(!Um){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Um=crypto.getRandomValues.bind(crypto)}return Um(oN)}const uN=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),lE={randomUUID:uN};function cN(i,e,n){var o;if(lE.randomUUID&&!i)return lE.randomUUID();i=i||{};const s=i.random??((o=i.rng)==null?void 0:o.call(i))??lN();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,aN(s)}var hN="firebase",fN="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yr(hN,fN,"app");function dg(i,e){var n={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(n[s[o]]=i[s[o]]);return n}function Kb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dN=Kb,Qb=new du("auth","Firebase",Kb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new Sp("@firebase/auth");function mN(i,...e){Mh.logLevel<=Pe.WARN&&Mh.warn(`Auth (${_o}): ${i}`,...e)}function fh(i,...e){Mh.logLevel<=Pe.ERROR&&Mh.error(`Auth (${_o}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(i,...e){throw mg(i,...e)}function Ei(i,...e){return mg(i,...e)}function Yb(i,e,n){const s=Object.assign(Object.assign({},dN()),{[e]:n});return new du("auth","Firebase",s).create(e,{appName:i.name})}function rr(i){return Yb(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mg(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return Qb.create(i,...e)}function Ae(i,e,...n){if(!i)throw mg(e,...n)}function er(i){const e="INTERNAL ASSERTION FAILED: "+i;throw fh(e),new Error(e)}function cr(i,e){i||er(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function pN(){return uE()==="http:"||uE()==="https:"}function uE(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pN()||DR()||"connection"in navigator)?navigator.onLine:!0}function yN(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n){this.shortDelay=e,this.longDelay=n,cr(n>e,"Short delay should be less than long delay!"),this.isMobile=IR()||OR()}get(){return gN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(i,e){cr(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],EN=new Eu(3e4,6e4);function us(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function cs(i,e,n,s,o={}){return Wb(i,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=mu(Object.assign({key:i.config.apiKey},f)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:p},u);return NR()||(g.referrerPolicy="no-referrer"),Xb.fetch()(await Zb(i,i.config.apiHost,n,m),g)})}async function Wb(i,e,n){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},vN),e);try{const o=new bN(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw nh(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw nh(i,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw nh(i,"email-already-in-use",f);if(p==="USER_DISABLED")throw nh(i,"user-disabled",f);const _=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Yb(i,_,g);ei(i,_)}}catch(o){if(o instanceof fr)throw o;ei(i,"network-request-failed",{message:String(o)})}}async function Tu(i,e,n,s,o={}){const u=await cs(i,e,n,s,o);return"mfaPendingCredential"in u&&ei(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function Zb(i,e,n,s){const o=`${e}${n}?${s}`,u=i,f=u.config.emulator?pg(i.config,o):`${i.config.apiScheme}://${o}`;return _N.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function TN(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ei(this.auth,"network-request-failed")),EN.get())})}}function nh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Ei(i,e,s);return o.customData._tokenResponse=n,o}function cE(i){return i!==void 0&&i.enterprise!==void 0}class wN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return TN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SN(i,e){return cs(i,"GET","/v2/recaptchaConfig",us(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(i,e){return cs(i,"POST","/v1/accounts:delete",e)}async function Vh(i,e){return cs(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RN(i,e=!1){const n=Rt(i),s=await n.getIdToken(e),o=gg(s);Ae(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:Wl(Lm(o.auth_time)),issuedAtTime:Wl(Lm(o.iat)),expirationTime:Wl(Lm(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Lm(i){return Number(i)*1e3}function gg(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return fh("JWT malformed, contained fewer than 3 sections"),null;try{const o=JE(n);return o?JSON.parse(o):(fh("Failed to decode base64 JWT payload"),null)}catch(o){return fh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function hE(i){const e=gg(i);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lu(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof fr&&xN(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function xN({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wl(this.lastLoginAt),this.creationTime=Wl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ph(i){var e;const n=i.auth,s=await i.getIdToken(),o=await lu(i,Vh(n,{idToken:s}));Ae(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];i._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?Jb(u.providerUserInfo):[],m=NN(i.providerData,f),p=i.isAnonymous,g=!(i.email&&u.passwordHash)&&!(m!=null&&m.length),_=p?g:!1,b={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new fp(u.createdAt,u.lastLoginAt),isAnonymous:_};Object.assign(i,b)}async function CN(i){const e=Rt(i);await Ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NN(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Jb(i){return i.map(e=>{var{providerId:n}=e,s=dg(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(i,e){const n=await Wb(i,{},async()=>{const s=mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=await Zb(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",Xb.fetch()(f,{method:"POST",headers:m,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ON(i,e){return cs(i,"POST","/v2/accounts:revokeToken",us(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const n=hE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await DN(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new ro;return s&&(Ae(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Ae(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Ae(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ro,this.toJSON())}_performRefresh(){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(i,e){Ae(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Zn{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=dg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new IN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new fp(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await lu(this,this.stsTokenManager.getToken(this.auth,e));return Ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RN(this,e)}reload(){return CN(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ph(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fn(this.auth.app))return Promise.reject(rr(this.auth));const e=await this.getIdToken();return await lu(this,AN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,f,m,p,g,_;const b=(s=n.displayName)!==null&&s!==void 0?s:void 0,S=(o=n.email)!==null&&o!==void 0?o:void 0,M=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,k=(f=n.photoURL)!==null&&f!==void 0?f:void 0,Y=(m=n.tenantId)!==null&&m!==void 0?m:void 0,G=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,$=(g=n.createdAt)!==null&&g!==void 0?g:void 0,ae=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:te,emailVerified:pe,isAnonymous:he,providerData:ve,stsTokenManager:V}=n;Ae(te&&V,e,"internal-error");const R=ro.fromJSON(this.name,V);Ae(typeof te=="string",e,"internal-error"),Br(b,e.name),Br(S,e.name),Ae(typeof pe=="boolean",e,"internal-error"),Ae(typeof he=="boolean",e,"internal-error"),Br(M,e.name),Br(k,e.name),Br(Y,e.name),Br(G,e.name),Br($,e.name),Br(ae,e.name);const I=new Zn({uid:te,auth:e,email:S,emailVerified:pe,displayName:b,isAnonymous:he,photoURL:k,phoneNumber:M,tenantId:Y,stsTokenManager:R,createdAt:$,lastLoginAt:ae});return ve&&Array.isArray(ve)&&(I.providerData=ve.map(x=>Object.assign({},x))),G&&(I._redirectEventId=G),I}static async _fromIdTokenResponse(e,n,s=!1){const o=new ro;o.updateFromServerResponse(n);const u=new Zn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Ph(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ae(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Jb(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new ro;m.updateFromIdToken(s);const p=new Zn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new fp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=new Map;function tr(i){cr(i instanceof Function,"Expected a class definition");let e=fE.get(i);return e?(cr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,fE.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ew.type="NONE";const dE=ew;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(i,e,n){return`firebase:${i}:${e}:${n}`}class so{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=dh(this.userKey,o.apiKey,u),this.fullPersistenceKey=dh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Vh(this.auth,{idToken:e}).catch(()=>{});return n?Zn._fromGetAccountInfoResponse(this.auth,n,e):null}return Zn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new so(tr(dE),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||tr(dE);const f=dh(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const _=await g._get(f);if(_){let b;if(typeof _=="string"){const S=await Vh(e,{idToken:_}).catch(()=>{});if(!S)break;b=await Zn._fromGetAccountInfoResponse(e,S,_)}else b=Zn._fromJSON(e,_);g!==u&&(m=b),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new so(u,e,s):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new so(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aw(e))return"Blackberry";if(ow(e))return"Webos";if(nw(e))return"Safari";if((e.includes("chrome/")||iw(e))&&!e.includes("edge/"))return"Chrome";if(sw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function tw(i=an()){return/firefox\//i.test(i)}function nw(i=an()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iw(i=an()){return/crios\//i.test(i)}function rw(i=an()){return/iemobile/i.test(i)}function sw(i=an()){return/android/i.test(i)}function aw(i=an()){return/blackberry/i.test(i)}function ow(i=an()){return/webos/i.test(i)}function yg(i=an()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function kN(i=an()){var e;return yg(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function MN(){return kR()&&document.documentMode===10}function lw(i=an()){return yg(i)||sw(i)||ow(i)||aw(i)||/windows phone/i.test(i)||rw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(i,e=[]){let n;switch(i){case"Browser":n=mE(an());break;case"Worker":n=`${mE(an())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${_o}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PN(i,e={}){return cs(i,"GET","/v2/passwordPolicy",us(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=6;class LN{constructor(e){var n,s,o,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:UN,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,f,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(f=p.containsNumericCharacter)!==null&&f!==void 0?f:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pE(this),this.idTokenSubscription=new pE(this),this.beforeStateQueue=new VN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=tr(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await so.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Vh(this,{idToken:e}),s=await Zn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Fn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!f||f===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ph(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fn(this.app))return Promise.reject(rr(this));const n=e?Rt(e):null;return n&&Ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fn(this.app)?Promise.reject(rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fn(this.app)?Promise.reject(rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(tr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PN(this),n=new LN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new du("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await ON(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&tr(e)||this._popupRedirectResolver;Ae(n,this,"argument-error"),this.redirectPersistenceManager=await so.create(this,[tr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&mN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ra(i){return Rt(i)}class pE{constructor(e){this.auth=e,this.observer=null,this.addObserver=BR(n=>this.observer=n)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zN(i){gf=i}function cw(i){return gf.loadJS(i)}function BN(){return gf.recaptchaEnterpriseScript}function qN(){return gf.gapiScript}function HN(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class FN{constructor(){this.enterprise=new GN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class GN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const $N="recaptcha-enterprise",hw="NO_RECAPTCHA";class KN{constructor(e){this.type=$N,this.auth=ra(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{SN(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new wN(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,f(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,f,m){const p=window.grecaptcha;cE(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{f(g)}).catch(()=>{f(hw)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new FN().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(m=>{if(!n&&cE(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=BN();p.length!==0&&(p+=m),cw(p).then(()=>{o(m,u,f)}).catch(g=>{f(g)})}}).catch(m=>{f(m)})})}}async function gE(i,e,n,s=!1,o=!1){const u=new KN(i);let f;if(o)f=hw;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function dp(i,e,n,s,o){var u;if(!((u=i._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await gE(i,e,n,n==="getOobCode");return s(i,f)}else return s(i,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await gE(i,e,n,n==="getOobCode");return s(i,m)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(i,e){const n=Rp(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Zr(u,e??{}))return o;ei(o,"already-initialized")}return n.initialize({options:e})}function YN(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(tr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function XN(i,e,n){const s=ra(i);Ae(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=fw(e),{host:f,port:m}=WN(e),p=m===null?"":`:${m}`,g={url:`${u}//${f}${p}/`},_=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ae(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ae(Zr(g,s.config.emulator)&&Zr(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,ZN()}function fw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function WN(i){const e=fw(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:yE(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:yE(f)}}}function yE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function ZN(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return er("not implemented")}_getIdTokenResponse(e){return er("not implemented")}_linkToIdToken(e,n){return er("not implemented")}_getReauthenticationResolver(e){return er("not implemented")}}async function JN(i,e){return cs(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eD(i,e){return Tu(i,"POST","/v1/accounts:signInWithPassword",us(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tD(i,e){return Tu(i,"POST","/v1/accounts:signInWithEmailLink",us(i,e))}async function nD(i,e){return Tu(i,"POST","/v1/accounts:signInWithEmailLink",us(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends vg{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new uu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new uu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dp(e,n,"signInWithPassword",eD);case"emailLink":return tD(e,{email:this._email,oobCode:this._password});default:ei(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dp(e,s,"signUpPassword",JN);case"emailLink":return nD(e,{idToken:n,email:this._email,oobCode:this._password});default:ei(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(i,e){return Tu(i,"POST","/v1/accounts:signInWithIdp",us(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="http://localhost";class ea extends vg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ei("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=dg(n,["providerId","signInMethod"]);if(!s||!o)return null;const f=new ea(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return ao(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ao(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ao(e,n)}buildRequest(){const e={requestUri:iD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sD(i){const e=Bl(ql(i)).link,n=e?Bl(ql(e)).deep_link_id:null,s=Bl(ql(i)).deep_link_id;return(s?Bl(ql(s)).link:null)||s||n||e||i}class _g{constructor(e){var n,s,o,u,f,m;const p=Bl(ql(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,_=(s=p.oobCode)!==null&&s!==void 0?s:null,b=rD((o=p.mode)!==null&&o!==void 0?o:null);Ae(g&&_&&b,"argument-error"),this.apiKey=g,this.operation=b,this.code=_,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(f=p.languageCode)!==null&&f!==void 0?f:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=sD(e);try{return new _g(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.providerId=xo.PROVIDER_ID}static credential(e,n){return uu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=_g.parseLink(n);return Ae(s,"argument-error"),uu._fromEmailAndCode(e,s.code,s.tenantId)}}xo.PROVIDER_ID="password";xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends dw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends bu{constructor(){super("facebook.com")}static credential(e){return ea._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qr.credential(e.oauthAccessToken)}catch{return null}}}qr.FACEBOOK_SIGN_IN_METHOD="facebook.com";qr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ea._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ji.credential(n,s)}catch{return null}}}Ji.GOOGLE_SIGN_IN_METHOD="google.com";Ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends bu{constructor(){super("github.com")}static credential(e){return ea._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hr.credential(e.oauthAccessToken)}catch{return null}}}Hr.GITHUB_SIGN_IN_METHOD="github.com";Hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends bu{constructor(){super("twitter.com")}static credential(e,n){return ea._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Fr.credential(n,s)}catch{return null}}}Fr.TWITTER_SIGN_IN_METHOD="twitter.com";Fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD(i,e){return Tu(i,"POST","/v1/accounts:signUp",us(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Zn._fromIdTokenResponse(e,s,o),f=vE(s);return new ta({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=vE(s);return new ta({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function vE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh extends fr{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Uh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Uh(e,n,s,o)}}function mw(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Uh._fromErrorAndOperation(i,u,e,s):u})}async function oD(i,e,n=!1){const s=await lu(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return ta._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lD(i,e,n=!1){const{auth:s}=i;if(Fn(s.app))return Promise.reject(rr(s));const o="reauthenticate";try{const u=await lu(i,mw(s,o,e,i),n);Ae(u.idToken,s,"internal-error");const f=gg(u.idToken);Ae(f,s,"internal-error");const{sub:m}=f;return Ae(i.uid===m,s,"user-mismatch"),ta._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&ei(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pw(i,e,n=!1){if(Fn(i.app))return Promise.reject(rr(i));const s="signIn",o=await mw(i,s,e),u=await ta._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function uD(i,e){return pw(ra(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gw(i){const e=ra(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cD(i,e,n){if(Fn(i.app))return Promise.reject(rr(i));const s=ra(i),f=await dp(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aD).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&gw(i),p}),m=await ta._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(m.user),m}function hD(i,e,n){return Fn(i.app)?Promise.reject(rr(i)):uD(Rt(i),xo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&gw(i),s})}function fD(i,e,n,s){return Rt(i).onIdTokenChanged(e,n,s)}function dD(i,e,n){return Rt(i).beforeAuthStateChanged(e,n)}function mD(i,e,n,s){return Rt(i).onAuthStateChanged(e,n,s)}function pD(i){return Rt(i).signOut()}async function gD(i){return Rt(i).delete()}const Lh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lh,"1"),this.storage.removeItem(Lh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=1e3,vD=10;class vw extends yw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);MN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,vD):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},yD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}vw.type="LOCAL";const _D=vw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w extends yw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}_w.type="SESSION";const Ew=_w;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new yf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async g=>g(n.origin,u)),p=await ED(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const g=Eg("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(b){const S=b;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(S.data.response);break;default:clearTimeout(_),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(){return window}function bD(i){Ti().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(){return typeof Ti().WorkerGlobalScope<"u"&&typeof Ti().importScripts=="function"}async function wD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SD(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function AD(){return Tw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw="firebaseLocalStorageDb",RD=1,jh="firebaseLocalStorage",ww="fbase_key";class wu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vf(i,e){return i.transaction([jh],e?"readwrite":"readonly").objectStore(jh)}function xD(){const i=indexedDB.deleteDatabase(bw);return new wu(i).toPromise()}function mp(){const i=indexedDB.open(bw,RD);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(jh,{keyPath:ww})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(jh)?e(s):(s.close(),await xD(),e(await mp()))})})}async function _E(i,e,n){const s=vf(i,!0).put({[ww]:e,value:n});return new wu(s).toPromise()}async function ID(i,e){const n=vf(i,!1).get(e),s=await new wu(n).toPromise();return s===void 0?null:s.value}function EE(i,e){const n=vf(i,!0).delete(e);return new wu(n).toPromise()}const CD=800,ND=3;class Sw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>ND)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yf._getInstance(AD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await wD(),!this.activeServiceWorker)return;this.sender=new TD(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mp();return await _E(e,Lh,"1"),await EE(e,Lh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>_E(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>ID(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>EE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=vf(o,!1).getAll();return new wu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Sw.type="LOCAL";const DD=Sw;new Eu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(i,e){return e?tr(e):(Ae(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg extends vg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ao(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ao(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ao(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function kD(i){return pw(i.auth,new Tg(i),i.bypassAuthState)}function MD(i){const{auth:e,user:n}=i;return Ae(n,e,"internal-error"),lD(n,new Tg(i),i.bypassAuthState)}async function VD(i){const{auth:e,user:n}=i;return Ae(n,e,"internal-error"),oD(n,new Tg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kD;case"linkViaPopup":case"linkViaRedirect":return VD;case"reauthViaPopup":case"reauthViaRedirect":return MD;default:ei(this.auth,"internal-error")}}resolve(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=new Eu(2e3,1e4);class no extends Aw{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,no.currentPopupAction&&no.currentPopupAction.cancel(),no.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){cr(this.filter.length===1,"Popup operations only handle one event");const e=Eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,no.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PD.get())};e()}}no.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD="pendingRedirect",mh=new Map;class LD extends Aw{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=mh.get(this.auth._key());if(!e){try{const s=await jD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}mh.set(this.auth._key(),e)}return this.bypassAuthState||mh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jD(i,e){const n=qD(e),s=BD(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function zD(i,e){mh.set(i._key(),e)}function BD(i){return tr(i._redirectPersistence)}function qD(i){return dh(UD,i.config.apiKey,i.name)}async function HD(i,e,n=!1){if(Fn(i.app))return Promise.reject(rr(i));const s=ra(i),o=OD(s,e),f=await new LD(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=10*60*1e3;class GD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$D(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!Rw(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Ei(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FD&&this.cachedEventUids.clear(),this.cachedEventUids.has(TE(e))}saveEventToCache(e){this.cachedEventUids.add(TE(e)),this.lastProcessedEventTime=Date.now()}}function TE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Rw({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $D(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rw(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(i,e={}){return cs(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YD=/^https?/;async function XD(i){if(i.config.emulator)return;const{authorizedDomains:e}=await KD(i);for(const n of e)try{if(WD(n))return}catch{}ei(i,"unauthorized-domain")}function WD(i){const e=hp(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!YD.test(n))return!1;if(QD.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=new Eu(3e4,6e4);function bE(){const i=Ti().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function JD(i){return new Promise((e,n)=>{var s,o,u;function f(){bE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bE(),n(Ei(i,"network-request-failed"))},timeout:ZD.get()})}if(!((o=(s=Ti().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Ti().gapi)===null||u===void 0)&&u.load)f();else{const m=HN("iframefcb");return Ti()[m]=()=>{gapi.load?f():n(Ei(i,"network-request-failed"))},cw(`${qN()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw ph=null,e})}let ph=null;function eO(i){return ph=ph||JD(i),ph}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=new Eu(5e3,15e3),nO="__/auth/iframe",iO="emulator/auth/iframe",rO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aO(i){const e=i.config;Ae(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?pg(e,iO):`https://${i.config.authDomain}/${nO}`,s={apiKey:e.apiKey,appName:i.name,v:_o},o=sO.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${mu(s).slice(1)}`}async function oO(i){const e=await eO(i),n=Ti().gapi;return Ae(n,i,"internal-error"),e.open({where:document.body,url:aO(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rO,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Ei(i,"network-request-failed"),m=Ti().setTimeout(()=>{u(f)},tO.get());function p(){Ti().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uO=500,cO=600,hO="_blank",fO="http://localhost";class wE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dO(i,e,n,s=uO,o=cO){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},lO),{width:s.toString(),height:o.toString(),top:u,left:f}),g=an().toLowerCase();n&&(m=iw(g)?hO:n),tw(g)&&(e=e||fO,p.scrollbars="yes");const _=Object.entries(p).reduce((S,[M,k])=>`${S}${M}=${k},`,"");if(kN(g)&&m!=="_self")return mO(e||"",m),new wE(null);const b=window.open(e||"",m,_);Ae(b,i,"popup-blocked");try{b.focus()}catch{}return new wE(b)}function mO(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO="__/auth/handler",gO="emulator/auth/handler",yO=encodeURIComponent("fac");async function SE(i,e,n,s,o,u){Ae(i.config.authDomain,i,"auth-domain-config-required"),Ae(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:_o,eventId:o};if(e instanceof dw){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",zR(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,b]of Object.entries({}))f[_]=b}if(e instanceof bu){const _=e.getScopes().filter(b=>b!=="");_.length>0&&(f.scopes=_.join(","))}i.tenantId&&(f.tid=i.tenantId);const m=f;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const p=await i._getAppCheckToken(),g=p?`#${yO}=${encodeURIComponent(p)}`:"";return`${vO(i)}?${mu(m).slice(1)}${g}`}function vO({config:i}){return i.emulator?pg(i,gO):`https://${i.authDomain}/${pO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="webStorageSupport";class _O{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ew,this._completeRedirectFn=HD,this._overrideRedirectResult=zD}async _openPopup(e,n,s,o){var u;cr((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await SE(e,n,s,hp(),o);return dO(e,f,Eg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await SE(e,n,s,hp(),o);return bD(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(cr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await oO(e),s=new GD(e);return n.register("authEvent",o=>(Ae(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jm,{type:jm},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[jm];f!==void 0&&n(!!f),ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lw()||nw()||yg()}}const EO=_O;var AE="@firebase/auth",RE="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wO(i){oo(new Ws("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Ae(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uw(i)},g=new jN(s,o,u,p);return YN(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),oo(new Ws("auth-internal",e=>{const n=ra(e.getProvider("auth").getImmediate());return(s=>new TO(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yr(AE,RE,bO(i)),Yr(AE,RE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=5*60,AO=nT("authIdTokenMaxAge")||SO;let xE=null;const RO=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>AO)return;const o=n==null?void 0:n.token;xE!==o&&(xE=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Io(i=aT()){const e=Rp(i,"auth");if(e.isInitialized())return e.getImmediate();const n=QN(i,{popupRedirectResolver:EO,persistence:[DD,_D,Ew]}),s=nT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=RO(u.toString());dD(n,f,()=>f(n.currentUser)),fD(n,m=>f(m))}}const o=eT("auth");return o&&XN(n,`http://${o}`),n}function xO(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}zN({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Ei("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",xO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wO("Browser");const IO={apiKey:"AIzaSyCokHWur389mPNtqhX2ASGku6wYrOYmyto",authDomain:"togethr-4c885.firebaseapp.com",projectId:"togethr-4c885",storageBucket:"togethr-4c885.firebasestorage.app",messagingSenderId:"365466488270",appId:`1:365466488270:web:3d47582f2c917b86ae2f9f
`},xw=sT(IO),ht=$2(xw);Io(xw);new Ji;let CO={data:""},NO=i=>typeof window=="object"?((i?i.querySelector("#_goober"):window._goober)||Object.assign((i||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:i||CO,DO=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,OO=/\/\*[^]*?\*\/|  +/g,IE=/\n+/g,Gr=(i,e)=>{let n="",s="",o="";for(let u in i){let f=i[u];u[0]=="@"?u[1]=="i"?n=u+" "+f+";":s+=u[1]=="f"?Gr(f,u):u+"{"+Gr(f,u[1]=="k"?"":e)+"}":typeof f=="object"?s+=Gr(f,e?e.replace(/([^,])+/g,m=>u.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,p=>/&/.test(p)?p.replace(/&/g,m):m?m+" "+p:p)):u):f!=null&&(u=/^--/.test(u)?u:u.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Gr.p?Gr.p(u,f):u+":"+f+";")}return n+(e&&o?e+"{"+o+"}":o)+s},Zi={},Iw=i=>{if(typeof i=="object"){let e="";for(let n in i)e+=n+Iw(i[n]);return e}return i},kO=(i,e,n,s,o)=>{let u=Iw(i),f=Zi[u]||(Zi[u]=(p=>{let g=0,_=11;for(;g<p.length;)_=101*_+p.charCodeAt(g++)>>>0;return"go"+_})(u));if(!Zi[f]){let p=u!==i?i:(g=>{let _,b,S=[{}];for(;_=DO.exec(g.replace(OO,""));)_[4]?S.shift():_[3]?(b=_[3].replace(IE," ").trim(),S.unshift(S[0][b]=S[0][b]||{})):S[0][_[1]]=_[2].replace(IE," ").trim();return S[0]})(i);Zi[f]=Gr(o?{["@keyframes "+f]:p}:p,n?"":"."+f)}let m=n&&Zi.g?Zi.g:null;return n&&(Zi.g=Zi[f]),((p,g,_,b)=>{b?g.data=g.data.replace(b,p):g.data.indexOf(p)===-1&&(g.data=_?p+g.data:g.data+p)})(Zi[f],e,s,m),f},MO=(i,e,n)=>i.reduce((s,o,u)=>{let f=e[u];if(f&&f.call){let m=f(n),p=m&&m.props&&m.props.className||/^go/.test(m)&&m;f=p?"."+p:m&&typeof m=="object"?m.props?"":Gr(m,""):m===!1?"":m}return s+o+(f??"")},"");function _f(i){let e=this||{},n=i.call?i(e.p):i;return kO(n.unshift?n.raw?MO(n,[].slice.call(arguments,1),e.p):n.reduce((s,o)=>Object.assign(s,o&&o.call?o(e.p):o),{}):n,NO(e.target),e.g,e.o,e.k)}let Cw,pp,gp;_f.bind({g:1});let hr=_f.bind({k:1});function VO(i,e,n,s){Gr.p=e,Cw=i,pp=n,gp=s}function hs(i,e){let n=this||{};return function(){let s=arguments;function o(u,f){let m=Object.assign({},u),p=m.className||o.className;n.p=Object.assign({theme:pp&&pp()},m),n.o=/ *go\d+/.test(p),m.className=_f.apply(n,s)+(p?" "+p:"");let g=i;return i[0]&&(g=m.as||i,delete m.as),gp&&g[0]&&gp(m),Cw(g,m)}return o}}var PO=i=>typeof i=="function",zh=(i,e)=>PO(i)?i(e):i,UO=(()=>{let i=0;return()=>(++i).toString()})(),Nw=(()=>{let i;return()=>{if(i===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");i=!e||e.matches}return i}})(),LO=20,Dw=(i,e)=>{switch(e.type){case 0:return{...i,toasts:[e.toast,...i.toasts].slice(0,LO)};case 1:return{...i,toasts:i.toasts.map(u=>u.id===e.toast.id?{...u,...e.toast}:u)};case 2:let{toast:n}=e;return Dw(i,{type:i.toasts.find(u=>u.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=e;return{...i,toasts:i.toasts.map(u=>u.id===s||s===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return e.toastId===void 0?{...i,toasts:[]}:{...i,toasts:i.toasts.filter(u=>u.id!==e.toastId)};case 5:return{...i,pausedAt:e.time};case 6:let o=e.time-(i.pausedAt||0);return{...i,pausedAt:void 0,toasts:i.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+o}))}}},gh=[],Xs={toasts:[],pausedAt:void 0},sa=i=>{Xs=Dw(Xs,i),gh.forEach(e=>{e(Xs)})},jO={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},zO=(i={})=>{let[e,n]=L.useState(Xs),s=L.useRef(Xs);L.useEffect(()=>(s.current!==Xs&&n(Xs),gh.push(n),()=>{let u=gh.indexOf(n);u>-1&&gh.splice(u,1)}),[]);let o=e.toasts.map(u=>{var f,m,p;return{...i,...i[u.type],...u,removeDelay:u.removeDelay||((f=i[u.type])==null?void 0:f.removeDelay)||(i==null?void 0:i.removeDelay),duration:u.duration||((m=i[u.type])==null?void 0:m.duration)||(i==null?void 0:i.duration)||jO[u.type],style:{...i.style,...(p=i[u.type])==null?void 0:p.style,...u.style}}});return{...e,toasts:o}},BO=(i,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:i,pauseDuration:0,...n,id:(n==null?void 0:n.id)||UO()}),Su=i=>(e,n)=>{let s=BO(e,i,n);return sa({type:2,toast:s}),s.id},hn=(i,e)=>Su("blank")(i,e);hn.error=Su("error");hn.success=Su("success");hn.loading=Su("loading");hn.custom=Su("custom");hn.dismiss=i=>{sa({type:3,toastId:i})};hn.remove=i=>sa({type:4,toastId:i});hn.promise=(i,e,n)=>{let s=hn.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof i=="function"&&(i=i()),i.then(o=>{let u=e.success?zh(e.success,o):void 0;return u?hn.success(u,{id:s,...n,...n==null?void 0:n.success}):hn.dismiss(s),o}).catch(o=>{let u=e.error?zh(e.error,o):void 0;u?hn.error(u,{id:s,...n,...n==null?void 0:n.error}):hn.dismiss(s)}),i};var qO=(i,e)=>{sa({type:1,toast:{id:i,height:e}})},HO=()=>{sa({type:5,time:Date.now()})},Zl=new Map,FO=1e3,GO=(i,e=FO)=>{if(Zl.has(i))return;let n=setTimeout(()=>{Zl.delete(i),sa({type:4,toastId:i})},e);Zl.set(i,n)},$O=i=>{let{toasts:e,pausedAt:n}=zO(i);L.useEffect(()=>{if(n)return;let u=Date.now(),f=e.map(m=>{if(m.duration===1/0)return;let p=(m.duration||0)+m.pauseDuration-(u-m.createdAt);if(p<0){m.visible&&hn.dismiss(m.id);return}return setTimeout(()=>hn.dismiss(m.id),p)});return()=>{f.forEach(m=>m&&clearTimeout(m))}},[e,n]);let s=L.useCallback(()=>{n&&sa({type:6,time:Date.now()})},[n]),o=L.useCallback((u,f)=>{let{reverseOrder:m=!1,gutter:p=8,defaultPosition:g}=f||{},_=e.filter(M=>(M.position||g)===(u.position||g)&&M.height),b=_.findIndex(M=>M.id===u.id),S=_.filter((M,k)=>k<b&&M.visible).length;return _.filter(M=>M.visible).slice(...m?[S+1]:[0,S]).reduce((M,k)=>M+(k.height||0)+p,0)},[e]);return L.useEffect(()=>{e.forEach(u=>{if(u.dismissed)GO(u.id,u.removeDelay);else{let f=Zl.get(u.id);f&&(clearTimeout(f),Zl.delete(u.id))}})},[e]),{toasts:e,handlers:{updateHeight:qO,startPause:HO,endPause:s,calculateOffset:o}}},KO=hr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,QO=hr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,YO=hr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,XO=hs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${KO} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${QO} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${i=>i.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${YO} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,WO=hr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ZO=hs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${i=>i.secondary||"#e0e0e0"};
  border-right-color: ${i=>i.primary||"#616161"};
  animation: ${WO} 1s linear infinite;
`,JO=hr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,ek=hr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,tk=hs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${JO} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${ek} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${i=>i.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,nk=hs("div")`
  position: absolute;
`,ik=hs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,rk=hr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,sk=hs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${rk} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ak=({toast:i})=>{let{icon:e,type:n,iconTheme:s}=i;return e!==void 0?typeof e=="string"?L.createElement(sk,null,e):e:n==="blank"?null:L.createElement(ik,null,L.createElement(ZO,{...s}),n!=="loading"&&L.createElement(nk,null,n==="error"?L.createElement(XO,{...s}):L.createElement(tk,{...s})))},ok=i=>`
0% {transform: translate3d(0,${i*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,lk=i=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${i*-150}%,-1px) scale(.6); opacity:0;}
`,uk="0%{opacity:0;} 100%{opacity:1;}",ck="0%{opacity:1;} 100%{opacity:0;}",hk=hs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,fk=hs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,dk=(i,e)=>{let n=i.includes("top")?1:-1,[s,o]=Nw()?[uk,ck]:[ok(n),lk(n)];return{animation:e?`${hr(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${hr(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},mk=L.memo(({toast:i,position:e,style:n,children:s})=>{let o=i.height?dk(i.position||e||"top-center",i.visible):{opacity:0},u=L.createElement(ak,{toast:i}),f=L.createElement(fk,{...i.ariaProps},zh(i.message,i));return L.createElement(hk,{className:i.className,style:{...o,...n,...i.style}},typeof s=="function"?s({icon:u,message:f}):L.createElement(L.Fragment,null,u,f))});VO(L.createElement);var pk=({id:i,className:e,style:n,onHeightUpdate:s,children:o})=>{let u=L.useCallback(f=>{if(f){let m=()=>{let p=f.getBoundingClientRect().height;s(i,p)};m(),new MutationObserver(m).observe(f,{subtree:!0,childList:!0,characterData:!0})}},[i,s]);return L.createElement("div",{ref:u,className:e,style:n},o)},gk=(i,e)=>{let n=i.includes("top"),s=n?{top:0}:{bottom:0},o=i.includes("center")?{justifyContent:"center"}:i.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Nw()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...s,...o}},yk=_f`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ih=16,vk=({reverseOrder:i,position:e="top-center",toastOptions:n,gutter:s,children:o,containerStyle:u,containerClassName:f})=>{let{toasts:m,handlers:p}=$O(n);return L.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:ih,left:ih,right:ih,bottom:ih,pointerEvents:"none",...u},className:f,onMouseEnter:p.startPause,onMouseLeave:p.endPause},m.map(g=>{let _=g.position||e,b=p.calculateOffset(g,{reverseOrder:i,gutter:s,defaultPosition:e}),S=gk(_,b);return L.createElement(pk,{id:g.id,key:g.id,onHeightUpdate:p.updateHeight,className:g.visible?yk:"",style:S},g.type==="custom"?zh(g.message,g):o?o(g):L.createElement(mk,{toast:g,position:_}))}))},lt=hn;const _k=async(i,e,n)=>{const s=cN().split("-")[0],o=Wt(ss(ht,"teams")),u={name:i,bio:e,inviteCode:s,members:[n],memberIds:[n],createdAt:Date.now()};return await Hb(o,u),{id:o.id,...u}},Au=async i=>{const e=Wt(ht,"teams",i),n=await mf(e);return n.exists()?{id:n.id,...n.data()}:null},yp=async(i,e)=>{const n=Wt(ht,"users",i);await Ro(n,e)},Ek=async(i,e)=>{console.log("Firebase 1");const n=ff(ss(ht,"teams"),iN("inviteCode","==",i));console.log("Firebase 2");const s=await qb(n);if(console.log("Firebase 3"),s.empty){lt.error("Team not found");return}console.log("Firebase 4");const u=s.docs[0].id;return console.log("Firebase 5"),await yp(e,{teamIds:oE(u)}),console.log("Firebase 6"),await Ro(Wt(ht,"teams",u),{memberIds:oE(e)}),console.log("Firebase 7"),Au(u)},CE=i=>{let e;const n=new Set,s=(g,_)=>{const b=typeof g=="function"?g(e):g;if(!Object.is(b,e)){const S=e;e=_??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(M=>M(e,S))}},o=()=>e,m={setState:s,getState:o,getInitialState:()=>p,subscribe:g=>(n.add(g),()=>n.delete(g))},p=e=i(s,o,m);return m},Tk=i=>i?CE(i):CE,bk=i=>i;function wk(i,e=bk){const n=P_.useSyncExternalStore(i.subscribe,()=>e(i.getState()),()=>e(i.getInitialState()));return P_.useDebugValue(n),n}const NE=i=>{const e=Tk(i),n=s=>wk(e,s);return Object.assign(n,e),n},Sk=i=>i?NE(i):NE,vt=Sk(i=>({user:null,authLoading:!0,teams:[],setUser:e=>i({user:e}),clearUser:()=>i({user:null}),updateUser:e=>i(n=>({user:{...n.user,...e}})),setAuthLoading:e=>i({authLoading:e}),setTeams:e=>i({teams:e})})),Ak=async(i,e)=>{const n=ss(ht,"teams",i,"tasks");return(await fg(n,{...e,timestamp:$b()})).id},Rk=(i,e)=>{const n=ff(ss(ht,"teams",i,"tasks"),Ub("timestamp","desc"));return Fb(n,s=>{const o=s.docs.map(u=>({id:u.id,...u.data()}));e(o)})},xk=async(i,e,n)=>{const s=Wt(ht,"teams",i,"tasks",e);await Ro(s,n)},Ik=async(i,e)=>{const n=Wt(ht,"teams",i,"tasks",e);await hg(n)},Ck=async i=>{const e=[];for(const n of i){const s=Wt(ht,"users",n),o=await mf(s);o.exists()&&e.push({id:n,...o.data()})}return e},Nk=async i=>{const e=ff(ss(ht,"users",i,"tasks"));return(await qb(e)).docs.map(s=>({id:s.id,...s.data()}))},Dk=async(i,e)=>({id:(await fg(ss(ht,"users",i,"tasks"),e)).id,...e}),Ok=async(i,e,n)=>{const s=Wt(ht,"users",i,"tasks",e);await Ro(s,n)},kk=async(i,e)=>{const n=Wt(ht,"users",i,"tasks",e);await hg(n)},Mk=({task:i,onSave:e})=>{const[n,s]=L.useState(!1),[o,u]=L.useState(i.title),f=L.useRef(null);L.useEffect(()=>{n&&f.current&&f.current.focus()},[n]);const m=()=>{o.trim()&&o!==i.title&&e(o),s(!1)},p=()=>{u(i.title),s(!1)};return A.jsx("div",{className:"relative",children:n?A.jsxs(A.Fragment,{children:[A.jsx("input",{ref:f,value:o,onChange:g=>u(g.target.value),className:"w-full bg-zinc-700 text-white px-3 py-2 rounded-md outline-none border border-zinc-600"}),A.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 mt-2 flex gap-3 bg-zinc-800 border border-zinc-600 rounded-md px-3 py-2 shadow-lg z-10",children:[A.jsx("button",{onClick:m,className:"text-green-400 hover:text-green-500",title:"Save",children:A.jsx(q1,{size:18})}),A.jsx("button",{onClick:p,className:"text-red-400 hover:text-red-500",title:"Cancel",children:A.jsx(XE,{size:18})})]})]}):A.jsx("div",{onClick:()=>s(!0),className:"cursor-pointer hover:bg-zinc-700 px-3 py-2 rounded-md transition",children:A.jsx("p",{className:"text-white",children:i.title||A.jsx("span",{className:"italic text-gray-400",children:"Untitled"})})})})},Vk=()=>{const i=qh(),e=Ri(),s=new URLSearchParams(e.search).get("tab")||"Personal Tasks",o=vt(x=>x.user),[u,f]=L.useState([]),[m,p]=L.useState(s),[g,_]=L.useState([]),b=["Personal Tasks","Team Boards"],[S,M]=L.useState(!0),[k,Y]=L.useState(!1),[G,$]=L.useState(""),[ae,te]=L.useState(""),[pe,he]=L.useState("todo"),ve={todo:g.filter(x=>x.status==="todo"),"in-progress":g.filter(x=>x.status==="in-progress"),done:g.filter(x=>x.status==="done")};L.useEffect(()=>{p(s)},[s]),L.useEffect(()=>{(async()=>{if(!o||!o.uid)return;M(!0);const D=await Nk(o.uid);_(D||[]),M(!1)})()},[o==null?void 0:o.uid]),L.useEffect(()=>{(async()=>{var D;if(M(!0),(D=o==null?void 0:o.teamIds)!=null&&D.length){const P=await Promise.all(o.teamIds.map(N=>Au(N)));f(P.filter(Boolean))}M(!1)})()},[o==null?void 0:o.uid]);const V=async()=>{if(!o.uid){lt.error("Login to add Tasks");return}if(!G){lt.error("Enter the title");return}const x={title:"New Task",status:"todo",createdAt:new Date},D=await Dk(o.uid,x);_(P=>[...P,D]),$(""),te(""),he("todo"),Y(!1)},R=async(x,D)=>{o!=null&&o.uid&&(await Ok(o.uid,x,D),_(P=>P.map(N=>N.id===x?{...N,...D}:N)))},I=async x=>{o!=null&&o.uid&&(await kk(o.uid,x),_(D=>D.filter(P=>P.id!==x)))};return A.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 space-y-10 text-white",children:[A.jsx("div",{className:"flex gap-6 border-b border-gray-600 mb-8",children:b.map(x=>A.jsx("button",{onClick:()=>i(`?tab=${x}`),className:`pb-2 border-b-2 font-medium text-sm transition-colors ${m===x?"border-blue-500 text-blue-500":"border-transparent text-gray-400 hover:text-blue-400"}`,children:x},x))}),m==="Personal Tasks"&&A.jsxs("section",{children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"My Tasks"}),A.jsx("div",{className:"flex gap-2",children:A.jsx("div",{className:"flex justify-center mt-8",children:A.jsx("button",{onClick:()=>Y(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md shadow-sm",children:"+ Add Task"})})})]}),A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:["todo","in-progress","done"].map(x=>A.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg shadow border border-zinc-700 flex flex-col",children:[A.jsx("h3",{className:"text-lg font-semibold mb-4 border-b pb-2 capitalize text-blue-400",children:x.replace("-"," ")}),A.jsx("ul",{className:"space-y-3 min-h-[30px] flex-1",children:ve[x].length>0?ve[x].map(D=>A.jsxs("li",{className:"bg-zinc-700 text-white p-3 rounded-md shadow-sm transition-colors flex justify-between items-center",children:[A.jsx(Mk,{task:D,onSave:P=>R(team.id,D.id)}),A.jsx("div",{className:"flex gap-2 items-center",children:A.jsx("button",{onClick:()=>I(D.id),className:"text-red-500 hover:text-red-300",title:"Delete",children:A.jsx(hR,{size:16})})})]},D.id)):A.jsx("li",{className:"text-gray-400 italic text-sm",children:"No tasks"})})]},x))})]}),k&&A.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:A.jsxs("div",{className:"bg-white dark:bg-zinc-800 p-6 rounded-lg w-full max-w-md space-y-4",children:[A.jsx("h3",{className:"text-xl font-semibold",children:"Add New Task"}),A.jsx("input",{value:G,onChange:x=>$(x.target.value),type:"text",placeholder:"Title",className:"w-full p-2 border rounded-md dark:bg-zinc-700 dark:text-white"}),A.jsx("textarea",{value:ae,onChange:x=>te(x.target.value),placeholder:"Description (optional)",className:"w-full p-2 border rounded-md dark:bg-zinc-700 dark:text-white"}),A.jsxs("select",{value:pe,onChange:x=>he(x.target.value),className:"w-full p-2 border rounded-md dark:bg-zinc-700 dark:text-white",children:[A.jsx("option",{value:"todo",children:"To Do"}),A.jsx("option",{value:"in-progress",children:"In Progress"}),A.jsx("option",{value:"done",children:"Done"})]}),A.jsxs("div",{className:"flex justify-end gap-2",children:[A.jsx("button",{onClick:()=>Y(!1),className:"px-4 py-2 bg-gray-300 dark:bg-zinc-600 rounded",children:"Cancel"}),A.jsx("button",{onClick:V,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Add"})]})]})}),m==="Team Boards"&&A.jsxs("section",{children:[A.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Team Boards"}),u.length>0?A.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(x=>A.jsxs("div",{className:"bg-zinc-800 hover:bg-zinc-700 transition p-4 rounded-lg cursor-pointer shadow",onClick:()=>i(`/teams/${x.id}`),children:[A.jsx("h3",{className:"text-lg font-semibold",children:x.name}),A.jsx("p",{className:"text-sm text-gray-400 truncate",children:x.bio})]},x.id))}):A.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"You’re not in any teams yet. Join or create a team to view team tasks."})]})]})},Pk=async(i,e,n)=>{const s=Io();try{const u=(await cD(s,i,e)).user,f={uid:u.uid,email:u.email,name:n,bio:" ",profession:"",photoURL:""};return await Hb(Wt(ht,"users",u.uid),f),f}catch(o){throw console.error("Sign up error:",o.message),o}},Uk=async(i,e)=>{const n=Io();try{const o=(await hD(n,i,e)).user,u=Wt(ht,"users",o.uid),f=await mf(u);return f.exists()?f.data():null}catch(s){throw console.error("Login error:",s.message),s}},Lk=async()=>{const i=Io();await pD(i)},jk=async i=>{const n=Io().currentUser;n&&(await gD(n),await deleteDoc(Wt(ht,"users",i)))};//! login with redirect
const zk="/Togethr/assets/avatar-CC0QuunI.png",Bk=()=>{const i=vt(k=>k.user),e=vt(k=>k.updateUser),n=vt(k=>k.setUser),{authLoading:s}=vt(),[o,u]=L.useState(!1),[f,m]=L.useState({name:"",bio:"",profession:""}),[p,g]=L.useState({email:"",password:"",name:""});//!result handeling with redirect
L.useEffect(()=>{i&&m({name:i.name||"",bio:i.bio||"",profession:i.profession||""})},[i]);const _=k=>{m(Y=>({...Y,[k.target.name]:k.target.value}))},b=async()=>{try{const k=await Uk(p.email,p.password);k?(n(k),lt.success("Logged in!")):lt.error("No account found. Please sign up.")}catch(k){lt.error(k.message)}},S=async()=>{try{const k=await Pk(p.email,p.password,p.name);n(k),lt.success("Account created and logged in.")}catch(k){k.code==="auth/email-already-in-use"?lt.error("Acc already exists . Try logging in."):lt.error(k.message)}},M=async()=>{if(!i){lt.error("Login first to edit profile");return}try{const k=Wt(ht,"users",i.uid);await Ro(k,f),e(f),u(!1),lt.success("Profile updated")}catch(k){console.error(k),lt.error("Failed to update profile")}};return s?A.jsx("div",{className:"text-center mt-10",children:A.jsx("div",{className:"spinner mx-auto"})}):i===null?A.jsx("div",{className:"flex justify-center mt-10 px-4",children:A.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-zinc-800 p-6 rounded-xl shadow-lg space-y-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-center",children:"Welcome"}),A.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400",children:"Please log in or sign up to access your profile."}),A.jsxs("div",{className:"space-y-4",children:[A.jsx("input",{type:"email",name:"email",placeholder:"Email",value:p.email,onChange:k=>g({...p,email:k.target.value}),className:"w-full p-2 border rounded-md bg-gray-50 dark:bg-zinc-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"}),A.jsx("input",{type:"password",name:"password",placeholder:"Password",value:p.password,onChange:k=>g({...p,password:k.target.value}),className:"w-full p-2 border rounded-md bg-gray-50 dark:bg-zinc-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"}),A.jsx("input",{type:"text",name:"name",placeholder:"Name (for sign up)",value:p.name,onChange:k=>g({...p,name:k.target.value}),className:"w-full p-2 border rounded-md bg-gray-50 dark:bg-zinc-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),A.jsxs("div",{className:"flex justify-between gap-4 mt-4",children:[A.jsx("button",{onClick:b,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg transition",children:"Login"}),A.jsx("button",{onClick:S,className:"w-full bg-green-600 hover:bg-green-700 text-white px-5 py-2 rounded-lg transition",children:"Sign Up"})]})]})}):A.jsx("div",{className:"max-w-xl mx-auto mt-10 bg-white dark:bg-zinc-800 p-6 rounded-xl shadow-md",children:A.jsxs("div",{className:"space-y-4",children:[A.jsx("div",{className:"flex justify-center",children:A.jsx("img",{src:i.photoURL||zk,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-2 border-gray-300"})}),A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Your Profile"}),!o&&A.jsx("button",{onClick:()=>u(!0),className:"text-sm text-blue-600 hover:underline",children:"Edit"})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"block text-sm font-medium",children:"Name"}),A.jsx("input",{name:"name",value:f.name,onChange:_,disabled:!o,className:"w-full p-2 border rounded-md dark:bg-zinc-700 dark:text-white"})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"block text-sm font-medium",children:"Bio"}),A.jsx("textarea",{name:"bio",value:f.bio,onChange:_,disabled:!o,className:"w-full p-2 border rounded-md dark:bg-zinc-700 dark:text-white"})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"block text-sm font-medium",children:"Profession"}),A.jsx("input",{name:"profession",value:f.profession,onChange:_,disabled:!o,className:"w-full p-2 border rounded-md dark:bg-zinc-700 dark:text-white"})]}),o&&A.jsxs("div",{className:"flex gap-4 mt-4",children:[A.jsx("button",{onClick:M,onKeyDown:k=>{k.key==="Enter"&&M()},className:"bg-green-600 text-white px-4 py-2 rounded-md",children:"Save"}),A.jsx("button",{onClick:()=>{u(!1),m({name:i.name||"",bio:i.bio||"",profession:i.profession||""})},className:"bg-gray-400 text-white px-4 py-2 rounded-md",children:"Cancel"})]}),A.jsx("hr",{className:"my-6"}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("button",{onClick:Lk,className:"bg-red-600 text-white px-4 py-2 rounded-md",children:"Logout"}),A.jsx("button",{onClick:()=>jk(i.uid),className:"bg-red-900 text-white px-4 py-2 rounded-md",children:"Delete Account"})]})]})})};var yh={exports:{}},qk=yh.exports,DE;function Hk(){return DE||(DE=1,function(i,e){(function(n,s){i.exports=s()})(qk,function(){var n=1e3,s=6e4,o=36e5,u="millisecond",f="second",m="minute",p="hour",g="day",_="week",b="month",S="quarter",M="year",k="date",Y="Invalid Date",G=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,$=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ae={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(ge){var le=["th","st","nd","rd"],j=ge%100;return"["+ge+(le[(j-20)%10]||le[j]||le[0])+"]"}},te=function(ge,le,j){var W=String(ge);return!W||W.length>=le?ge:""+Array(le+1-W.length).join(j)+ge},pe={s:te,z:function(ge){var le=-ge.utcOffset(),j=Math.abs(le),W=Math.floor(j/60),z=j%60;return(le<=0?"+":"-")+te(W,2,"0")+":"+te(z,2,"0")},m:function ge(le,j){if(le.date()<j.date())return-ge(j,le);var W=12*(j.year()-le.year())+(j.month()-le.month()),z=le.clone().add(W,b),ue=j-z<0,C=le.clone().add(W+(ue?-1:1),b);return+(-(W+(j-z)/(ue?z-C:C-z))||0)},a:function(ge){return ge<0?Math.ceil(ge)||0:Math.floor(ge)},p:function(ge){return{M:b,y:M,w:_,d:g,D:k,h:p,m,s:f,ms:u,Q:S}[ge]||String(ge||"").toLowerCase().replace(/s$/,"")},u:function(ge){return ge===void 0}},he="en",ve={};ve[he]=ae;var V="$isDayjsObject",R=function(ge){return ge instanceof P||!(!ge||!ge[V])},I=function ge(le,j,W){var z;if(!le)return he;if(typeof le=="string"){var ue=le.toLowerCase();ve[ue]&&(z=ue),j&&(ve[ue]=j,z=ue);var C=le.split("-");if(!z&&C.length>1)return ge(C[0])}else{var Z=le.name;ve[Z]=le,z=Z}return!W&&z&&(he=z),z||!W&&he},x=function(ge,le){if(R(ge))return ge.clone();var j=typeof le=="object"?le:{};return j.date=ge,j.args=arguments,new P(j)},D=pe;D.l=I,D.i=R,D.w=function(ge,le){return x(ge,{locale:le.$L,utc:le.$u,x:le.$x,$offset:le.$offset})};var P=function(){function ge(j){this.$L=I(j.locale,null,!0),this.parse(j),this.$x=this.$x||j.x||{},this[V]=!0}var le=ge.prototype;return le.parse=function(j){this.$d=function(W){var z=W.date,ue=W.utc;if(z===null)return new Date(NaN);if(D.u(z))return new Date;if(z instanceof Date)return new Date(z);if(typeof z=="string"&&!/Z$/i.test(z)){var C=z.match(G);if(C){var Z=C[2]-1||0,oe=(C[7]||"0").substring(0,3);return ue?new Date(Date.UTC(C[1],Z,C[3]||1,C[4]||0,C[5]||0,C[6]||0,oe)):new Date(C[1],Z,C[3]||1,C[4]||0,C[5]||0,C[6]||0,oe)}}return new Date(z)}(j),this.init()},le.init=function(){var j=this.$d;this.$y=j.getFullYear(),this.$M=j.getMonth(),this.$D=j.getDate(),this.$W=j.getDay(),this.$H=j.getHours(),this.$m=j.getMinutes(),this.$s=j.getSeconds(),this.$ms=j.getMilliseconds()},le.$utils=function(){return D},le.isValid=function(){return this.$d.toString()!==Y},le.isSame=function(j,W){var z=x(j);return this.startOf(W)<=z&&z<=this.endOf(W)},le.isAfter=function(j,W){return x(j)<this.startOf(W)},le.isBefore=function(j,W){return this.endOf(W)<x(j)},le.$g=function(j,W,z){return D.u(j)?this[W]:this.set(z,j)},le.unix=function(){return Math.floor(this.valueOf()/1e3)},le.valueOf=function(){return this.$d.getTime()},le.startOf=function(j,W){var z=this,ue=!!D.u(W)||W,C=D.p(j),Z=function(Mt,at){var Vt=D.w(z.$u?Date.UTC(z.$y,at,Mt):new Date(z.$y,at,Mt),z);return ue?Vt:Vt.endOf(g)},oe=function(Mt,at){return D.w(z.toDate()[Mt].apply(z.toDate("s"),(ue?[0,0,0,0]:[23,59,59,999]).slice(at)),z)},se=this.$W,fe=this.$M,be=this.$D,Te="set"+(this.$u?"UTC":"");switch(C){case M:return ue?Z(1,0):Z(31,11);case b:return ue?Z(1,fe):Z(0,fe+1);case _:var tt=this.$locale().weekStart||0,qe=(se<tt?se+7:se)-tt;return Z(ue?be-qe:be+(6-qe),fe);case g:case k:return oe(Te+"Hours",0);case p:return oe(Te+"Minutes",1);case m:return oe(Te+"Seconds",2);case f:return oe(Te+"Milliseconds",3);default:return this.clone()}},le.endOf=function(j){return this.startOf(j,!1)},le.$set=function(j,W){var z,ue=D.p(j),C="set"+(this.$u?"UTC":""),Z=(z={},z[g]=C+"Date",z[k]=C+"Date",z[b]=C+"Month",z[M]=C+"FullYear",z[p]=C+"Hours",z[m]=C+"Minutes",z[f]=C+"Seconds",z[u]=C+"Milliseconds",z)[ue],oe=ue===g?this.$D+(W-this.$W):W;if(ue===b||ue===M){var se=this.clone().set(k,1);se.$d[Z](oe),se.init(),this.$d=se.set(k,Math.min(this.$D,se.daysInMonth())).$d}else Z&&this.$d[Z](oe);return this.init(),this},le.set=function(j,W){return this.clone().$set(j,W)},le.get=function(j){return this[D.p(j)]()},le.add=function(j,W){var z,ue=this;j=Number(j);var C=D.p(W),Z=function(fe){var be=x(ue);return D.w(be.date(be.date()+Math.round(fe*j)),ue)};if(C===b)return this.set(b,this.$M+j);if(C===M)return this.set(M,this.$y+j);if(C===g)return Z(1);if(C===_)return Z(7);var oe=(z={},z[m]=s,z[p]=o,z[f]=n,z)[C]||1,se=this.$d.getTime()+j*oe;return D.w(se,this)},le.subtract=function(j,W){return this.add(-1*j,W)},le.format=function(j){var W=this,z=this.$locale();if(!this.isValid())return z.invalidDate||Y;var ue=j||"YYYY-MM-DDTHH:mm:ssZ",C=D.z(this),Z=this.$H,oe=this.$m,se=this.$M,fe=z.weekdays,be=z.months,Te=z.meridiem,tt=function(at,Vt,_n,Nn){return at&&(at[Vt]||at(W,ue))||_n[Vt].slice(0,Nn)},qe=function(at){return D.s(Z%12||12,at,"0")},Mt=Te||function(at,Vt,_n){var Nn=at<12?"AM":"PM";return _n?Nn.toLowerCase():Nn};return ue.replace($,function(at,Vt){return Vt||function(_n){switch(_n){case"YY":return String(W.$y).slice(-2);case"YYYY":return D.s(W.$y,4,"0");case"M":return se+1;case"MM":return D.s(se+1,2,"0");case"MMM":return tt(z.monthsShort,se,be,3);case"MMMM":return tt(be,se);case"D":return W.$D;case"DD":return D.s(W.$D,2,"0");case"d":return String(W.$W);case"dd":return tt(z.weekdaysMin,W.$W,fe,2);case"ddd":return tt(z.weekdaysShort,W.$W,fe,3);case"dddd":return fe[W.$W];case"H":return String(Z);case"HH":return D.s(Z,2,"0");case"h":return qe(1);case"hh":return qe(2);case"a":return Mt(Z,oe,!0);case"A":return Mt(Z,oe,!1);case"m":return String(oe);case"mm":return D.s(oe,2,"0");case"s":return String(W.$s);case"ss":return D.s(W.$s,2,"0");case"SSS":return D.s(W.$ms,3,"0");case"Z":return C}return null}(at)||C.replace(":","")})},le.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},le.diff=function(j,W,z){var ue,C=this,Z=D.p(W),oe=x(j),se=(oe.utcOffset()-this.utcOffset())*s,fe=this-oe,be=function(){return D.m(C,oe)};switch(Z){case M:ue=be()/12;break;case b:ue=be();break;case S:ue=be()/3;break;case _:ue=(fe-se)/6048e5;break;case g:ue=(fe-se)/864e5;break;case p:ue=fe/o;break;case m:ue=fe/s;break;case f:ue=fe/n;break;default:ue=fe}return z?ue:D.a(ue)},le.daysInMonth=function(){return this.endOf(b).$D},le.$locale=function(){return ve[this.$L]},le.locale=function(j,W){if(!j)return this.$L;var z=this.clone(),ue=I(j,W,!0);return ue&&(z.$L=ue),z},le.clone=function(){return D.w(this.$d,this)},le.toDate=function(){return new Date(this.valueOf())},le.toJSON=function(){return this.isValid()?this.toISOString():null},le.toISOString=function(){return this.$d.toISOString()},le.toString=function(){return this.$d.toUTCString()},ge}(),N=P.prototype;return x.prototype=N,[["$ms",u],["$s",f],["$m",m],["$H",p],["$W",g],["$M",b],["$y",M],["$D",k]].forEach(function(ge){N[ge[1]]=function(le){return this.$g(le,ge[0],ge[1])}}),x.extend=function(ge,le){return ge.$i||(ge(le,P,x),ge.$i=!0),x},x.locale=I,x.isDayjs=R,x.unix=function(ge){return x(1e3*ge)},x.en=ve[he],x.Ls=ve,x.p={},x})}(yh)),yh.exports}var Fk=Hk();const vh=OE(Fk),Gk=()=>{const{user:i,teams:e}=vt(),[n,s]=L.useState(null),[o,u]=L.useState(""),[f,m]=L.useState([]),p=L.useRef(null);L.useEffect(()=>{e.length>0&&!n&&s(e[0].id)},[e,n]);const g=e.find(S=>S.id===n);L.useEffect(()=>{if(!g)return;const S=ff(ss(ht,"teams",n,"messages"),Ub("createdAt")),M=Fb(S,k=>{m(k.docs.map(Y=>({id:Y.id,...Y.data()})))});return()=>M()},[n]),L.useEffect(()=>{var S;(S=p.current)==null||S.scrollIntoView({behavior:"smooth"})},[f]);const _=async()=>{var S;o.trim()&&(console.log("Sending as:",i.displayName),await fg(ss(ht,"teams",n,"messages"),{text:o,sender:i.name||((S=i.email)==null?void 0:S.split("@")[0])||"Anonymous",uid:i.uid,createdAt:$b()}),u(""))},b=S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),_())};return e.length?A.jsxs("div",{className:"h-screen bg-zinc-900 text-white flex flex-col sm:flex-row overflow-hidden",children:[!n||window.innerWidth>=640?A.jsxs("div",{className:"w-full sm:w-1/4 bg-zinc-800 border-r border-zinc-700 p-4",children:[A.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Teams"}),A.jsx("ul",{className:"space-y-2 overflow-y-auto max-h-[calc(100vh-5rem)]",children:e.map(S=>A.jsx("li",{onClick:()=>s(S.id),className:`p-3 rounded cursor-pointer transition ${S.id===n?"bg-blue-600 text-white":"bg-zinc-700 hover:bg-zinc-600 text-gray-200"}`,children:S.name},S.id))})]}):null,n&&A.jsxs("div",{className:"flex flex-col flex-1 h-full",children:[A.jsxs("div",{className:"flex items-center p-4 bg-zinc-800 border-b border-zinc-700",children:[A.jsx("button",{className:"sm:hidden mr-2",onClick:()=>s(null),children:A.jsx(F1,{})}),A.jsx("h3",{className:"text-lg font-semibold",children:g==null?void 0:g.name})]}),A.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3 space-y-4 bg-zinc-900",children:[f.length>0?f.map((S,M)=>{var $;const k=S.uid===i.uid,Y=f[M-1],G=M>0&&(Y==null?void 0:Y.uid)===S.uid;return A.jsxs("div",{className:`max-w-[75%] ${k?"ml-auto text-right":"mr-auto"}`,children:[!k&&!G&&A.jsx("p",{className:"text-xs text-gray-400 mb-1",children:S.sender}),A.jsxs("div",{className:`p-3 rounded-lg text-sm shadow break-words inline-block ${k?"bg-blue-600 text-white":"bg-zinc-700 text-white"}`,children:[S.text,A.jsx("div",{className:"text-[10px] mt-1 text-gray-300 text-right",children:($=S.createdAt)!=null&&$.seconds?vh.unix(S.createdAt.seconds).format("HH:mm"):"Sending..."})]})]},S.id)}):A.jsx("p",{className:"text-gray-400 text-center italic",children:"No messages yet."}),A.jsx("div",{ref:p})]}),A.jsx("div",{className:"p-4 border-t border-zinc-700 bg-zinc-800",children:A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("textarea",{value:o,onChange:S=>u(S.target.value),onKeyDown:b,placeholder:"Type a message...",rows:1,className:"w-full p-2 rounded-md bg-zinc-700 text-white resize-none"}),A.jsx("button",{onClick:_,className:"p-2 rounded bg-blue-600 hover:bg-blue-700 transition",children:A.jsx(oR,{className:"w-6 h-6"})})]})})]})]}):A.jsx("div",{className:"h-screen bg-zinc-900 text-white flex items-center justify-center",children:A.jsx("p",{className:"text-lg text-gray-400",children:"Join a team to view the chat."})})},$k=()=>{const i=Io(),e=vt.getState().setUser,n=vt.getState().clearUser,s=vt.getState().setAuthLoading;return mD(i,async o=>{if(!o){n(),s(!1);return}const u=Wt(ht,"users",o.uid),f=await mf(u);f.exists()?e({uid:o.uid,...f.data()}):(console.warn("User logged in but no Firestore data found."),n()),s(!1)})},Kk=()=>{const i=vt(n=>n.user),e=vt(n=>n.setTeams);L.useEffect(()=>{(async()=>{var s;if((s=i==null?void 0:i.teamIds)!=null&&s.length&&vt.getState().teams.length===0){const o=await Promise.all(i.teamIds.map(Au));e(o.filter(Boolean))}})()},[i])},Qk=()=>{const i=vt($=>$.user),e=vt($=>$.updateUser),n=vt($=>$.teams),s=vt($=>$.setTeams),{authLoading:o,setAuthLoading:u}=vt(),[f,m]=L.useState(!1),[p,g]=L.useState(!1),[_,b]=L.useState({name:"",bio:""}),[S,M]=L.useState(""),k=qh();L.useEffect(()=>{(async()=>{var ae;if((ae=i==null?void 0:i.teamIds)!=null&&ae.length){const te=await Promise.all(i.teamIds.map(pe=>Au(pe)));s(te.filter(Boolean))}u(!1)})()},[i]);const Y=async()=>{if(!(i!=null&&i.uid))return lt.error("Login to create team.");if(!_.name||!_.bio)return lt.error("Enter all fields");const $=await _k(_.name,_.bio,i.uid),ae=[...i.teamIds||[],$.id];await yp(i.uid,{teamIds:ae}),e({teamIds:ae}),vt.getState().setTeams([...vt.getState().teams,$]),lt.success("Team created!"),m(!1),b({name:"",bio:""})},G=async()=>{if(!S)return lt.error("Enter Invite Code");if(!(i!=null&&i.uid))return lt.error("Login to Join");try{const $=await Ek(S,i.uid),ae=Array.from(new Set([...i.teamIds||[],$.id]));await yp(i.uid,{teamIds:ae}),e({teamIds:ae}),vt.getState().setTeams([...vt.getState().teams,$]),lt.success("Joined team!"),M(""),g(!1)}catch($){lt.error($.message||"Failed to join team.")}};return o?A.jsx("div",{className:"max-w-4xl mx-auto p-6 mt-10",children:A.jsx("p",{className:"text-center text-gray-400",children:"Loading..."})}):A.jsxs("div",{className:"max-w-4xl mx-auto p-6 mt-10 space-y-6",children:[A.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Teams"}),A.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl p-6 shadow-md cursor-pointer hover:ring-2 ring-blue-500",onClick:()=>m(!0),children:[A.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Create a Team"}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:"Start a new team with a name and bio."})]}),A.jsxs("div",{onClick:()=>g(!0),className:"bg-white dark:bg-zinc-800 rounded-xl p-6 shadow-md cursor-pointer hover:ring-2 ring-green-500",children:[A.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Join a Team"}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:"Enter an invite code to join an existing team."})]})]}),A.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map($=>A.jsxs("div",{onClick:()=>k(`/teams/${$.id}`),className:"group bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-2xl p-6 shadow-sm hover:shadow-lg hover:ring-1 hover:ring-blue-500 cursor-pointer",children:[A.jsxs("div",{className:"flex items-start justify-between mb-3",children:[A.jsx("h2",{className:"text-lg font-semibold",children:$.name}),A.jsx("span",{className:"text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded",children:"Team"})]}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:$.bio}),A.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[A.jsx("span",{className:"font-medium",children:"Invite Code:"})," ",A.jsx("code",{onClick:ae=>ae.stopPropagation(),className:"bg-gray-100 dark:bg-zinc-700 px-1 py-0.5 rounded",children:$.inviteCode})]})]},$.id))}),f&&A.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:A.jsxs("div",{className:"bg-white dark:bg-zinc-800 p-6 rounded-lg w-[90%] max-w-md",children:[A.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create a Team"}),A.jsx("input",{type:"text",placeholder:"Team Name",value:_.name,onChange:$=>b({..._,name:$.target.value}),className:"w-full p-2 mb-2 border rounded dark:bg-zinc-700 dark:text-white"}),A.jsx("textarea",{placeholder:"Team Bio",value:_.bio,onChange:$=>b({..._,bio:$.target.value}),className:"w-full p-2 mb-4 border rounded dark:bg-zinc-700 dark:text-white"}),A.jsxs("div",{className:"flex justify-end gap-2",children:[A.jsx("button",{className:"px-4 py-2 rounded bg-gray-300 dark:bg-zinc-700",onClick:()=>m(!1),children:"Cancel"}),A.jsx("button",{className:"px-4 py-2 rounded bg-blue-600 text-white",onClick:Y,children:"Create"})]})]})}),p&&A.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:A.jsxs("div",{className:"bg-white dark:bg-zinc-800 p-6 rounded-lg w-[90%] max-w-md",children:[A.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Join a Team"}),A.jsx("input",{type:"text",placeholder:"Invite Code",value:S,onChange:$=>M($.target.value),className:"w-full p-2 mb-4 border rounded dark:bg-zinc-700 dark:text-white"}),A.jsxs("div",{className:"flex justify-end gap-2",children:[A.jsx("button",{className:"px-4 py-2 rounded bg-gray-300 dark:bg-zinc-700",onClick:()=>g(!1),children:"Cancel"}),A.jsx("button",{className:"px-4 py-2 rounded bg-green-600 text-white",onClick:G,children:"Join"})]})]})})]})},Yk=({team:i,onEdit:e,onDelete:n})=>{const[s,o]=L.useState(!1),[u,f]=L.useState(i.name||""),[m,p]=L.useState(i.bio||""),g=()=>{navigator.clipboard.writeText(i.inviteCode),lt.success("Invite code copied to clipboard")},_=()=>{u.trim()&&(e({name:u,bio:m}),o(!1))};return A.jsxs("div",{className:"max-w-4xl mx-auto space-y-10 px-4 md:px-8 text-white",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Team Settings"}),A.jsx("p",{className:"text-gray-400 text-sm",children:"Manage your team’s info and preferences"})]}),A.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-md p-6 space-y-4",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("h3",{className:"text-lg font-medium text-blue-400",children:"Team Info"}),!s&&A.jsxs("button",{onClick:()=>o(!0),className:"flex items-center text-sm text-blue-500 hover:text-blue-300",children:[A.jsx(sR,{size:16,className:"mr-1"})," Edit"]})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Name"}),s?A.jsx("input",{type:"text",value:u,onChange:b=>f(b.target.value),className:"w-full bg-zinc-700 border border-zinc-600 rounded px-3 py-2 text-white"}):A.jsx("p",{children:i.name})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),s?A.jsx("textarea",{value:m,onChange:b=>p(b.target.value),className:"w-full bg-zinc-700 border border-zinc-600 rounded px-3 py-2 text-white"}):A.jsx("p",{children:i.bio})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Created At"}),A.jsx("p",{children:new Date(i.createdAt).toLocaleString()})]})]}),s&&A.jsxs("div",{className:"flex gap-3 pt-4",children:[A.jsx("button",{onClick:()=>o(!1),className:"bg-zinc-600 hover:bg-zinc-500 text-white px-4 py-2 rounded-md text-sm",children:"Cancel"}),A.jsx("button",{onClick:_,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm",children:"Save Changes"})]})]}),A.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-md p-6 space-y-2",children:[A.jsx("h3",{className:"text-lg font-medium text-blue-400",children:"Invite Code"}),A.jsxs("div",{className:"flex items-center justify-between bg-zinc-700 px-4 py-2 rounded",children:[A.jsx("code",{className:"text-sm",children:i.inviteCode}),A.jsx("button",{onClick:g,className:"text-blue-400 hover:text-blue-300",title:"Copy invite code",children:A.jsx(X1,{size:18})})]})]}),A.jsxs("div",{className:"bg-zinc-800 border border-red-600 rounded-md p-6 space-y-3",children:[A.jsx("h3",{className:"text-lg font-semibold text-red-500",children:"Danger Zone"}),A.jsx("p",{className:"text-sm text-gray-400",children:"This will permanently delete your team and all associated data."}),A.jsx("button",{onClick:n,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm",children:"Delete This Team"})]})]})},Xk=({team:i,teamId:e})=>{const n=Ri(),s=qh(),u=new URLSearchParams(n.search).get("tab")||"Tasks",[f,m]=L.useState(u),[p,g]=L.useState([]),[_,b]=L.useState(!1),[S,M]=L.useState(""),[k,Y]=L.useState(""),[G,$]=L.useState("todo"),[ae,te]=L.useState(""),[pe,he]=L.useState(""),[ve,V]=L.useState(null),[R,I]=L.useState(i),[x,D]=L.useState(null),[P,N]=L.useState(null);L.useEffect(()=>{if(!(i!=null&&i.id))return;const z=Rk(i.id,g);return()=>z()},[i==null?void 0:i.id]),L.useEffect(()=>{I(i)},[i]),L.useEffect(()=>{(async()=>{if(i!=null&&i.memberIds){const ue=await Ck(i.memberIds);V(ue)}})()},[i==null?void 0:i.memberIds]),L.useEffect(()=>{m(u)},[u]);const ge=z=>{const ue=vh(z).diff(vh(),"day");return z?ue<0?"bg-red-500":ue<=2?"bg-orange-500":"bg-green-500":"bg-gray-500"},le=z=>{D(z),N({...z})},j=async()=>{await xk(i.id,x.id,P),D(null),lt.success("Task updated")},W=async()=>{if(!(i!=null&&i.id)||!S.trim())return;const z={title:S,description:k,status:G,dueDate:ae||null,assignedTo:pe||null,createdBy:"You"};await Ak(i.id,z),b(!1),M(""),Y(""),$("todo"),te(""),he("")};return A.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-10 text-gray-100",children:[A.jsxs("div",{className:"mb-8",children:[A.jsx("h1",{className:"text-4xl font-bold text-white",children:R==null?void 0:R.name}),A.jsx("p",{className:"text-gray-400 mt-2 text-base",children:R==null?void 0:R.bio})]}),A.jsx("div",{className:"flex gap-6 border-b border-gray-600 mb-8",children:["Tasks","Members","Activity","Settings"].map(z=>A.jsx("button",{onClick:()=>s(`?tab=${z}`),className:`pb-2 border-b-2 font-medium text-sm transition-colors ${f===z?"border-blue-500 text-blue-500":"border-transparent text-gray-400 hover:text-blue-400"}`,children:z},z))}),f==="Tasks"&&A.jsxs("div",{className:"space-y-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-white",children:"Team Tasks"}),p.length>0?A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:["todo","in-progress","done"].map(z=>A.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-md p-4 shadow-md",children:[A.jsx("h3",{className:"text-lg font-semibold text-blue-400 mb-3 border-b border-zinc-600 pb-2 capitalize",children:z.replace("-"," ")}),A.jsx("ul",{className:"space-y-3 min-h-[40px]",children:p.filter(ue=>ue.status===z).map(ue=>A.jsx("li",{className:"bg-zinc-700 text-white p-3 rounded-md shadow-sm flex justify-between items-center cursor-pointer hover:bg-zinc-600",onClick:()=>le(ue),children:A.jsxs("div",{className:"flex flex-col",children:[A.jsx("span",{className:"font-medium",children:ue.title}),ue.dueDate&&A.jsxs("span",{className:`text-xs mt-1 inline-block px-2 py-0.5 rounded-full text-white ${ge(ue.dueDate)}`,children:["Due: ",vh(ue.dueDate).format("MMM D")]})]})},ue.id))})]},z))}):A.jsx("div",{className:"text-center text-gray-400 italic mt-10",children:"No tasks yet. Start by adding one."}),A.jsx("div",{className:"flex justify-center",children:A.jsx("button",{onClick:()=>b(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md shadow-sm",children:"+ Add Task"})})]}),_&&A.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:A.jsxs("div",{className:"bg-white dark:bg-zinc-800 p-6 rounded-lg w-full max-w-md space-y-4",children:[A.jsx("h3",{className:"text-xl font-semibold",children:"Add New Task"}),A.jsx("input",{value:S,onChange:z=>M(z.target.value),placeholder:"Title",className:"w-full p-2 border rounded-md dark:bg-zinc-700 dark:text-white"}),A.jsx("textarea",{value:k,onChange:z=>Y(z.target.value),placeholder:"Description",className:"w-full p-2 border rounded-md dark:bg-zinc-700 dark:text-white"}),A.jsx("input",{type:"date",value:ae,onChange:z=>te(z.target.value),className:"w-full p-2 border rounded-md dark:bg-zinc-700 dark:text-white"}),A.jsxs("select",{value:pe,onChange:z=>he(z.target.value),className:"w-full p-2 border rounded-md dark:bg-zinc-700 dark:text-white",children:[A.jsx("option",{value:"",children:"Unassigned"}),ve==null?void 0:ve.map(z=>A.jsx("option",{value:z.id,children:z.name||z.email},z.id))]}),A.jsxs("select",{value:G,onChange:z=>$(z.target.value),className:"w-full p-2 border rounded-md dark:bg-zinc-700 dark:text-white",children:[A.jsx("option",{value:"todo",children:"To Do"}),A.jsx("option",{value:"in-progress",children:"In Progress"}),A.jsx("option",{value:"done",children:"Done"})]}),A.jsxs("div",{className:"flex justify-end gap-2",children:[A.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 bg-gray-300 dark:bg-zinc-600 rounded",children:"Cancel"}),A.jsx("button",{onClick:W,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Add"})]})]})}),x&&P&&A.jsxs("div",{className:"fixed right-0 top-0 h-full w-full max-w-sm bg-zinc-900 text-white z-50 shadow-lg p-6 overflow-y-auto",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsx("h3",{className:"text-lg font-semibold",children:"Task Details"}),A.jsx("button",{onClick:()=>D(null),children:A.jsx(XE,{})})]}),A.jsx("input",{className:"w-full p-2 mb-3 rounded bg-zinc-800",value:P.title,onChange:z=>N({...P,title:z.target.value})}),A.jsx("textarea",{className:"w-full p-2 mb-3 rounded bg-zinc-800",rows:4,value:P.description||"",onChange:z=>N({...P,description:z.target.value})}),A.jsx("label",{className:"text-sm mb-1 block",children:"Due Date"}),A.jsx("input",{type:"date",className:"w-full p-2 mb-3 rounded bg-zinc-800",value:P.dueDate||"",onChange:z=>N({...P,dueDate:z.target.value})}),A.jsx("label",{className:"text-sm mb-1 block",children:"Assigned To"}),A.jsxs("select",{className:"w-full p-2 mb-3 rounded bg-zinc-800",value:P.assignedTo||"",onChange:z=>N({...P,assignedTo:z.target.value}),children:[A.jsx("option",{value:"",children:"Unassigned"}),ve==null?void 0:ve.map(z=>A.jsx("option",{value:z.id,children:z.name||z.email},z.id))]}),A.jsx("label",{className:"text-sm mb-1 block",children:"Status"}),A.jsxs("select",{className:"w-full p-2 mb-3 rounded bg-zinc-800",value:P.status,onChange:z=>N({...P,status:z.target.value}),children:[A.jsx("option",{value:"todo",children:"To Do"}),A.jsx("option",{value:"in-progress",children:"In Progress"}),A.jsx("option",{value:"done",children:"Done"})]}),A.jsxs("div",{className:"text-sm mb-4",children:["Created by: ",P.createdBy||"Unknown"]}),A.jsxs("div",{className:"flex justify-between gap-2",children:[A.jsx("button",{onClick:()=>Ik(e,x.id),className:"text-red-500 hover:text-red-300",children:"Delete"}),A.jsx("button",{onClick:j,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"Save"})]})]}),f==="Members"&&A.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg mt-6",children:[A.jsx("h3",{className:"text-lg font-semibold text-blue-400 mb-3",children:"Team Members"}),ve?A.jsx("ul",{className:"space-y-2 text-sm text-gray-200",children:ve.map(z=>A.jsxs("li",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),z.name||z.email]},z.id))}):A.jsx("p",{className:"text-gray-400 italic",children:"Loading members..."})]}),f==="Activity"&&A.jsxs("div",{children:[A.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Recent Activity"}),A.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[A.jsxs("li",{children:["• Arjun added task:"," ",A.jsx("span",{className:"font-medium",children:"Deploy to Firebase"})]}),A.jsx("li",{children:"• Neha joined the team"}),A.jsx("li",{children:"• Arjun updated team description"})]})]}),f==="Settings"&&A.jsx(Yk,{team:R,onEdit:async z=>{await Ro(Wt(ht,"teams",i.id),z),I(ue=>({...ue,...z})),lt.success("Team updated")},onDelete:async()=>{await hg(Wt(ht,"teams",i.id)),lt.success("Team deleted"),s("/Teams")}})]})},Wk=()=>{const{id:i}=BA(),[e,n]=L.useState(null);return L.useEffect(()=>{(async()=>{const o=await Au(i);n(o)})()},[i]),e?A.jsx(Xk,{team:e,teamId:i}):A.jsx("div",{className:"text-center mt-10",children:A.jsx("div",{className:"spinner mx-auto"})})},Zk=()=>(L.useEffect(()=>{const i=$k();return console.log("Auth listener mounted"),()=>i()},[]),Kk(),A.jsxs("div",{className:"flex flex-col md:flex-row h-screen overflow-hidden bg-white dark:bg-zinc-900 transition-colors duration-300",children:[A.jsx(vk,{position:"top-center",toastOptions:{style:{background:"#333",color:"#fff"},success:{iconTheme:{primary:"green",secondary:"white"}}}}),A.jsx(pR,{}),A.jsx("div",{className:"flex-grow p-4 md:p-6 overflow-y-auto text-gray-900 dark:text-gray-100",children:A.jsxs(n1,{children:[A.jsx(Ks,{path:"/",element:A.jsx(gR,{})}),A.jsx(Ks,{path:"/TasksBoard",element:A.jsx(Vk,{})}),A.jsx(Ks,{path:"/Profile",element:A.jsx(Bk,{})}),A.jsx(Ks,{path:"/ChatPage",element:A.jsx(Gk,{})}),A.jsx(Ks,{path:"/Teams",element:A.jsx(Qk,{})}),A.jsx(Ks,{path:"/teams/:id",element:A.jsx(Wk,{})})]})})]}));hA.createRoot(document.getElementById("root")).render(A.jsx(R1,{basename:"/Togethr",children:A.jsx(L.StrictMode,{children:A.jsx(Zk,{})})}));
